!function(){function b(a){return c[a]||c[a]}function a(a,b){c[a]=b()}!function(){function a(){this.subscribers={}}a.prototype={publish:function(a){this.subscribers[a]=this.subscribers[a]||[];for(var b=0;b<this.subscribers[a].length;b++){var c=this.subscribers[a][b];if("function"==typeof c){for(var d=[],e=1,f=arguments.length;f>e;e++)d.push(arguments[e]);c.apply(this,d)}}},subscribe:function(a,b,c){this.subscribers[a]=this.subscribers[a]||[],this.subscribers[a].push(function(){"function"==typeof b&&b.apply(c,arguments)})}},window.__PubSub__=window.__PubSub__||new a}();var c={},d=window,e=document,f=!0,g=!1,h=["talk","live"],i="http://js.t.sinajs.cn/t6/webim/js/",j="http://img.t.sinajs.cn/t4/appstyle/V6_webim/css/pages/",k={js:i+"webim.js",css:j+"wbim.css"},l={js:i+"webim_g.js",css:j+"wbim.css"},m="http://js.t.sinajs.cn/t5/lang/jsmess/mo/",n="http://img.t.sinajs.cn/t4/appstyle/V6_webim/css/lang/l_en.css",o={"zh-tw":m+"zh-tw.js",en:m+"en-us.js"},p={box:"http://weibo.com/messages/",user:"http://weibo.com/message/history?uid="},q={io:"/socket.io/socket.io.js",jquery:"/client/js/jquery.min.js",index:"/client/js/index.js"},r=["uid","msg","time","mid","card","media_type"],s=["uid","msg","time","type","resource","att_ids","mid","card","media_type"],t=["uid","msg","time","type","mid","card","media_type"],u=["offline","online","away","busy","hide"],v=["uid","nick","status","group","avatar","level","sex","resource","member","intimacy"],w=["uid","nick","status","avatar","isFriend","level","sex","resource","member","intimacy"],x=["uid","nick","status","avatar","sex","resource"],y=["uid","nick","status","avatar","level","isFriend","sex","resource","group"],z=d.JSON||function(){function c(a,d){var e,f,g,h,k,m=i,n=d[a];switch(n&&"object"==typeof n&&"function"==typeof n.toJSON&&(n=n.toJSON(a)),"function"==typeof l&&(n=l.call(d,a,n)),typeof n){case"string":return b(n);case"number":return isFinite(n)?String(n):"null";case"boolean":case"null":return String(n);case"object":if(!n)return"null";if(i+=j,k=[],"[object Array]"===Object.prototype.toString.apply(n)){for(h=n.length,e=0;h>e;e+=1)k[e]=c(e,n)||"null";return g=0===k.length?"[]":i?"[\n"+i+k.join(",\n"+i)+"\n"+m+"]":"["+k.join(",")+"]",i=m,g}if(l&&"object"==typeof l)for(h=l.length,e=0;h>e;e+=1)"string"==typeof l[e]&&(f=l[e],g=c(f,n),g&&k.push(b(f)+(i?": ":":")+g));else for(f in n)Object.prototype.hasOwnProperty.call(n,f)&&(g=c(f,n),g&&k.push(b(f)+(i?": ":":")+g));return g=0===k.length?"{}":i?"{\n"+i+k.join(",\n"+i)+"\n"+m+"}":"{"+k.join(",")+"}",i=m,g}}function b(a){return h.lastIndex=0,h.test(a)?'"'+a.replace(h,function(a){var b=k[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(a){return 10>a?"0"+a:a}var e={},f="eval";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var g,h,i,j,k,l;return h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},e.stringify=function(a,b,d){var e;if(i="",j="","number"==typeof d)for(e=0;d>e;e+=1)j+=" ";else"string"==typeof d&&(j=d);if(l=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return c("",{"":a})},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e.parse=function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"==typeof g)for(e in g)Object.prototype.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var e;if(a=String(a),g.lastIndex=0,g.test(a)&&(a=a.replace(g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=d[f]("("+a+")"),"function"==typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse")},e}();a("A1",function(){return{domain:{1001:{webpage:["1001","社区管理中心卷宗","webpage","object.summary","","卷宗详情","fl_objjumpurl"]},1005:{article:["1005","36Kr文章","article","object.summary","","文章详情","fl_objjumpurl"]},1007:{video:["1007","优酷网","video","object.summary","","播放","feed_list_third_rend"]},1008:{video:["1008","音悦台","video","object.summary","","播放","feed_list_third_rend"]},1009:{webpage:["1009","马蜂窝","webpage","object.summary","","文章详情","fl_objjumpurl"]},1017:{article:["1017","新浪博客","article","object.summary","","文章详情","fl_objjumpurl"],webpage:["1017","门户新闻1017","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1020:{webpage:["1020","门户新闻1020","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1022:{adFeedEvent:["1022","活动广告","adFeedEvent","object.summary","","马上看看","fl_objjumpurl"],adFeedVideo:["1022","广告视频","adFeedVideo","object.summary","","马上看看","fl_objjumpurl"],adMessage:["1022","广告消息","adMessage","object.summary","","马上看看","fl_objjumpurl"],app:["1022","应用Page","app","object.summary","object.author.display_name","点击下载","fl_objjumpurl"],article:["1022","长文","article","object.summary","","马上阅读","feed_list_third_rend"],audio:["1022","音乐page","audio","object.summary","object.ext_summary","","fl_objjumpurl"],bill:["1022","微博转账","bill","转账金额：|object.price","object.summary","","fl_objjumpurl"],book:["1022","读书Page","book","object.summary","object.author.display_name","",""],broadcast:["1022","电台Page","broadcast","简介：|object.summary","","马上收听","fl_objjumpurl"],campaign:["1022","微博活动","campaign","dynamic.remain_time","参与人数：|dynamic.participants","马上参与","fl_objjumpurl"],car:["1022","汽车page","car","object.summary","object.koubei","车型详情","fl_objjumpurl"],cardlist:["1022","Card列表","cardlist","object.summary","","",""],collection:["1022","yetanothercollection","collection","object.summary","","查看更多","feed_list_third_rend"],concert:["1022","演唱会","concert","object.summary","","演出详情","fl_objjumpurl"],coupon:["1022","团购Page","coupon","粉丝价：|object.sell_price","","去购买","fl_objjumpurl"],event:["1022","微博益起来","event","object.first_desc","object.second_desc","马上领取","fl_objjumpurl"],foodRaider:["1022","美食推","foodRaider","object.summary","","查看攻略","fl_objjumpurl"],game:["1022","游戏page","game","object.summary","","游戏详情","fl_objjumpurl"],gameArticle:["1022","游戏文章","gameArticle","object.summary","","马上阅读","fl_objjumpurl"],movie:["1022","电影Page","movie","导演：|object.director.0.display_name","object.summary","影片详情","fl_objjumpurl"],place:["1022","地理位置","place","object.address.street_address","","地点详情","fl_objjumpurl"],product:["1022","微博电商","product","object.subtitle","粉丝价：|object.sell_price","去购买","fl_objjumpurl"],topic:["1022","微话题","topic","object.summary","","话题详情","fl_objjumpurl"],vote:["1022","投票","vote","object.summary","","马上投票","feed_list_third_rend"]},1023:{webpage:["1023","微博之夜投票","webpage","object.summary","","马上投票","fl_objjumpurl"]},1029:{comic:["1029","微漫画","comic","object.summary","","立即观看","fl_objjumpurl"]},1030:{video:["1030","酷6网","video","object.summary","","播放","feed_list_third_rend"]},1031:{video:["1031","搜狐视频","video","object.summary","","播放","feed_list_third_rend"]},1032:{article:["1032","媒体平台特型","article","object.summary","","文章详情","fl_objjumpurl"],collection:["1032","粉服文章","collection","object.summary","","查看更多","feed_list_third_rend"]},1036:{audio:["1036","微盘音频","audio","object.author.display_name","object.create_at","试听","feed_list_third_rend"],file:["1036","微盘文件","file","object.author.display_name","object.create_at","去下载","fl_objjumpurl"],image:["1036","微盘图片","image","object.author.display_name","object.create_at","图片预览","fl_objjumpurl"],video:["1036","微盘视频","video","object.author.display_name","object.create_at","视频详情","fl_objjumpurl"]},1037:{voice:["1037","啪啪","voice","object.summary","","去看看","fl_objjumpurl"]},1042:{event:["1042","微公益-个人求助","event","object.first_desc","object.second_desc","查看详情","feed_list_third_rend"],group:["1042","公开分组","group","object.custom_data.members_list","","查看分组","fl_objjumpurl"],recruit:["1042","微人脉","recruit","object.first_desc","object.second_desc","职位详情","fl_objjumpurl"],webpage:["1042","微公益2","webpage","object.first_desc","object.second_desc","查看详情","fl_objjumpurl"]},1005001:{article:["1005001","36Kr文章","article","object.summary","","文章详情","fl_objjumpurl"]},1008001:{video:["1008001","音悦台","video","object.summary","","播放","feed_list_third_rend"]},1022003:{webpage:["1022003","新浪竞猜","webpage","object.custom_data.creator","object.custom_data.create_time","马上竞猜","fl_objjumpurl"]},1037001:{voice:["1037001","啪啪","voice","object.summary","","去看看","fl_objjumpurl"]},1038001:{game:["1038001","微博踢球","game","object.summary","","马上玩","feed_list_third_rend"],tvShow:["1038001","新浪直播室","tvShow","object.summary","","一键观赛","feed_list_third_rend"],webpage:["1038001","门户新闻001","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038003:{tvShow:["1038003","新浪直播室","tvShow","object.summary","","一键观赛","feed_list_third_rend"],video:["1038003","新浪视频","video","object.summary","","播放","feed_list_third_rend"]},1038005:{webpage:["1038005","门户新闻005","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038006:{article:["1038006","新浪旅游游记","article","object.summary","","游记详情","fl_objjumpurl"],webpage:["1038006","新浪旅游攻略","webpage","object.summary","","查看攻略","fl_objjumpurl"]},1038007:{webpage:["1038007","门户新闻007","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038009:{webpage:["1038009","门户新闻009","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038014:{webpage:["1038014","门户新闻014","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038017:{webpage:["1038017","门户新闻017","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038018:{webpage:["1038018","门户新闻018","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038019:{webpage:["1038019","门户新闻019","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038020:{webpage:["1038020","门户新闻020","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038025:{webpage:["1038025","门户新闻025","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038030:{webpage:["1038030","门户新闻030","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038031:{webpage:["1038031","门户新闻031","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038032:{webpage:["1038032","门户新闻032","webpage","object.summary","","新闻详情","fl_objjumpurl"]},1038036:{audio:["1038036","微博音乐人","audio","object.summary","演唱：|object.author.display_name","","fl_objjumpurl"]},1038037:{video:["1038037","新浪看游戏","video","object.summary","","播放","feed_list_third_rend"]},1038039:{webpage:["1038039","新浪游戏商城","webpage","object.summary","object.custom_data.price","马上看看","fl_objjumpurl"]},1038040:{webpage:["1038040","新浪游戏积分商城","webpage","object.summary","object.custom_data.price","马上看看","fl_objjumpurl"]},1038041:{audio:["1038041","华东音乐","audio","object.summary","","试听","feed_list_third_rend"],video:["1038041","华东视频","video","object.summary","","播放","feed_list_third_rend"],webpage:["1038041","集客","webpage","object.summary","","查看详情","fl_objjumpurl"]},1038081:{event:["1038081","世界杯竞猜","event","object.summary","","参与竞猜","fl_objjumpurl"],video:["1038081","新浪世界杯视频","video","object.summary","","播放","feed_list_third_rend"]},1042005:{appItem:["1042005","平台应用Card","appItem","object.summary","","应用详情","fl_objjumpurl"]},1042014:{recruit:["1042014","微人脉","recruit","object.first_desc","object.second_desc","职位详情","fl_objjumpurl"]},1042017:{event:["1042017","转发求助","event","object.first_desc","object.second_desc","查看详情","fl_objjumpurl"],webpage:["1042017","微公益2","webpage","object.first_desc","object.second_desc","查看详情","fl_objjumpurl"]},1042019:{event:["1042019","带着微博去旅行","event","object.custom_data.tag","object.custom_data.link_pc","抽奖","fl_objjumpurl"]},1042022:{webpage:["1042022","新浪竞猜","webpage","object.custom_data.creator","object.custom_data.create_time","马上竞猜","fl_objjumpurl"]},1042024:{event:["1042024","微博之夜","event","object.custom_data.topic_name","object.custom_data.tag","马上投票","feed_list_third_rend"]},1042025:{bill:["1042025","微博转账","bill","转账金额：|object.price","object.summary","","fl_objjumpurl"]},1042038:{audio:["1042038","新浪乐库","audio","object.summary","演唱：|object.author.display_name","","fl_objjumpurl"]},1042042:{webpage:["1042042","点评团","webpage","object.summary","","查看详情","fl_objjumpurl"]},1042044:{webpage:["1042044","自媒体","webpage","object.summary","","查看详情","fl_objjumpurl"]},2000009:{audio:["2000009","网易云音乐","audio","object.author.display_name","","试听","feed_list_third_rend"],video:["2000009","网易视频","video","object.summary","","播放","feed_list_third_rend"],webpage:["2000009","网易新闻","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2000062:{article:["2000062","财新网","article","object.summary","","文章详情","fl_objjumpurl"]},2000108:{webpage:["2000108","好愿网","webpage","object.author.display_name","","查看详情","fl_objjumpurl"]},2000127:{video:["2000127","凤凰网","video","object.summary","","播放","feed_list_third_rend"]},2000206:{webpage:["2000206","搜狐新闻客户端","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2000241:{article:["2000241","财经网","article","object.summary","","文章详情","fl_objjumpurl"]},2001137:{webpage:["2001137","新东方留学","webpage","object.summary","","文章详情","fl_objjumpurl"]},2002846:{webpage:["2002846","小度i耳目","webpage","object.summary","","马上看看","fl_jumpurl"]},2002957:{video:["2002957","新浪拍客","video","object.summary","","播放","feed_list_third_rend"]},2003022:{webpage:["2003022","小度i耳目","webpage","object.summary","","马上看看","fl_jumpurl"]},2003156:{video:["2003156","微录客主域","video","object.summary","","播放","feed_list_third_rend"]},2003205:{video:["2003205","56通用","video","object.summary","","播放","feed_list_third_rend"]},2003234:{video:["2003234","乐视","video","object.summary","","播放","feed_list_third_rend"]},2003338:{video:["2003338","腾讯视频","video","object.summary","","播放","feed_list_third_rend"],webpage:["2003338","微信文章腾讯主域","webpage","object.summary","","文章详情","fl_objjumpurl"]},2003385:{webpage:["2003385","赶集网","webpage","object.summary","","查看详情","fl_objjumpurl"]},2003420:{video:["2003420","小影视频","video","object.summary","","播放","feed_list_third_rend"]},2003475:{video:["2003475","第一视频","video","object.summary","","播放","feed_list_third_rend"]},2003491:{recruit:["2003491","大街网","recruit","object.first_desc","object.second_desc","职位详情","fl_objjumpurl"]},2003498:{webpage:["2003498","雪球主站","webpage","object.summary","","文章详情","fl_objjumpurl"]},2003557:{app:["2003557","豌豆荚应用","app","object.summary","","应用详情","fl_objjumpurl"],article:["2003557","豌豆荚文章","article","object.summary","","文章详情","fl_objjumpurl"]},2003633:{video:["2003633","迅雷看看","video","object.summary","","播放","feed_list_third_rend"]},2003824:{video:["2003824","玩拍","video","object.summary","","播放","feed_list_third_rend"]},2003855:{audio:["2003855","京东数字音乐","audio","object.author.display_name","object.summary","试听","feed_list_third_rend"]},2004091:{video:["2004091","土豆","video","object.summary","","播放","feed_list_third_rend"]},2004266:{video:["2004266","爆米花视频","video","object.summary","","播放","feed_list_third_rend"]},2004363:{video:["2004363","华尔街日报","video","object.summary","","播放","feed_list_third_rend"]},2005600:{webpage:["2005600","果壳网","webpage","object.summary","","文章详情","fl_objjumpurl"]},2006934:{video:["2006934","爱拍猎游","video","object.summary","","播放","feed_list_third_rend"]},2006935:{video:["2006935","风云直播","video","object.summary","","播放","feed_list_third_rend"]},2007632:{audio:["2007632","看见音乐","audio","object.author.display_name","","试听","feed_list_third_rend"]},2008047:{webpage:["2008047","知乎1","webpage","object.summary","","查看详情","fl_objjumpurl"]},2008661:{webpage:["2008661","今日头条","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2008794:{audio:["2008794","虾米音乐","audio","object.author.display_name","","试听","feed_list_third_rend"]},2008804:{video:["2008804","唱吧视频","video","object.display_name","","播放","feed_list_third_rend"]},2009065:{webpage:["2009065","58同城","webpage","object.summary","","查看详情","fl_objjumpurl"]},2009488:{article:["2009488","喜结网","article","object.author.display_name","","文章详情","fl_objjumpurl"]},2009551:{webpage:["2009551","图钉图片","webpage","object.summary","","图片详情","fl_objjumpurl"]},2009734:{video:["2009734","图钉视频","video","object.summary","","播放","feed_list_third_rend"]},2009873:{audio:["2009873","咪咕音乐","audio","object.author.display_name","","试听","feed_list_third_rend"]},2009875:{video:["2009875","暴风影音","video","object.summary","","播放","feed_list_third_rend"]},2010015:{video:["2010015","拍酷","video","object.author.display_name","","播放","feed_list_third_rend"]},2010222:{article:["2010222","游戏葡萄","article","object.author.display_name","object.summary","文章详情","fl_objjumpurl"]},2010772:{webpage:["2010772","知乎2","webpage","object.summary","","查看详情","fl_objjumpurl"]},2010809:{audio:["2010809","荔枝fm","audio","object.summary","","收听","feed_list_third_rend"]},2010835:{webpage:["2010835","搜房网","webpage","object.summary","","文章详情","fl_objjumpurl"]},2010861:{audio:["2010861","天天动听","audio","object.author.display_name","","试听","feed_list_third_rend"]},2012100:{webpage:["2012100","NextCar","webpage","object.summary","发布时间:|object. create_at","文章详情","fl_objjumpurl"]},2012186:{webpage:["2012186","52活宝网","webpage","object.summary","","文章详情","fl_objjumpurl"]},2012199:{article:["2012199","中舞网","article","object.author.display_name","object.summary","文章详情","fl_objjumpurl"],video:["2012199","中舞网视频","video","object.summary","object.author.display_name","视频详情","fl_objjumpurl"]},2012231:{webpage:["2012231","婚礼时光","webpage","object.summary","","查看详情","fl_objjumpurl"]},2012449:{audio:["2012449","蜻蜓FM","audio","object.summary","","播放","feed_list_third_rend"]},2012571:{video:["2012571","人民网","video","object.custom_data.source","","播放","feed_list_third_rend"]},2012616:{webpage:["2012616","金融界","webpage","object.summary","","文章详情","fl_objjumpurl"]},2012676:{video:["2012676","芒果TV","video","object.summary","","播放","feed_list_third_rend"]},2013350:{audio:["2013350","看见音乐","audio","object.author.display_name","","试听","feed_list_third_rend"]},2013614:{video:["2013614","啊噜哈","video","object.summary","","播放","feed_list_third_rend"]},2014131:{video:["2014131","美拍","video","object.summary","","播放","feed_list_third_rend"]},2014325:{product:["2014325","乐影客","product","object.summary","","查看详情","fl_objjumpurl"],webpage:["2014325","乐影客","webpage","object.summary","","马上购买","fl_objjumpurl"]},2014563:{audio:["2014563","多米1","audio","object.author.display_name","","试听","feed_list_third_rend"]},2014565:{audio:["2014565","多米2","audio","object.author.display_name","","试听","feed_list_third_rend"]},2014763:{product:["2014763","微卖","product","object.summary","object.custom_data.summary","立即购买","fl_objjumpurl"]},2014765:{product:["2014765","尽在电商","product","object.summary","","立即购买","fl_objjumpurl"]},2015199:{product:["2015199","乐童音乐","product","object.summary","","","fl_objjumpurl"]},2015216:{article:["2015216","一点资讯","article","object.summary","","文章详情","fl_objjumpurl"]},2015217:{article:["2015217","校园文章","article","object.summary","","文章详情","fl_objjumpurl"]},2016141:{video:["2016141","微视","video","object.summary","","播放","feed_list_third_rend"]},2016339:{video:["2016339","哔哩哔哩","video","object.summary","","播放","feed_list_third_rend"]},2016361:{game:["2016361","微博踢球游戏","game","object.summary","","马上玩","feed_list_third_rend"]},2016475:{video:["2016475","哔哩哔哩","video","object.summary","","播放","feed_list_third_rend"]},2016757:{webpage:["2016757","林兴测试专用","webpage","object.summary","","马上看看","fl_objjumpurl"]},2016781:{video:["2016781","acfun","video","UP主：|object.author.display_name","","播放","feed_list_third_rend"]},2017037:{video:["2017037","趣拍","video","object.summary","","播放","feed_list_third_rend"]},2017105:{video:["2017105","魔方英语","video","object.summary","","播放","feed_list_third_rend"]},2000009014:{audio:["2000009014","网易云音乐","audio","object.author.display_name","","试听","feed_list_third_rend"]},2000009016:{webpage:["2000009016","网易新闻","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2000108001:{webpage:["2000108001","好愿网","webpage","object.author.display_name","","查看详情","fl_objjumpurl"]},2001137008:{webpage:["2001137008","新东方留学","webpage","object.summary","","文章详情","fl_objjumpurl"]},2002846001:{webpage:["2002846001","新浪新闻001","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846002:{webpage:["2002846002","新浪新闻002","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846005:{webpage:["2002846005","新浪新闻005","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846006:{webpage:["2002846006","新浪新闻06","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846007:{webpage:["2002846007","新浪新闻007","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846008:{webpage:["2002846008","新浪新闻008","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846009:{webpage:["2002846009","新浪新闻009","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846011:{webpage:["2002846011","新浪新闻011","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846012:{webpage:["2002846012","新浪新闻012","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846015:{webpage:["2002846015","新浪新闻015","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846018:{webpage:["2002846018","新门户新闻018","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846019:{webpage:["2002846019","新门户新闻019","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846020:{webpage:["2002846020","新门户新闻020","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846021:{webpage:["2002846021","新增门户新闻021","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846022:{webpage:["2002846022","新浪新闻022","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846023:{webpage:["2002846023","新浪新闻023","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846026:{webpage:["2002846026","新浪新闻026","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846032:{webpage:["2002846032","新浪新闻032","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846035:{webpage:["2002846035","新浪新闻035","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846036:{webpage:["2002846036","新浪新闻036","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846037:{webpage:["2002846037","新浪新闻037","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846038:{webpage:["2002846038","新浪新闻038","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846039:{webpage:["2002846039","新浪新闻039","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002846040:{webpage:["2002846040","新门户新闻","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2002957002:{video:["2002957002","新浪拍客","video","object.summary","","播放","feed_list_third_rend"]},2003205001:{video:["2003205001","56通用","video","object.summary","","播放视频","feed_list_third_rend"]},2003205002:{video:["2003205002","56z","video","object.summary","","播放视频","feed_list_third_rend"]},2003205003:{video:["2003205003","563g","video","object.summary","","播放视频","feed_list_third_rend"]},2003205004:{video:["2003205004","56m","video","object.summary","","播放","feed_list_third_rend"]},2003234001:{video:["2003234001","乐视","video","object.summary","","播放","feed_list_third_rend"]},2003338004:{webpage:["2003338004","微信文章","webpage","object.summary","","文章详情","fl_objjumpurl"]},2003475012:{video:["2003475012","第一视频","video","object.summary","","播放","feed_list_third_rend"]},2003491001:{recruit:["2003491001","大街网","recruit","object.first_desc","object.second_desc","职位详情","fl_objjumpurl"]},2003498001:{webpage:["2003498001","雪球001","webpage","object.summary","","新闻详情","fl_objjumpurl"]},2003633003:{video:["2003633003","迅雷看看","video","object.summary","","播放","feed_list_third_rend"]},2003824002:{video:["2003824002","玩拍2","video","object.summary","","播放","feed_list_third_rend"]},2003855002:{audio:["2003855002","京东数字音乐","audio","object.author.display_name","object.summary","试听","feed_list_third_rend"]},2004266001:{video:["2004266001","爆米花视频","video","object.summary","","播放","feed_list_third_rend"]},2006934001:{video:["2006934001","爱拍猎游","video","object.summary","","播放","feed_list_third_rend"]},2006935001:{video:["2006935001","风云直播","video","object.summary","","播放","feed_list_third_rend"]},2007632001:{audio:["2007632001","看见音乐","audio","object.author.display_name","","试听","feed_list_third_rend"]},2010835001:{webpage:["2010835001","租房帮","webpage","object.summary","","查看详情","fl_objjumpurl"]}},biz:{100127:["100127","微公益","event","object.summary","","参与捐助","fl_objjumpurl"],100404:["100404","应用page","app","object.summary","object.author.display_name","点击下载","fl_objjumpurl"],230331:["230331","砍价团","product","object.summary","","去砍价","fl_objjumpurl"],230348:["230348","阿桃充值","product","object.summary","object.custom_data.summary","购买","fl_jumpurl"],230362:["230362","粉丝俱乐部","event","object.summary","","去送花","thrid_rend_iframe"],230365:["230365","优物库","product","object.summary","object.custom_data.summary","购买","fl_jumpurl"],230370:["230370","粉丝俱乐部榜单","event","object.summary","","看榜单","fl_objjumpurl"],230371:["230371","粉丝俱乐部首页","event","object.summary","","去查看","fl_objjumpurl"],230378:["230378","微博头条","article","object.summary","","文章详情","fl_objjumpurl"]}}}),a("A2",function(){return["<!-- Card模板，请使用STK的easyTemplate构建 -->","<#et Card display>",'<#if (display.type == "common")>','<#if (display.style == "article")>','<div class="WBIM_messageCard S_bg5 S_line1" data-im="card.article.show" data-im-param="id=${display.id}&url=${display.enUrl}" data-im-card-id="${display.id}">','<#elseif (display.style == "adFeedVideo")>','<div class="WBIM_messageCard S_bg5 S_line1" data-im="card.video.show" data-im-param="url=${display.enShort}&id=${display.id}" data-im-card-id="${display.id}" style="height:152px">',"<#else>",'<div class="WBIM_messageCard S_bg5 S_line1" data-im="card.show" data-im-param="url=${display.enUrl}" data-im-card-id="${display.id}" style="${display.style == "adFeedEvent" ? "height:auto;background-color:white" : ""}">',"</#if>",'<div class="S_bg4 clearfix">','<div class="mesCard_pic S_bg1" style="${display.style == "adFeedVideo" ? "width:268px;height:152px" : ""}${display.style == "adFeedEvent" ? "width:268px;height:120px" : ""}">','<a href="${display.style == "article" ? "javascript:void(0);" : display.url}" target="_blank" >','<img src="${display.pic}" title="${display.name}" alt="${display.name}" style="${display.style == "adFeedVideo" ? "width:268px" : ""}${display.style == "adFeedEvent" ? "width:268px;height:120px" : ""}">',"</a>",'<#if (display.style == "audio")>','<span class="WBIM_icon_playmusic" data-im="card.audio.btn" data-im-param="id=${display.id}&class1=WBIM_icon_playmusic&class2=WBIM_icon_playmusic_pause"></span>','<#elseif (display.style == "video" || display.style == "adFeedVideo")>','<span class="WBIM_icon_playvideo" data-im="card.video.show" data-im-param="url=${display.enShort}&id=${display.id}"></span>',"</#if>","</div>",'<#if (display.style != "adFeedVideo")>','<div class="mesCard_info" style="${display.style == "adFeedEvent" ? "width:auto;height:auto;padding:5px" : ""}">','<div class="mesCard_cont">','<h4 class="mesCard_tit W_autocut">','<a class="S_func1 W_autocut" href="${display.style == "article" ? "javascript:void(0);" : display.url}" target="_blank">${(display.style == "taobao" || display.style == "tmall") ? "宝贝详情" : display.name}</a>',"</h4>",'<#if (display.style == "taobao" || display.style == "tmall")>','<div class="mesCard_row W_autocut">','<span class="S_txt2">宝贝：<a href="javascript:void(0);">${display.name}</a></span>',"</div>",'<div class="mesCard_row W_autocut">','<span class="S_txt2">分类：${display.category}</span>',"</div>","<#elseif (display.multi)>",'<div class="mesCard_row W_autocut">','<span class="S_txt2" data-im-type="card_desc1">${display.desc1}</span>',"</div>",'<div class="mesCard_row W_autocut">','<span class="S_txt2" data-im-type="card_desc2">${display.desc2}</span>',"</div>","<#else>",'<div class="mesCard_brieftxt">','<span class="S_txt2" data-im-type="card_desc">${display.desc}</span>',"</div>","</#if>",'<#if (display.style != "adFeedEvent")>','<div class="mesCard_clearfix clearfix S_txt3">','<span class="W_fr">','<#if (display.style == "taobao" || display.style == "tmall")>','<a class="WBIM_btn_a" href="${display.url}" target="_blank">',"<span>去购买</span>","</a>","<#elseif (display.button)>",'<#if (display.style == "video" || display.style == "adFeedVideo")>','<a class="WBIM_btn_a" href="${display.url}" target="_blank"  data-im="card.video.show" data-im-param="url=${display.enShort}&id=${display.id}">','<span data-im-type="card_btn">${display.button}</span>',"</a>",'<#elseif (display.style == "article")>','<a class="WBIM_btn_a" href="${display.url}" target="_blank"  data-im="card.article.show" data-im-param="id=${display.id}&url=${display.enUrl}">','<span data-im-type="card_btn">${display.button}</span>',"</a>","<#else>",'<a class="WBIM_btn_a" href="${display.url}" target="_blank">','<span data-im-type="card_btn">${display.button}</span>',"</a>","</#if>","</#if>",'<a class="WBIM_btn_c" href="javascript:void(0);" data-im="card.like" data-id="${display.id}" data-im-param="id=${display.id}&type=${display.style}&liked=${display.liked}&class1=WBIM_icon_likeb&class2=WBIM_icon_like">',"<span>",'<em class="${display.liked ? "WBIM_icon_likeb" : "WBIM_icon_like"}"></em>','<em class="S_link1" style="display:${display.like_count == 0 ? "none" : ""}">${display.like_count}</em>',"</span>","</a>","</span>","</div>","</#if>","</div>","</div>","</#if>","</div>","</div>",'<#elseif (display.type == "news")>','<#if (display.style == "simple" || display.style == "vote")>','<a href="${display.url}" target="_blank">','<img src="${display.pic}" title="${display.name}" alt="${display.name}" style="${display.style == "vote" ? "width:100%" : ""}"/>',"</a>",'<#elseif (display.style == "collection")>','<div class="WBIM_messageCard S_bg5 S_line1">','<div class="S_bg4 clearfix">','<div class="mesCard_pic S_bg1">','<a href="${display.style == "article" ? "javascript:void(0);" : display.url}" target="_blank" >','<img src="${display.pic}" title="${display.name}" alt="${display.name}">',"</a>","</div>",'<div class="mesCard_info">','<div class="mesCard_cont">',"<#list display.items as item>",'<div class="mesCard_row W_autocut">','<span class="S_link1 W_dot">█</span>','<span class="S_txt2">','<a href="${item.url}" target="_blank">${item.name}</a>',"</span>","</div>","</#list>","</div>","</div>","</div>","</div>","</#if>",'<#elseif (display.type == "collection")>','<div class="cardlist">',"<ul>",'<li class="headlines" data-im="card.','" data-im-param="id=${display.id}&url=${display.enUrl}">','<div class="hl_img">','<img src="${display.pic}" alt="${display.name}">',"</div>",'<div class="hl_title_bg"></div>','<div class="hl_title">','<a href="${display.url}" target="_blank" data-im="card.article.show" data-im-param="id=${display.id}&url=${display.enUrl}" >',"<span>${display.name}</span>","</a>","</div>","</li>","<#list display.items as item>",'<li data-im="card.article.show" data-im-param="id=${item.id}&url=${item.enUrl}">','<div class="cl_wrap">','<span class="cl_img W_fl">','<img src="${item.pic}" alt="${item.name}" />',"</span>",'<div class="cl_txt">','<a href="${item.url}" target="_blank" class="cl_title"  data-im="card.article.show" data-im-param="id=${item.id}&url=${item.enUrl}">${item.name}</a>',"</div>","</div>","</li>","</#list>","</ul>","</div>",'<#elseif (display.type == "im_invite")>','<div class="WBIM_messageCard S_bg5 S_line1">','<div class="S_bg4 clearfix">','<div class="mesCard_pic S_bg1">','<a href="javascript:void(0);">','<img src="${display.pic}" title="${display.style == "attention" ? "关注邀请" : "游戏邀请"}" alt="${display.style == "attention" ? "关注邀请" : "游戏邀请"}">',"</a>","</div>",'<div class="mesCard_info">','<div class="mesCard_cont">','<h4 class="mesCard_tit W_autocut">','<a href="javascript:void(0);" class="S_func1">${display.style == "attention" ? "关注邀请" : "游戏邀请"}</a>',"</h4>",'<#if (display.style == "attention")>','<div class="mesCard_brieftxt">','<a href="http://weibo.com/u/${display.uid}" target="_blank">${display.nick}</a>','<span class="S_txt2">邀请您关注他。</span>',"</div>",'<#elseif (display.style == "game")>','<div class="mesCard_brieftxt">','<a href="http://weibo.com/u/${display.uid}" target="_blank">${display.nick}</a>','<span class="S_txt2">在</span>','<a href="${display.invite_url}">${display.app_name}</a>','<span class="S_txt2">中给您发送了一个游戏邀请。</span>',"</div>","</#if>",'<div class="mesCard_clearfix clearfix S_txt3">','<span class="W_fr">','<#if (display.style == "attention")>',"<#if (display.status == 0)>",'<span class="WBIM_btn_b" data-im="invite.response" data-im-param="id=${display.mid}&class1=WBIM_btn_b&class2=WBIM_btn_c">',"<span>",'<em class="W_ico12 wbim_icon_addone"></em>','<em class="wbim_vline">|</em>','<em class="wbim_icon_addicon">+</em>',"<em>关注</em>","</span>","</span>",'<span class="WBIM_btn_c" style="display:none">',"<span>",'<em class="W_ico12 wbim_icon_addtwo"></em>',"<em>互相关注</em>","</span>","</span>","<#else>",'<span class="WBIM_btn_c">',"<span>",'<em class="W_ico12 wbim_icon_addtwo"></em>',"<em>互相关注</em>","</span>","</span>","</#if>",'<#elseif (display.style == "game")>','<a href="${display.invite_url}" target="_blank" class="WBIM_btn_b">',"<span>接收邀请</span>","</a>","</#if>","</span>","</div>","</div>","</div>","</div>","</div>",'<#elseif (display.type == "priMessage")>','<div class="WBIM_messageCard WBIM_messageCard_transaction">','<div class="mesCard_transaction" data-im="card.pri.click" data-im-param="url=${display.target_url}">','<p class="dia_line"></p>','<div class="transaction_bd">','<div class="hd clearfix">','<div class="hd_left">','<h3 class="title">${display.display_name}</h3>','<p class="data">${display.create_at}</p>',"</div>",'<div class="hd_right">','<span class="small_logo"></span>',"</div>","</div>",'<div class="cont">','<p class="page">',"<p>${display.content}</p>",'<p class="remarks">',"${display.note}","</p>","</p>","</div>",'<div class="more">','<a href="${display.target_url}" target="_blank">详情<span>&raquo;</span></a>',"</div>","</div>","</div>","</div>","</#if>","</#et>"].join("")}),a("A3",function(){function b(a){var b=[];for(var c in a)b.push(c);return b}function a(a,b){var e=d[null===a||a!==a?a:Object.prototype.toString.call(a)]||a&&a.nodeName||"#";return void 0===a?e="Undefined":"#"===e.charAt(0)&&(e=a==a.document&&a.document!=a?"Window":9===a.nodeType?"Document":a.callee?"Arguments":isFinite(a.length)&&a.item?"NodeList":c.toString.call(a).slice(8,-1)),b?b===e:e}var c=Object.prototype,d={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object IXMLDOMNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN","undefined":"Undefined"};return"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList,Null,Undefined".replace(/\w+/gi,function(a){d["[object "+a+"]"]=a}),{is:function(b,c){return a(b,c)},isArray:function(b){return a(b,"Array")},isString:function(b){return a(b,"String")},isFunction:function(b){return a(b,"Function")},isPlainObject:function(b){if(!a(b,"Object")||b.nodeType||a(b,"Window"))return g;try{if(b.constructor&&!c.hasOwnProperty.call(b.constructor.prototype,"isPrototypeOf"))return g}catch(d){return g}return f},isEmptyObject:function(c){return a(c,"Object")&&!b(c).length?f:g}}}),a("A4",function(){var a=navigator.userAgent.toLowerCase();return{IE:/msie/.test(a),OPERA:/opera/.test(a),MOZ:/gecko/.test(a)&&!/(compatible|webkit)/.test(a),IE5:/msie 5/.test(a),IE55:/msie 5\.5/.test(a),IE6:/msie 6/.test(a),IE7:/msie 7/.test(a),IE8:/msie 8/.test(a),IE9:/msie 9/.test(a),IE10:/msie 10/.test(a),SAFARI:!/chrome\/([\d.]*)/.test(a)&&/\/([\da-f.]*) safari/.test(a),CHROME:/chrome\/([\d.]*)/.test(a),IPAD:/\(ipad/i.test(a),IPHONE:/\(iphone/i.test(a),ITOUCH:/\(itouch/i.test(a),MOBILE:/mobile/i.test(a),LIE:/msie [5678]/i.test(a)}}),a("A5",function(){var a={forEach:function(a,b,c){var d,e;if(c)for(d=a.length-1;d>=0;d--)b.call(a,a[d],d);else for(d=0,e=a.length;e>d;d++)b.call(a,a[d],d)},indexOf:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},unique:function(b){for(var c=[],d=0,e=b.length;e>d;d++)a.indexOf(b,b[d])==d&&c.push(b[d]);return c},union:function(b,c){var d=[];return a.forEach(b,function(b){a.indexOf(c,b)>-1&&d.push(b)}),d},remove:function(b,c){return b.splice(a.indexOf(b,c),1)},associate:function(a,b){for(var c={},d=0;d<b.length;d++)c[b[d]]=a[d];return c}};return a}),a("A6",function(){function b(a){var b=a.split(""),c=a;return"1"==b[0]&&"0"==b[7]&&(c=a.substr(0,7)+a.substr(8,a.length)),c}function a(a){var b,c=62,d=0,e=0,f=a.length;for(b=0;f>b;b++)d=a.charCodeAt(b),d-=d>96?87:d>64?29:48,e+=d*Math.pow(c,f-1-b);return e}"use strict";return{decode:function(c){for(var d,e=c.split(""),f=e.length,g=[],h=[];f--;)g.unshift(e[f]),4===g.length&&(h.unshift(a(g.join(""))),g=[]);return g.length&&h.unshift(a(g.join(""))),d=h.join(""),d=b(d)}}}),a("A7",function(){var a=b("A3").isArray,c=b("A5").forEach;return{forEach:function(a,b){for(var c in a)b.call(a,c,a[c])},clone:function(a){var b={};for(var c in a)b[c]=a[c];return b},assign:function(a,b){for(var c in b)a[c]=void 0===b[c]?a[c]:b[c];return a},extend:function(a,b){var c={};for(var d in a)c[d]=void 0===b[d]?a[d]:b[d];return c},toQuery:function(b,d,e,f){function g(a){c(b[a],function(b){h.push(a+e+i(b))})}var h=[],i=d?function(a){return encodeURIComponent(a)}:function(a){return a};e=e||"=",f=f||"&";for(var j in b)"$Null"==j?h.push(b[j]):a(b[j])?g(j):h.push(j+e+i(b[j]));return h.join(f)}}}),a("A8",function(){var a=b("A5"),c=a.associate,d=a.forEach,e=b("A7").toQuery,f={trim:function(a){var b="\\s\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xA0\\x85\\u1680\\u180E\\u2000-\\u200A\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF";return a.replace(RegExp("^["+b+"]+|["+b+"]+$","g"),"")},parseQuery:function(a,b){var c={},e=b?function(a){return decodeURIComponent(a)}:function(a){return a};return d(f.trim(a).split("&"),function(a){var b=a.split("="),d=b[0],f=b[1];b.length<2&&(f=d,d="$Null"),f=e(f),c[d]=c[d]?[].concat(c[d]).concat(f):f}),c},parseURL:function(a,b){var d=/(\w+):\/\/\/?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(\?[^#]*)?(#.*)?/i,g=c(d.exec(a)||[],["url","protocol","hostname","port","path","name","query","hash"]);return g.query=g.query?f.parseQuery(g.query.substring(1),b):{},g.hash=g.hash?f.parseQuery(g.hash.substring(1),b):{},g.getQuery=function(a){return g.query[a]},g.getHash=function(a){return g.hash[a]},g.setQuery=function(a,b){return void 0==b?delete g.query[a]:g.query[a]=b,g},g.setHash=function(a,b){return void 0==b?delete g.hash[a]:g.hash[a]=b,g},g.toUrl=function(a){var b=g.protocol+"://",c=e(g.query,a),d=e(g.hash,a);return"file"===g.protocol.toLowerCase()&&(b+="/"),b+g.hostname+(g.port?":"+g.port:"")+g.path+(g.name||"")+(c?"?"+c:"")+(d?"#"+d:"")},g}};return f}),a("A9",function(){return function(a,b){return d.setTimeout(a,b||0)}}),a("AA",function(){var a=b("A7"),c={set:function(b,c,d){var f,g,h=[],i=a.extend({expire:null,path:"/",domain:null,secure:null,encode:!0},d);i.encode===!0&&(c=escape(c)),h.push(b+"="+c),null!==i.path&&h.push("path="+i.path),null!==i.domain&&h.push("domain="+i.domain),null!==i.secure&&h.push(i.secure),null!==i.expire&&(f=new Date,g=f.getTime()+36e5*i.expire,f.setTime(g),h.push("expires="+f.toGMTString())),e.cookie=h.join(";")},get:function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i"),c=document.cookie+";",d=c.match(b);return d?d[1]||"":""},remove:function(a,b){b=b||{},b.expire=-10,c.set(a,"",b)}};return c}),a("AB",function(){var a,c=b("A5"),f=b("A3"),g=b("A9"),h={isReady:!1,listeners:[],bindListener:function(a){return f.isFunction(a)?(h.isReady?g(a):h.listeners.push(a),!0):!1},ready:function(){h.isReady||(h.isReady=!0,c.forEach(h.listeners,function(a){a()}))}},i=function(){if(!h.isReady){try{e.documentElement.doScroll("left")}catch(a){return void g(i)}h.ready()}};if("complete"===e.readyState&&g(h.ready),e.addEventListener)a=function(){e.removeEventListener("DOMContentLoaded",a,!1),h.ready()},e.addEventListener("DOMContentLoaded",a,!1),d.addEventListener("load",h.ready,!1);else if(d.attachEvent){a=function(){"complete"===e.readyState&&(e.detachEvent("onreadystatechange",a),h.ready())},e.attachEvent("onreadystatechange",a),d.attachEvent("onload",h.ready);var j=!1;try{j=null===d.frameElement}catch(k){}e.documentElement.doScroll&&j&&i()}return function(a){return h.bindListener(a)}}),a("AC",function(){return d.WebSocket||d.MozWebSocket}),a("AD",function(){var a=function(){function x(a){var b=/[\\\"<>\.;]/,c=null!==b.exec(a);return c&&typeof encodeURIComponent!=E?encodeURIComponent(a):a}function w(a,b){if(V){var c=b?"visible":"hidden";T&&r(a)?r(a).style.visibility=c:v("#"+a,"visibility:"+c)}}function v(a,b,c,d){if(!W.ie||!W.mac){var e=M.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(C=null,D=null),!C||D!=f){var g=s("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),C=e.appendChild(g),W.ie&&W.win&&typeof M.styleSheets!=E&&M.styleSheets.length>0&&(C=M.styleSheets[M.styleSheets.length-1]),D=f}W.ie&&W.win?C&&typeof C.addRule==F&&C.addRule(a,b):C&&typeof M.createTextNode!=E&&C.appendChild(M.createTextNode(a+" {"+b+"}"))}}}function u(a){var b=W.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c){a.attachEvent(b,c),S[S.length]=[a,b,c]}function s(a){return M.createElement(a)}function r(a){var b=null;try{b=M.getElementById(a)}catch(c){}return b}function q(a){var b=r(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=r(a);b&&"OBJECT"==b.nodeName&&(W.ie&&W.win?(b.style.display="none",function(){4==b.readyState?q(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a,b,c){var d=s("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a,b,c){var d,e=r(c);if(W.wk&&W.wk<312)return d;if(e)if(typeof a.id==E&&(a.id=c),W.ie&&W.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",R[R.length]=a.id,d=r(a.id)}else{var j=s(F);j.setAttribute("type",I);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&o(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a){var b=s("div");if(W.win&&W.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(F)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a){if(W.ie&&W.win&&4!=a.readyState){var b=s("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(m(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(m(a),a)}function k(a,b,c,d){U=!0,A=d||null,B={success:!1,id:c};var e=r(c);if(e){"OBJECT"==e.nodeName?(y=m(e),z=null):(y=e,z=c),a.id=J,(typeof a.width==E||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==E||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var f=W.ie&&W.win?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+M.title;if(typeof b.flashvars!=E?b.flashvars+="&"+g:b.flashvars=g,W.ie&&W.win&&4!=e.readyState){var h=s("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}n(a,b,c)}}function j(){return!U&&u("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function i(a){var b=null,c=r(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=E)b=c;else{var d=c.getElementsByTagName(F)[0];d&&(b=d)}return b}function h(){var a=Q.length;if(a>0)for(var b=0;a>b;b++){var c=Q[b].id,d=Q[b].callbackFn,e={success:!1,id:c};if(W.pv[0]>0){var f=r(c);if(f)if(!u(Q[b].swfVersion)||W.wk&&W.wk<312)if(Q[b].expressInstall&&j()){var g={};g.data=Q[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var h={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(h[m[o].getAttribute("name")]=m[o].getAttribute("value"));k(g,h,c,d)}else l(f),d&&d(e);else w(c,!0),d&&(e.success=!0,e.ref=i(c),d(e))}else if(w(c,!0),d){var p=i(c);p&&typeof p.SetVariable!=E&&(e.success=!0,e.ref=p),d(e)}}}function g(){var a=M.getElementsByTagName("body")[0],b=s(F);b.setAttribute("type",I);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=E){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),W.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,h()}()}else h()}function f(){O?g():h()}function e(a){if(typeof L.addEventListener!=E)L.addEventListener("load",a,!1);else if(typeof M.addEventListener!=E)M.addEventListener("load",a,!1);else if(typeof L.attachEvent!=E)t(L,"onload",a);else if("function"==typeof L.onload){var b=L.onload;L.onload=function(){b(),a()}}else L.onload=a}function d(a){T?a():P[P.length]=a}function c(){if(!T){try{var a=M.getElementsByTagName("body")[0].appendChild(s("span"));a.parentNode.removeChild(a)}catch(b){return}T=!0;for(var c=P.length,d=0;c>d;d++)P[d]()}}{var y,z,A,B,C,D,E="undefined",F="object",G="Shockwave Flash",H="ShockwaveFlash.ShockwaveFlash",I="application/x-shockwave-flash",J="SWFObjectExprInst",K="onreadystatechange",L=window,M=document,N=navigator,O=!1,P=[f],Q=[],R=[],S=[],T=!1,U=!1,V=!0,W=function(){var a=typeof M.getElementById!=E&&typeof M.getElementsByTagName!=E&&typeof M.createElement!=E,c=N.userAgent.toLowerCase(),d=N.platform.toLowerCase(),e=/win/.test(d?d:c),f=/mac/.test(d?d:c),g=/webkit/.test(c)?parseFloat(c.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,h=b("A4").IE,i=[0,0,0],j=null;if(typeof N.plugins!=E&&typeof N.plugins[G]==F)j=N.plugins[G].description,!j||typeof N.mimeTypes!=E&&N.mimeTypes[I]&&!N.mimeTypes[I].enabledPlugin||(O=!0,h=!1,j=j.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),i[0]=parseInt(j.replace(/^(.*)\..*$/,"$1"),10),i[1]=parseInt(j.replace(/^.*\.(.*)\s.*$/,"$1"),10),i[2]=/[a-zA-Z]/.test(j)?parseInt(j.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L.ActiveXObject!=E)try{var k=new ActiveXObject(H);k&&(j=k.GetVariable("$version"),j&&(h=!0,j=j.split(" ")[1].split(","),i=[parseInt(j[0],10),parseInt(j[1],10),parseInt(j[2],10)]))}catch(l){}return{w3:a,pv:i,wk:g,ie:h,win:e,mac:f}}();!function(){W.w3&&((typeof M.readyState!=E&&"complete"==M.readyState||typeof M.readyState==E&&(M.getElementsByTagName("body")[0]||M.body))&&c(),T||(typeof M.addEventListener!=E&&M.addEventListener("DOMContentLoaded",c,!1),W.ie&&W.win&&(M.attachEvent(K,function(){"complete"==M.readyState&&(M.detachEvent(K,arguments.callee),c())}),L==top&&!function(){if(!T){try{M.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}c()}}()),W.wk&&!function(){return T?void 0:/loaded|complete/.test(M.readyState)?void c():void setTimeout(arguments.callee,0)}(),e(c)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var b=S.length,c=0;b>c;c++)S[c][0].detachEvent(S[c][1],S[c][2]);for(var d=R.length,e=0;d>e;e++)p(R[e]);for(var f in W)W[f]=null;W=null;for(var g in a)a[g]=null;a=null})}()}return{registerObject:function(a,b,c,d){if(W.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,Q[Q.length]=e,w(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return W.w3?i(a):void 0},embedSWF:function(a,b,c,e,f,g,h,i,l,m){var o={success:!1,id:b};W.w3&&!(W.wk&&W.wk<312)&&a&&b&&c&&e&&f?(w(b,!1),d(function(){c+="",e+="";var d={};if(l&&typeof l===F)for(var p in l)d[p]=l[p];d.data=a,d.width=c,d.height=e;var q={};if(i&&typeof i===F)for(var r in i)q[r]=i[r];if(h&&typeof h===F)for(var s in h)typeof q.flashvars!=E?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(u(f)){var t=n(d,q,b);d.id==b&&w(b,!0),o.success=!0,o.ref=t}else{if(g&&j())return d.data=g,void k(d,q,b,m);w(b,!0)}m&&m(o)})):m&&m(o)},switchOffAutoHideShow:function(){V=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:u,createSWF:function(a,b,c){return W.w3?n(a,b,c):void 0},showExpressInstall:function(a,b,c,d){W.w3&&j()&&k(a,b,c,d)},removeSWF:function(a){W.w3&&p(a)},createCSS:function(a,b,c,d){W.w3&&v(a,b,c,d)},addDomLoadEvent:d,addLoadEvent:e,getQueryParamValue:function(a){var b=M.location.search||M.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null===a)return x(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return x(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var a=r(J);a&&y&&(a.parentNode.replaceChild(y,a),z&&(w(z,!0),W.ie&&W.win&&(y.style.display="block")),A&&A(B)),U=!1}}}}();return a}),a("AE",function(){return function(a,b){return a+="",b+="",a.length>b.length?f:a.length<b.length?g:a>b}}),function(){var a=function(){var a={},b="theia";a[b]={IE:/msie/i.test(navigator.userAgent),E:function(a){return"string"==typeof a?document.getElementById(a):a},C:function(a){var b;return a=a.toUpperCase(),b="TEXT"==a?document.createTextNode(""):"BUFFER"==a?document.createDocumentFragment():document.createElement(a)}};var c=a[b];return c.register=function(c,d,e){e&&"string"==typeof e||(e=b),a[e]||(a[e]={});for(var f=a[e],g=c.split("."),h=f,i=null;i=g.shift();)if(g.length)void 0===h[i]&&(h[i]={}),h=h[i];else if(void 0===h[i])try{if(e&&e!==b){if("core.util.listener"===c)return h[i]=a[b].core.util.listener,!0;if("core.util.connect"===c)return h[i]=a[b].core.util.connect,!0}return h[i]=d(f),!0}catch(j){}return!1},c.unRegister=function(c,d){d&&"string"==typeof d||(d=b);for(var e=a[d],f=c.split("."),g=e,h=null;h=f.shift();)if(f.length){if(void 0===g[h])return!1;g=g[h]}else if(void 0!==g[h])return delete g[h],!0;return!1},c.regShort=function(a,b){if(void 0!==c[a])throw"["+a+"] : short : has been register";c[a]=b},c.shortRegister=function(c,d,e){e&&"string"==typeof e||(e=b);var f=a[e],g=c.split(".");if(!d)return!1;if(f[d])return!1;for(var h=f,i=null;i=g.shift();)if(g.length){if(void 0===h[i])return!1;h=h[i]}else if(void 0!==h[i])return f[d]?!1:(f[d]=h[i],!0);return!1},c.getPKG=function(c){return c&&"string"==typeof c||(c=b),a[c]},c}();a.register("core.arr.isArray",function(){return function(a){return"[object Array]"===Object.prototype.toString.call(a)}}),a.register("core.func.getType",function(){return function(a){var b;return("object"==(b=typeof a)?null===a&&"null"||Object.prototype.toString.call(a).slice(8,-1):b).toLowerCase()}}),a.register("core.evt.custEvent",function(a){var b="__custEventKey__",c=1,d={},e=function(a,c){var e="number"==typeof a?a:a[b];return e&&d[e]&&{obj:"string"==typeof c?d[e][c]:d[e],key:e}},f={},g=function(a,b,c,d,f){if(a&&"string"==typeof b&&c){var g=e(a,b);if(!g||!g.obj)throw"custEvent ("+b+") is undefined !";return g.obj.push({fn:c,data:d,once:f}),g.key}},h=function(b,c,d,f){var g=!0,h=function(){g=!1};if(b&&"string"==typeof c){var i,j=e(b,c);if(j&&(i=j.obj)){d="undefined"!=typeof d&&[].concat(d)||[];for(var k=i.length-1;k>-1&&i[k];k--){var l=i[k].fn,m=i[k].once;if(l&&l.apply)try{l.apply(b,[{obj:b,type:c,data:i[k].data,preventDefault:h}].concat(d)),m&&i.splice(k,1)}catch(n){}}return g&&"function"===a.core.func.getType(f)&&f(),j.key}}},i={define:function(a,e){if(a&&e){var f="number"==typeof a?a:a[b]||(a[b]=c++),g=d[f]||(d[f]={});e=[].concat(e);for(var h=0;h<e.length;h++)g[e[h]]||(g[e[h]]=[]);return f}},undefine:function(a,c){if(a){var e="number"==typeof a?a:a[b];if(e&&d[e])if(c){c=[].concat(c);for(var f=0;f<c.length;f++)c[f]in d[e]&&delete d[e][c[f]]}else delete d[e]}},add:function(a,b,c,d){return g(a,b,c,d,!1)},once:function(a,b,c,d){return g(a,b,c,d,!0)},remove:function(b,c,d){if(b){var f,g=e(b,c);if(g&&(f=g.obj)){if(a.core.arr.isArray(f))if(d){for(var h=0;f[h]&&f[h].fn!==d;)h++;f.splice(h,1)}else f.splice(0,f.length);else for(var h in f)f[h]=[];return g.key}}},fire:function(a,b,c,d){return h(a,b,c,d)},hook:function(a,e,g){if(a&&e&&g){var j,k,l=[],m=a[b],n=m&&d[m],o=e[b]||(e[b]=c++);if(n){k=f[m+"_"+o]||(f[m+"_"+o]={});var p=function(a){var b=!0;h(e,k[a.type].type,Array.prototype.slice.apply(arguments,[1,arguments.length]),function(){b=!1}),b&&a.preventDefault()};for(var q in g){var r=g[q];k[q]||(j=n[q])&&(j.push({fn:p,data:void 0}),k[q]={fn:p,type:r},l.push(r))}i.define(e,l)}}},unhook:function(a,c,d){if(a&&c&&d){var e=a[b],g=c[b],h=f[e+"_"+g];if(h)for(var j in d){{d[j]}h[j]&&i.remove(a,j,h[j].fn)}}},destroy:function(){d={},c=1,f={}}};return i}),function(){var b={foreach:"core.arr.foreach",addEvent:"core.evt.addEvent",custEvent:"core.evt.custEvent",removeEvent:"core.evt.removeEvent"};for(var c in b)a.shortRegister(b[c],c,"theia")}(),a.register("core.evt.addEvent",function(a){return function(b,c,d){return b=a.E(b),null===b?!1:"function"!=typeof d?!1:(b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent?b.attachEvent("on"+c,d):b["on"+c]=d,!0)}}),a.register("core.evt.removeEvent",function(a){return function(b,c,d){return b=a.E(b),null===b?!1:"function"!=typeof d?!1:(b.removeEventListener?b.removeEventListener(c,d,!1):b.detachEvent&&b.detachEvent("on"+c,d),b["on"+c]=null,!0)}}),a.register("core.arr.foreach",function(a){var b=function(a,b){for(var c=[],d=0,e=a.length;e>d;d+=1){var f=b(a[d],d);if(f===!1)break;null!==f&&(c[d]=f)}return c},c=function(a,b){var c={};for(var d in a){var e=b(a[d],d);if(e===!1)break;null!==e&&(c[d]=e)}return c};return function(d,e){return a.core.arr.isArray(d)||d.length&&void 0!==d[0]?b(d,e):"object"==typeof d?c(d,e):null}}),window.WBAudio||!function(a){var b={},c=function(a){return b[a]},d=function(e){if(!b[e]){var f={exports:{}};try{a[e].call(f.exports,f,f.exports,d,c)}catch(g){}b[e]=f.exports}return b[e]};return d("a")}({a:function(a,b,c){function f(){var a="http://js.t.sinajs.cn/t5/pack/static/flash/audio.swf",b="__audioFlashInstance__"+o++,c=document.body.appendChild(g.C("div")),e={playerInstance:"window.__audioFlashInstances['"+b+"']"},f={allowscriptaccess:"always",wmode:"transparent"};c.style.cssText=";position:absolute;width:1px;height:1px;top:-10px;left:-10px;",c.innerHTML='<div id="'+b+'"></div>',h.embedSWF(a+"?ts="+((new Date).getTime()+Math.random()),b,"1","1","9.0.0",null,e,f),n[b]=this,this._audio=d(b),this._id=b,this._currentTime=0,this._vol=0,this._seekable=!1,this._playing=!1,this._muted=!1,this._duration=0,this._loadpst=0,this._isready=!1,this._readyfns=[],this._src=""}function e(){this._audio=g.C("audio"),this._audio.autoplay=!1,this._audio.preload="auto",this._audio.autobuffer=!0,this._vol=0,this._currentTime=0,this._duration=0,this._loadpst=0,this._seekable=!1,this._playing=!1,this._muted=!1,this._timer=null,this._isready=!0,this._readyfns=[],this._src="",this._bindEvents()}function d(a){return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}var g=c("A"),h=c("b"),i=c("B"),j=c("c"),k=c("C"),l=g.core.evt.addEvent,m=g.core.evt.removeEvent,n=window.__audioFlashInstances={},o=0;i(e.prototype,k,{isready:function(){return this._isready},ready:function(a){return this.isready()===!0?a&&a():a&&this._readyfns.push(a),this},src:function(){return this._src},load:function(a){return this._reset(),this._audio.setAttribute("src",this._src=a),this._audio.load(),this},play:function(){return this._audio.play(),this},pause:function(){return this._audio.pause(),this},playing:function(){return this._playing},volume:function(a){return arguments.length>0?this._setVolume(a):this._getVolume()},mute:function(a){return arguments.length>0?this._setMute(a):this._getMute()},currentTime:function(a){return arguments.length>0?this._setCurrentTime(a):this._getCurrentTime()},duration:function(){return this._duration},buffered:function(){return this._loadpst},_getVolume:function(){return this._vol},_setVolume:function(a){return this._vol=Math.max(0,Math.min(1,a)),this._muted===!1&&(this._audio.volume=this._vol),this},_getMute:function(){return this._muted},_setMute:function(a){return a=!!a,this._muted=a,this._audio.volume=a?0:this._vol,this.trigger("mute",a),this},_getCurrentTime:function(){return this._currentTime},_setCurrentTime:function(a){return this._audio.currentTime=this._currentTime=a,this.trigger("timeupdate",this._currentTime,this._duration),this},_onLoadStart:function(){this.trigger("loadstart")},_onLoad:function(){(this._seekable=!!(this._audio.seekable&&this._audio.seekable.length>0))&&(this._timer=setInterval(j(this,this._onProgress),250)),this.trigger("load")},_onLoadedMetadata:function(){this.trigger("loadedmetadata")},_onPlay:function(){this._playing=!0,this.trigger("play")},_onPause:function(){this._playing=!1,this.trigger("pause")},_onEnded:function(){this._playing=!1,this.trigger("ended")},_onError:function(a){this._playing=!1,this.trigger("error",[a])},_onTimeUpdate:function(){null!==this._audio.buffered&&this._audio.buffered.length&&this.playing&&(this._currentTime=this._audio.currentTime,this._duration=1/0===this._audio.duration?null:this._audio.duration,this.trigger("timeupdate",[this._currentTime,this._duration]))},_onProgress:function(){null!==this._audio.buffered&&this._audio.buffered.length&&this.trigger("progress",[this._loadpst=parseInt(this._audio.buffered.end(this._audio.buffered.length-1)/this._audio.duration*100,10)])},_onSeeking:function(){this.trigger("seeking")},_onSeeked:function(){this.trigger("seeked")},_clearLoadProgress:function(){return clearInterval(this._timer),this},_reset:function(){return this._clearLoadProgress(),this._seekable=!1,this._playing=!1,this._duration=0,this._currentTime=0,this._loadpst=0,this},_bindEvents:function(){this._onLoadStartBinded=j(this,this._onLoadStart),this._onLoadBinded=j(this,this._onLoad),this._onLoadedMetadataBinded=j(this,this._onLoadedMetadata),this._onPlayBinded=j(this,this._onPlay),this._onPauseBinded=j(this,this._onPause),this._onEndedBinded=j(this,this._onEnded),this._onErrorBinded=j(this,this._onError),this._onTimeUpdateBinded=j(this,this._onTimeUpdate),this._onSeekingBinded=j(this,this._onSeeking),this._onSeekedBinded=j(this,this._onSeeked),l(this._audio,"loadstart",this._onLoadStartBinded),l(this._audio,"canplay",this._onLoadBinded),l(this._audio,"loadedmetadata",this._onLoadedMetadataBinded),l(this._audio,"play",this._onPlayBinded),l(this._audio,"pause",this._onPauseBinded),l(this._audio,"ended",this._onEndedBinded),l(this._audio,"error",this._onErrorBinded),l(this._audio,"timeupdate",this._onTimeUpdateBinded),l(this._audio,"seeking",this._onSeekingBinded),l(this._audio,"seeked",this._onSeekedBinded)},_unbindEvents:function(){m(this._audio,"loadstart",this._onLoadStartBinded),m(this._audio,"canplay",this._onLoadBinded),m(this._audio,"loadedmetadata",this._onLoadedMetadataBinded),m(this._audio,"play",this._onPlayBinded),m(this._audio,"pause",this._onPauseBinded),m(this._audio,"ended",this._onEndedBinded),m(this._audio,"error",this._onErrorBinded),m(this._audio,"timeupdate",this._onTimeUpdateBinded),m(this._audio,"seeking",this._onSeekingBinded),m(this._audio,"seeked",this._onSeekedBinded)}}),i(f.prototype,k,{isready:function(){return this._isready},ready:function(a){return this.isready()===!0?a&&a():a&&this._readyfns.push(a),this},src:function(){return this._src},load:function(a){this._reset(),this._audio.load(this._src=a)},play:function(){return this._audio.pplay(),this},pause:function(){return this._audio.ppause(),this},playing:function(){return this._playing},volume:function(a){return arguments.length>0?this._setVolume(a):this._getVolume()},mute:function(a){return arguments.length>0?this._setMute(a):this._getMute()},currentTime:function(a){return arguments.length>0?this._setCurrentTime(a):this._getCurrentTime()},duration:function(){return this._duration},buffered:function(){return this._loadpst},_getVolume:function(){return this._vol},_setVolume:function(a){return this._vol=Math.max(0,Math.min(1,a)),this._muted===!1&&this._audio.setVolume(this._vol),this},_getCurrentTime:function(){return this._currentTime},_setCurrentTime:function(a){return this._audio.seekTo(this._currentTime=a),this},_getMute:function(){return this._muted},_setMute:function(a){return a=!!a,this._muted=a,this._audio.setVolume(a?0:this._vol),this.trigger("mute",a),this},_reset:function(){return this._seekable=!1,this._playing=!1,this._duration=0,this._currentTime=0,this._loadpst=0,this},eiReady:function(){this._audio=d(this._id),this._isready=!0,this.load(""),g.foreach(this._readyfns,j(this,function(a){a&&a()}))},eiLoadStart:function(){this.trigger("loadstart")},eiLoadedMetadata:function(){this.trigger("loadedmetadata")},eiCanPlay:function(){this.trigger("load")},eiTimeUpdate:function(a,b,c){this._currentTime=a,this._duration=b,this._seekable=c,this.trigger("timeupdate",[a,c?b:0])},eiProgress:function(a){this.trigger("progress",[this._loadpst=a])},eiLoadError:function(a){this._playing=!1,this.trigger("error",[a])},eiPlay:function(){this._playing=!0,this.trigger("play")},eiPause:function(){this._playing=!1,this.trigger("pause")},eiEnded:function(){this._playing=!1,this.trigger("ended")},eiSeeking:function(){this.trigger("seeking")},eiSeeked:function(){this.trigger("seeked")}}),window.WBAudio=a.exports=function(a){return new({HTML5:e,FLASH:f}[a.toUpperCase()])}},A:function(b,c,d,e){b.exports=e("")||a||window.$WBIM||{}},b:function(a){var b=function(){function w(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=D?encodeURIComponent(a):a}function v(a,b){if(U){var c=b?"visible":"hidden";S&&q(a)?q(a).style.visibility=c:u("#"+a,"visibility:"+c)}}function u(a,b,c,d){if(!V.ie||!V.mac){var e=L.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(B=null,C=null),!B||C!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),B=e.appendChild(g),V.ie&&V.win&&typeof L.styleSheets!=D&&L.styleSheets.length>0&&(B=L.styleSheets[L.styleSheets.length-1]),C=f}V.ie&&V.win?B&&typeof B.addRule==E&&B.addRule(a,b):B&&typeof L.createTextNode!=D&&B.appendChild(L.createTextNode(a+" {"+b+"}"))}}}function t(a){var b=V.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function s(a,b,c){a.attachEvent(b,c),R[R.length]=[a,b,c]}function r(a){return L.createElement(a)}function q(a){var b=null;try{b=L.getElementById(a)}catch(c){}return b}function p(a){var b=q(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function o(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(V.ie&&V.win?(b.style.display="none",function(){4==b.readyState?p(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function n(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function m(a,b,c){var d,e=q(c);if(V.wk&&V.wk<312)return d;if(e)if(typeof a.id==D&&(a.id=c),V.ie&&V.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",Q[Q.length]=a.id,d=q(a.id)}else{var j=r(E);j.setAttribute("type",H);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&n(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function l(a){var b=r("div");if(V.win&&V.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(E)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)(1!=d[f].nodeType||"PARAM"!=d[f].nodeName)&&8!=d[f].nodeType&&b.appendChild(d[f].cloneNode(!0))}}return b}function k(a){if(V.ie&&V.win&&4!=a.readyState){var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(l(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(l(a),a)}function j(a,b,c,d){T=!0,z=d||null,A={success:!1,id:c};var e=q(c);if(e){"OBJECT"==e.nodeName?(x=l(e),y=null):(x=e,y=c),a.id=I,(typeof a.width==D||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==D||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var f=V.ie&&V.win?"ActiveX":"PlugIn",g="MMredirectURL="+K.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+L.title;if(typeof b.flashvars!=D?b.flashvars+="&"+g:b.flashvars=g,V.ie&&V.win&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}m(a,b,c)}}function i(){return!T&&t("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function h(a){var b=null,c=q(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=D)b=c;else{var d=c.getElementsByTagName(E)[0];d&&(b=d)}return b}function g(){var a=P.length;if(a>0)for(var b=0;a>b;b++){var c=P[b].id,d=P[b].callbackFn,e={success:!1,id:c};if(V.pv[0]>0){var f=q(c);if(f)if(!t(P[b].swfVersion)||V.wk&&V.wk<312)if(P[b].expressInstall&&i()){var g={};g.data=P[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));j(g,l,c,d)}else k(f),d&&d(e);else v(c,!0),d&&(e.success=!0,e.ref=h(c),d(e))}else if(v(c,!0),d){var p=h(c);p&&typeof p.SetVariable!=D&&(e.success=!0,e.ref=p),d(e)}}}function f(){var a=L.getElementsByTagName("body")[0],b=r(E);b.setAttribute("type",H);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=D){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,g()}()}else g()}function e(){N?f():g()}function d(a){if(typeof K.addEventListener!=D)K.addEventListener("load",a,!1);else if(typeof L.addEventListener!=D)L.addEventListener("load",a,!1);else if(typeof K.attachEvent!=D)s(K,"onload",a);else if("function"==typeof K.onload){var b=K.onload;K.onload=function(){b(),a()}}else K.onload=a}function c(a){S?a():O[O.length]=a}function a(){if(!S){try{var a=L.getElementsByTagName("body")[0].appendChild(r("span"));a.parentNode.removeChild(a)}catch(b){return}S=!0;for(var c=O.length,d=0;c>d;d++)O[d]()}}{var x,y,z,A,B,C,D="undefined",E="object",F="Shockwave Flash",G="ShockwaveFlash.ShockwaveFlash",H="application/x-shockwave-flash",I="SWFObjectExprInst",J="onreadystatechange",K=window,L=document,M=navigator,N=!1,O=[e],P=[],Q=[],R=[],S=!1,T=!1,U=!0,V=function(){var a=typeof L.getElementById!=D&&typeof L.getElementsByTagName!=D&&typeof L.createElement!=D,b=M.userAgent.toLowerCase(),c=M.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof M.plugins!=D&&typeof M.plugins[F]==E)i=M.plugins[F].description,i&&(typeof M.mimeTypes==D||!M.mimeTypes[H]||!!M.mimeTypes[H].enabledPlugin)&&(N=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof K.ActiveXObject!=D)try{var j=new ActiveXObject(G);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();!function(){V.w3&&((typeof L.readyState!=D&&"complete"==L.readyState||typeof L.readyState==D&&(L.getElementsByTagName("body")[0]||L.body))&&a(),S||(typeof L.addEventListener!=D&&L.addEventListener("DOMContentLoaded",a,!1),V.ie&&V.win&&(L.attachEvent(J,function(){"complete"==L.readyState&&(L.detachEvent(J,arguments.callee),a())}),K==top&&function(){if(!S){try{L.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),V.wk&&function(){return S?void 0:/loaded|complete/.test(L.readyState)?void a():void setTimeout(arguments.callee,0)}(),d(a)))}(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var a=R.length,c=0;a>c;c++)R[c][0].detachEvent(R[c][1],R[c][2]);for(var d=Q.length,e=0;d>e;e++)o(Q[e]);for(var f in V)V[f]=null;V=null;for(var g in b)b[g]=null;b=null})}()}return{registerObject:function(a,b,c,d){if(V.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,P[P.length]=e,v(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return V.w3?h(a):void 0},embedSWF:function(a,b,d,e,f,g,h,k,l,n){var o={success:!1,id:b};V.w3&&!(V.wk&&V.wk<312)&&a&&b&&d&&e&&f?(v(b,!1),c(function(){d+="",e+="";var c={};if(l&&typeof l===E)for(var p in l)c[p]=l[p];c.data=a,c.width=d,c.height=e;var q={};if(k&&typeof k===E)for(var r in k)q[r]=k[r];if(h&&typeof h===E)for(var s in h)typeof q.flashvars!=D?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(t(f)){var u=m(c,q,b);c.id==b&&v(b,!0),o.success=!0,o.ref=u}else{if(g&&i())return c.data=g,void j(c,q,b,n);v(b,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){U=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,b,c){return V.w3?m(a,b,c):void 0},showExpressInstall:function(a,b,c,d){V.w3&&i()&&j(a,b,c,d)},removeSWF:function(a){V.w3&&o(a)},createCSS:function(a,b,c,d){V.w3&&u(a,b,c,d)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(a){var b=L.location.search||L.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return w(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return w(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(T){var a=q(I);a&&x&&(a.parentNode.replaceChild(x,a),y&&(v(y,!0),V.ie&&V.win&&(x.style.display="block")),z&&z(A)),T=!1}}}}();a.exports=b},B:function(a){function b(a){for(var b,c=arguments.length,d=1;c>d;){b=arguments[d];for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);d++}return a}a.exports=b},c:function(a){function b(a,b){return function(){return b.apply(a,arguments)}}a.exports=b},C:function(a,b,c){function d(a){f(a,function(){h in a||(a[h]={})})()}var e=c("A"),f=c("c"),g=e.custEvent,h="__EVT__";a.exports={on:function(a,b){return d(this),g.define(this[h],a),g.add(this[h],a,b),this},once:function(a,b){return d(this),g.define(this[h],a),g.once(this[h],a,b),this},off:function(a,b){return d(this),g.remove(this[h],a,b),this},trigger:function(a,b){return d(this),g.fire(this[h],a,b),this}}}})}(),a("AF",function(){var a=b("A3");return function(b,c,d){b&&a.isFunction(d)&&(b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent?b.attachEvent("on"+c,d):b["on"+c]=d)}}),a("B0",function(){var a=Function,b=function(c,d){if(!c)return"";c!==b.template&&(b.template=c,b.aStatement=b.parsing(b.separate(c)));var e=b.aStatement,f=function(a){return a&&(d=a),arguments.callee};return f.toString=function(){return(new a(e[0],e[1]))(d)},f};return b.separate=function(a){var b=/\\'/g,c=a.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(a,c,d,e,f,g,h,i){return c?"{|}"+(d?"-":"+")+e+"{|}":f?"\\'":g?"":h?"'+("+i.replace(b,"'")+")+'":void 0});return c},b.parsing=function(a){var b,c,d,e,f,g,h=["var aRet = [];"];g=a.split(/\{\|\}/);for(var i=/\s/;g.length;)if(d=g.shift())if(f=d.charAt(0),"+"===f||"-"===f)switch(e=d.split(i),e[0]){case"+et":b=e[1],c=e[2],h.push('aRet.push("<!--'+b+' start-->");');break;case"-et":h.push('aRet.push("<!--'+b+' end-->");');break;case"+if":e.splice(0,1),h.push("if"+e.join(" ")+"{");break;case"+elseif":e.splice(0,1),h.push("}else if"+e.join(" ")+"{");break;case"-if":h.push("}");break;case"+else":h.push("}else{");break;case"+list":h.push("if("+e[1]+".constructor === Array){with({i:0,l:"+e[1]+".length,"+e[3]+"_index:0,"+e[3]+":null}){for(i=l;i--;){"+e[3]+"_index=(l-i-1);"+e[3]+"="+e[1]+"["+e[3]+"_index];");break;case"-list":h.push("}}}")}else d="'"+d+"'",h.push("aRet.push("+d+");");return h.push('return aRet.join("");'),[c,h.join("")]},b}),a("B1",function(){return function(a){function o(){function a(a,b,c,d){var f=w;w=v,v=u,u=n(u,e(n(t,n(a,n(b,c))),d)),t=f}var b=p.length;p.push(128);var c=p.length%64;if(c>56){for(var k=0;64-c>k;k++)p.push(0);c=p.length%64}for(var m=0;56-c>m;m++)p.push(0);p=p.concat(d(8*b));for(var o=1732584193,q=4023233417,r=2562383102,s=271733878,t=0,u=0,v=0,w=0,x=0;x<p.length/64;x++){t=o,u=q,v=r,w=s;var y=64*x;a(f(u,v,w),3614090360,j(p,y),7),a(f(u,v,w),3905402710,j(p,y+4),12),a(f(u,v,w),606105819,j(p,y+8),17),a(f(u,v,w),3250441966,j(p,y+12),22),a(f(u,v,w),4118548399,j(p,y+16),7),a(f(u,v,w),1200080426,j(p,y+20),12),a(f(u,v,w),2821735955,j(p,y+24),17),a(f(u,v,w),4249261313,j(p,y+28),22),a(f(u,v,w),1770035416,j(p,y+32),7),a(f(u,v,w),2336552879,j(p,y+36),12),a(f(u,v,w),4294925233,j(p,y+40),17),a(f(u,v,w),2304563134,j(p,y+44),22),a(f(u,v,w),1804603682,j(p,y+48),7),a(f(u,v,w),4254626195,j(p,y+52),12),a(f(u,v,w),2792965006,j(p,y+56),17),a(f(u,v,w),1236535329,j(p,y+60),22),a(g(u,v,w),4129170786,j(p,y+4),5),a(g(u,v,w),3225465664,j(p,y+24),9),a(g(u,v,w),643717713,j(p,y+44),14),a(g(u,v,w),3921069994,j(p,y),20),a(g(u,v,w),3593408605,j(p,y+20),5),a(g(u,v,w),38016083,j(p,y+40),9),a(g(u,v,w),3634488961,j(p,y+60),14),a(g(u,v,w),3889429448,j(p,y+16),20),a(g(u,v,w),568446438,j(p,y+36),5),a(g(u,v,w),3275163606,j(p,y+56),9),a(g(u,v,w),4107603335,j(p,y+12),14),a(g(u,v,w),1163531501,j(p,y+32),20),a(g(u,v,w),2850285829,j(p,y+52),5),a(g(u,v,w),4243563512,j(p,y+8),9),a(g(u,v,w),1735328473,j(p,y+28),14),a(g(u,v,w),2368359562,j(p,y+48),20),a(h(u,v,w),4294588738,j(p,y+20),4),a(h(u,v,w),2272392833,j(p,y+32),11),a(h(u,v,w),1839030562,j(p,y+44),16),a(h(u,v,w),4259657740,j(p,y+56),23),a(h(u,v,w),2763975236,j(p,y+4),4),a(h(u,v,w),1272893353,j(p,y+16),11),a(h(u,v,w),4139469664,j(p,y+28),16),a(h(u,v,w),3200236656,j(p,y+40),23),a(h(u,v,w),681279174,j(p,y+52),4),a(h(u,v,w),3936430074,j(p,y),11),a(h(u,v,w),3572445317,j(p,y+12),16),a(h(u,v,w),76029189,j(p,y+24),23),a(h(u,v,w),3654602809,j(p,y+36),4),a(h(u,v,w),3873151461,j(p,y+48),11),a(h(u,v,w),530742520,j(p,y+60),16),a(h(u,v,w),3299628645,j(p,y+8),23),a(i(u,v,w),4096336452,j(p,y),6),a(i(u,v,w),1126891415,j(p,y+28),10),a(i(u,v,w),2878612391,j(p,y+56),15),a(i(u,v,w),4237533241,j(p,y+20),21),a(i(u,v,w),1700485571,j(p,y+48),6),a(i(u,v,w),2399980690,j(p,y+12),10),a(i(u,v,w),4293915773,j(p,y+40),15),a(i(u,v,w),2240044497,j(p,y+4),21),a(i(u,v,w),1873313359,j(p,y+32),6),a(i(u,v,w),4264355552,j(p,y+60),10),a(i(u,v,w),2734768916,j(p,y+24),15),a(i(u,v,w),1309151649,j(p,y+52),21),a(i(u,v,w),4149444226,j(p,y+16),6),a(i(u,v,w),3174756917,j(p,y+44),10),a(i(u,v,w),718787259,j(p,y+8),15),a(i(u,v,w),3951481745,j(p,y+36),21),o=n(o,t),q=n(q,u),r=n(r,v),s=n(s,w)}return l(s,r,q,o)}function n(a,b){return 4294967295&a+b}function m(a){for(var b=new Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b}function l(){for(var a="",c=0,d=0,e=3;e>=0;e--)d=arguments[e],c=255&d,d>>>=8,c<<=8,c|=255&d,d>>>=8,c<<=8,c|=255&d,d>>>=8,c<<=8,c|=d,a+=b(c);return a}function k(a){for(var b=[],c=0;c<a.length;c++)if(a.charCodeAt(c)<=127)b.push(a.charCodeAt(c));else for(var d=encodeURIComponent(a.charAt(c)).substr(1).split("%"),e=0;e<d.length;e++)b.push(parseInt(d[e],16));return b}function j(a,b){return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}function i(a,b,c){return b^(a|~c)}function h(a,b,c){return a^b^c}function g(a,b,c){return c&a|~c&b}function f(a,b,c){return a&b|~a&c}function e(a,b){return a<<b&4294967295|a>>>32-b}function d(a){for(var b=[],c=0;8>c;c++)b.push(255&a),a>>>=8;return b}function c(a){for(var b=[],c=0;c<a.length;c++)b=b.concat(k(a[c]));return b}function b(a){var b=(a>>>0).toString(16);return"00000000".substr(0,8-b.length)+b}var p=null,q=null;return"string"==typeof a?p=k(a):a.constructor==Array?0===a.length?p=a:"string"==typeof a[0]?p=c(a):"number"==typeof a[0]?p=a:q=typeof a[0]:"undefined"!=typeof ArrayBuffer?a instanceof ArrayBuffer?p=m(new Uint8Array(a)):a instanceof Uint8Array||a instanceof Int8Array?p=m(a):a instanceof Uint32Array||a instanceof Int32Array||a instanceof Uint16Array||a instanceof Int16Array||a instanceof Float32Array||a instanceof Float64Array?p=m(new Uint8Array(a.buffer)):q=typeof a:q=typeof a,o()}}),a("B2",function(){function b(a,b,c,d,e,f){for(var g=0,i=d.length;i>g;g++){var j=d[g];if(j){j=j[a];for(var k=!1;j;){if(j.sizcache===c){k=d[j.sizset];break}if(1===j.nodeType)if(f||(j.sizcache=c,j.sizset=g),"string"!=typeof b){if(j===b){k=!0;break}}else if(h.filter(b,[j]).length>0){k=j;break}j=j[a]}d[g]=k}}}function a(a,b,c,d,e,f){for(var g=0,h=d.length;h>g;g++){var i=d[g];if(i){i=i[a];for(var j=!1;i;){if(i.sizcache===c){j=d[i.sizset];break}if(1!==i.nodeType||f||(i.sizcache=c,i.sizset=g),i.nodeName.toLowerCase()===b){j=i;break}i=i[a]}d[g]=j}}}var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d=0,e=Object.prototype.toString,f=!1,g=!0;[0,0].sort(function(){return g=!1,0});var h=function(a,b,d,f){d=d||[],b=b||document;var g=b;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return d;var k,l,n,o,q,r,s,t,u=[],v=!0,w=h.isXML(b),x=a;do if(c.exec(""),k=c.exec(x),k&&(x=k[3],u.push(k[1]),k[2])){o=k[3];break}while(k);if(u.length>1&&j.exec(a))if(2===u.length&&i.relative[u[0]])l=p(u[0]+u[1],b);else for(l=i.relative[u[0]]?[b]:h(u.shift(),b);u.length;)a=u.shift(),i.relative[a]&&(a+=u.shift()),l=p(a,l);else if(!f&&u.length>1&&9===b.nodeType&&!w&&i.match.ID.test(u[0])&&!i.match.ID.test(u[u.length-1])&&(q=h.find(u.shift(),b,w),b=q.expr?h.filter(q.expr,q.set)[0]:q.set[0]),b)for(q=f?{expr:u.pop(),set:m(f)}:h.find(u.pop(),1!==u.length||"~"!==u[0]&&"+"!==u[0]||!b.parentNode?b:b.parentNode,w),l=q.expr?h.filter(q.expr,q.set):q.set,u.length>0?n=m(l):v=!1;u.length;)r=u.pop(),s=r,i.relative[r]?s=u.pop():r="",null==s&&(s=b),i.relative[r](n,s,w);else n=u=[];if(n||(n=l),n||h.error(r||a),"[object Array]"===e.call(n))if(v)if(b&&1===b.nodeType)for(t=0;null!=n[t];t++)n[t]&&(n[t]===!0||1===n[t].nodeType&&h.contains(b,n[t]))&&d.push(l[t]);else for(t=0;null!=n[t];t++)n[t]&&1===n[t].nodeType&&d.push(l[t]);else d.push.apply(d,n);else m(n,d);return o&&(h(o,g,d,f),h.uniqueSort(d)),d};h.uniqueSort=function(a){if(o&&(f=g,a.sort(o),f))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a},h.matches=function(a,b){return h(a,null,null,b)},h.find=function(a,b,c){var d;if(!a)return[];for(var e=0,f=i.order.length;f>e;e++){var g,h=i.order[e];if(g=i.leftMatch[h].exec(a)){var j=g[1];if(g.splice(1,1),"\\"!==j.substr(j.length-1)&&(g[1]=(g[1]||"").replace(/\\/g,""),d=i.find[h](g,b,c),null!=d)){a=a.replace(i.match[h],"");break}}}return d||(d=b.getElementsByTagName("*")),{set:d,expr:a}},h.filter=function(a,b,c,d){for(var e,f,g=a,j=[],k=b,l=b&&b[0]&&h.isXML(b[0]);a&&b.length;){for(var m in i.filter)if(null!=(e=i.leftMatch[m].exec(a))&&e[2]){var n,o,p=i.filter[m],q=e[1];if(f=!1,e.splice(1,1),"\\"===q.substr(q.length-1))continue;if(k===j&&(j=[]),i.preFilter[m])if(e=i.preFilter[m](e,k,c,j,d,l)){if(e===!0)continue}else f=n=!0;if(e)for(var r=0;null!=(o=k[r]);r++)if(o){n=p(o,e,r,k);var s=d^!!n;c&&null!=n?s?f=!0:k[r]=!1:s&&(j.push(o),f=!0)}if(void 0!==n){if(c||(k=j),a=a.replace(i.match[m],""),!f)return[];break}}if(a===g){if(null!=f)break;h.error(a)}g=a}return k},h.error=function(a){throw"Syntax error, unrecognized expression: "+a};var i={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!/\W/.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f,g=0,i=a.length;i>g;g++)if(f=a[g]){for(;(f=f.previousSibling)&&1!==f.nodeType;);a[g]=e||f&&f.nodeName.toLowerCase()===b?f||!1:f===b}e&&h.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!/\W/.test(b)){for(b=b.toLowerCase();f>e;e++)if(c=a[e]){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}else{for(;f>e;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&h.filter(b,a,!0)}},"":function(c,e,f){var g,h=d++,i=b;"string"!=typeof e||/\W/.test(e)||(e=e.toLowerCase(),g=e,i=a),i("parentNode",e,h,c,g,f)},"~":function(c,e,f){var g,h=d++,i=b;"string"!=typeof e||/\W/.test(e)||(e=e.toLowerCase(),g=e,i=a),i("previousSibling",e,h,c,g,f)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d?[d]:[]}},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=[],d=b.getElementsByName(a[1]),e=0,f=d.length;f>e;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){if(a=" "+a[1].replace(/\\/g,"")+" ",f)return a;for(var g,h=0;null!=(g=b[h]);h++)g&&(e^(g.className&&(" "+g.className+" ").replace(/[\t\n]/g," ").indexOf(a)>=0)?c||d.push(g):c&&(b[h]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}return a[0]=d++,a},ATTR:function(a,b,c,d,e,f){var g=a[1].replace(/\\/g,"");return!f&&i.attrMap[g]&&(a[1]=i.attrMap[g]),"~="===a[2]&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(a,b,d,e,f){if("not"===a[1]){if(!((c.exec(a[3])||"").length>1||/^\w/.test(a[3]))){var g=h.filter(a[3],b,d,!0^f);return d||e.push.apply(e,g),!1}a[3]=h(a[3],null,null,b)}else if(i.match.POS.test(a[0])||i.match.CHILD.test(a[0]))return!0;return a},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&"hidden"!==a.type},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!h(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=i.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return(a.textContent||a.innerText||h.getText([a])||"").indexOf(b[3])>=0;if("not"===e){for(var g=b[3],j=0,k=g.length;k>j;j++)if(g[j]===a)return!1;return!0}h.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var c=b[1],d=a;switch(c){case"only":case"first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===c)return!0;d=a;case"last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case"nth":var e=b[2],f=b[3];if(1===e&&0===f)return!0;var g=b[0],h=a.parentNode;if(h&&(h.sizcache!==g||!a.nodeIndex)){var i=0;for(d=h.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++i);h.sizcache=g}var j=a.nodeIndex-f;return 0===e?0===j:j%e===0&&j/e>=0}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=i.attrHandle[c]?i.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return null==d?"!="===f:"="===f?e===g:"*="===f?e.indexOf(g)>=0:"~="===f?(" "+e+" ").indexOf(g)>=0:g?"!="===f?e!==g:"^="===f?0===e.indexOf(g):"$="===f?e.substr(e.length-g.length)===g:"|="===f?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=i.setFilters[e];return f?f(a,c,b,d):void 0}}};h.selectors=i;var j=i.match.POS,k=function(a,b){return"\\"+(b-0+1)};for(var l in i.match)i.match[l]=new RegExp(i.match[l].source+/(?![^\[]*\])(?![^\(]*\))/.source),i.leftMatch[l]=new RegExp(/(^(?:.|\r|\n)*?)/.source+i.match[l].source.replace(/\\(\d+)/g,k));var m=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(n){m=function(a,b){var c=b||[],d=0;if("[object Array]"===e.call(a))Array.prototype.push.apply(c,a);else if("number"==typeof a.length)for(var f=a.length;f>d;d++)c.push(a[d]);else for(;a[d];d++)c.push(a[d]);return c}}var o;document.documentElement.compareDocumentPosition?o=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a==b&&(f=!0),a.compareDocumentPosition?-1:1;var c=4&a.compareDocumentPosition(b)?-1:a===b?0:1;return 0===c&&(f=!0),c}:"sourceIndex"in document.documentElement?o=function(a,b){if(!a.sourceIndex||!b.sourceIndex)return a==b&&(f=!0),a.sourceIndex?-1:1;var c=a.sourceIndex-b.sourceIndex;return 0===c&&(f=!0),c}:document.createRange&&(o=function(a,b){if(!a.ownerDocument||!b.ownerDocument)return a==b&&(f=!0),a.ownerDocument?-1:1;var c=a.ownerDocument.createRange(),d=b.ownerDocument.createRange();c.setStart(a,0),c.setEnd(a,0),d.setStart(b,0),d.setEnd(b,0);var e=c.compareBoundaryPoints(Range.START_TO_END,d);return 0===e&&(f=!0),e}),h.getText=function(a){for(var b,c="",d=0;a[d];d++)b=a[d],3===b.nodeType||4===b.nodeType?c+=b.nodeValue:8!==b.nodeType&&(c+=h.getText(b.childNodes));return c},function(){var a=document.createElement("div"),b="script"+(new Date).getTime();a.innerHTML="<a name='"+b+"'/>";var c=document.documentElement;c.insertBefore(a,c.firstChild),document.getElementById(b)&&(i.find.ID=function(a,b,c){if("undefined"!=typeof b.getElementById&&!c){var d=b.getElementById(a[1]);return d?d.id===a[1]||"undefined"!=typeof d.getAttributeNode&&d.getAttributeNode("id").nodeValue===a[1]?[d]:void 0:[]}},i.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b}),c.removeChild(a),c=a=null}(),function(){var a=document.createElement("div");a.appendChild(document.createComment("")),a.getElementsByTagName("*").length>0&&(i.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],e=0;c[e];e++)1===c[e].nodeType&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(i.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),document.querySelectorAll&&!function(){var a=h,b=document.createElement("div");if(b.innerHTML="<p class='TEST'></p>",!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){h=function(b,c,d,e){if(c=c||document,!e&&9===c.nodeType&&!h.isXML(c))try{return m(c.querySelectorAll(b),d)}catch(f){}return a(b,c,d,e)};for(var c in a)h[c]=a[c];b=null}}(),function(){var a=document.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&(i.order.splice(1,0,"CLASS"),i.find.CLASS=function(a,b,c){return"undefined"==typeof b.getElementsByClassName||c?void 0:b.getElementsByClassName(a[1])},a=null))}(),h.contains=document.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(a,b){return a!==b&&(a.contains?a.contains(b):!0)},h.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?"HTML"!==b.nodeName:!1};var p=function(a,b){for(var c,d=[],e="",f=b.nodeType?[b]:b;c=i.match.PSEUDO.exec(a);)e+=c[0],a=a.replace(i.match.PSEUDO,"");a=i.relative[a]?a+"*":a;for(var g=0,j=f.length;j>g;g++)h(a,f[g],d);return h.filter(e,d)};return h}),a("B3",function(){return function(a){(a+"").length<13&&(a*=Math.pow(10,13-(a+"").length));var b,c,d,e,f,g,h=(new Date).getTime(),i=new Date(parseInt(a)),j=[(j=i.getHours())<10?"0":"",j].join(""),k=[(k=i.getMinutes())<10?"0":"",k].join("");return ct=h,h=new Date(a),b=h.getFullYear(),c=h.getMonth(),g=h.getDate(),d=i.getFullYear(),e=i.getMonth()+1,f=i.getDate(),a-(new Date(b,0,1)).getTime()>-1?[[e+"月",f+"日"].join(""),[j,k].join(":")].join(" "):[[d+"年",e+"月",f+"日"].join(""),[j,k].join(":")].join(" ")}}),a("B4",function(){var a=function(a){return[].slice.call(a)},c=b("A3").isFunction,d=b("A5").indexOf,e=b("A5").forEach,f=b("A9");return function(){var b,g="pending",h=function(){var a={resolve:[],inject:[],notify:[]};return{add:function(b,c){a[b].push(c)},remove:function(b,c){a[b].splice(d(a[b],c),1)},fire:function(b,c){e(a[b],function(a){!function(a){"notify"==b?a.apply(null,c):f(function(){a.apply(null,c)})}(a)})}}}(),i=function(a,d,e){c(a)&&("resolved"==g?f(function(){a.apply(null,b)}):"pending"==g&&h.add("resolve",a)),c(d)&&("injected"==g?f(function(){d.apply(null,b)}):"pending"==g&&h.add("inject",d)),c(e)&&h.add("notify",e)},j={};return j.all=function(a){return i(a,a),j},j.done=function(a){return i(a),j},j.fail=function(a){return i(null,a),j},j.progress=function(a){return i(null,null,a),j},j.unProgress=function(a){h.remove("notify",a)},j.then=function(a,b,c){return i(a,b,c),j},j.resolve=function(){return"pending"==g&&(g="resolved",b=a(arguments),h.fire("resolve",b)),j},j.inject=function(){return"pending"==g&&(g="injected",b=a(arguments),h.fire("inject",b)),j},j.notify=function(){return h.fire("notify",a(arguments)),j},j.state=function(){return g},j.outer=function(a){return{all:function(b){return j.all(b),a(j),j},done:function(b){return j.done(b),a(j),j},fail:function(b){return j.fail(b),a(j),j},progress:function(b){return j.progress(b),a(j),j},unProgress:function(a){return j.unProgress(a),j},then:function(b,c,d){return j.then(b,c,d),a(j),j}}},j}}),a("B5",function(){var a=b("B4"),c=b("A3");return function(b,d,e,f){var g=new a;return void 0===d&&c.is(b,"Number")&&(d=b,b=function(){return d}),e=e?[].concat(e):[],f=f||null,d=d||0,func=c.isFunction(b)?b:function(){return b},g.outer(function(){setTimeout(function(){g.resolve(func.apply(f,e))},d)})}}),a("B6",function(){function a(a,b,c){var d;h.insertBefore(a,h.firstChild),c&&(d=setTimeout(function(){a.onreadystatechange=null,a.onload=null,a.onerror=null,i(a),a=null,b.inject({error:!0,reson:"timeout"})},c)),f?a.onreadystatechange=function(){("loaded"==a.readyState.toLowerCase()||"complete"==a.readyState.toLowerCase())&&(d&&clearTimeout(d),a.onreadystatechange=null,a.onerror=null,b.resolve())}:a.onload=function(){d&&clearTimeout(d),a.onload=null,a.onerror=null,b.resolve()},a.onerror=function(){d&&clearTimeout(d),i(a),a.onload=null,a.onerror=null,b.inject()}}var c=b("B4"),d=b("A4"),f=d.IE,g=d.IE6||d.IE7,h=e.getElementsByTagName("head")[0],i=function(){return g?function(){var a;return function(b){a||(a=e.createElement("div")),a.append(b),a.innerHTML="",b=null}}():function(a){a&&a.parentNode&&(a.parentNode.removeChild(a),a=null)}}(),j={js:function(b,d){var f=new c,g=d.charset||"UTF-8",h=parseInt(d.timeout)||3e4,i=e.createElement("script");return i.type="text/javascript",i.charset=g,f.outer(function(){f.notify("element",i),a(i,f,h),i.src=b})},css:function(b,d){var f=new c,g=d.charset||"UTF-8",h=parseInt(d.timeout)||3e4,i=e.createElement("link");return i.type="text/css",i.charset=g,i.rel="stylesheet",f.outer(function(){a(i,f,h),i.href=b})},img:function(a,b){var d=new c,e=new Image,f=parseInt(b.timeout)||1e4,g=null;return e.onload=function(){d.resolve(e)},e.onerror=function(){g&&clearTimeout(g),d.inject({error:!0,reson:"load"})},f&&(g=setTimeout(function(){e.onerror=function(){d.inject({error:!0,reson:"timeout"})}},f)),d.outer(function(){e.src=a})}};return function(a,b,c){return j[a]&&j[a](b,c||{})}}),a("B7",function(){var a=b("B4"),c=b("A8").parseURL,f=b("A7").assign,h=b("B6"),i=b("A4"),j=b("A9"),k=i.IE6||i.IE7,l=0,m=function(){return k&&g?function(){var a;return function(b){a||(a=e.createElement("div")),a.appendChild(b),a.innerHTML=""}}():function(a){a&&a.parentNode&&a.parentNode.removeChild(a)}}();return function(b,e,g){var i,k,n=new a,o=g&&g.timeout||1e4,p=c(b);return p.query=f(p.query,e||{}),p.query.callback=p.query.callback||"IM_"+ +(new Date)+l++,p.query.__rnd=+(new Date),d[p.query.callback]=function(a){k&&clearTimeout(k),n.resolve(a),m(i)},k=j(function(){n.inject({reson:"timeout"}),m(i)},o),n.outer(function(){h("js",p.toUrl(),g||{}).progress(function(a,b){"element"==a&&(i=b)})})}}),a("B8",function(){var a=b("B4"),c=b("A5").forEach,d=b("A5").associate,e=b("A3").isFunction;return function(b,f){var g=new a,h=b.slice(0),i=[],j=0,k=function(){j==h.length&&(f&&f.length&&(i=d(i,f)),g.resolve.call(null,i))},l=function(){c(h,function(a,b){a&&e(a.then)?(i[b]=void 0,a.all(function(a){i[b]=a,j++,k()})):(i[b]=a,j++)}),k()};return g.outer(function(){setTimeout(l,0)})}}),a("B9",function(){var a=b("B4"),c=b("A5").associate,d=b("A3").isFunction;return function(b,e,f){var g=new a,h=f?b:b.slice(0),i=[],j=-1,k=function(a){return(k=e&&e.length?function(a){return e[a]}:function(a){return a})(a)},l=function(){j++;var a=h.shift();if(a&&d(a.then))a.all(function(a){g.notify(k(j),a,b),i[j]=a,l()});else if(a)if(d(a)){var f=a(i[j-1],i);f&&d(f.then)?f.all(function(a){g.notify(k(j),a,b),i[j]=a,l()}):(g.notify(k(j),f,b),i[j]=f,l())}else g.notify(k(j),a,b),i[j]=a,l();else e&&e.length&&(i=c(i,e)),g.resolve.call(null,i)};return g.outer(function(){setTimeout(l,0)})}}),a("BA",function(){var a=b("A3"),c=b("A5");return{type:"message",fix:function(b){var d=b.items[0],e=c.associate(d,d.length<=6?t:s);return e.card=e.card&&!a.isEmptyObject(e.card)?e.card:b.ext&&b.ext[0],e.dmIsRemind=b.dm_isRemind,e}}}),a("BB",function(){var a=b("A7");return{type:"unread",fix:function(b){var c={items:{},total:0,lastMid:b.lastmid,dmIsRemind:b.dm_isRemind};return a.forEach(b.items,function(a,b){"total"==a?c.total=b:c.items[a]=b}),c}}}),a("BC",function(){return{type:"chatStatus",fix:function(a){return{status:"chatStates"==a.type?"chat":"pause",uid:a.items[0]+""}}}}),a("BD",function(){return{type:"clear",fix:function(a){return{uid:a.uid}}}}),a("BE",function(){return{type:"synchroniz",fix:function(a){var b=z.parse(a.syncData),c=a.seq;if(/fixed-/.test(c)){var d=c.split("-");b.fixedType=d[1]}if(/ui\./.test(b.type))switch(b.type){case"ui.user.click":b={fixedType:"chatSync",type:"add",data:b.data.uid+""};break;case"ui.closeChatUser":b={fixedType:"chatSync",type:"remove",data:b.data.uid+""};break;case"ui.miniChatWindow":b={fixedType:"chatSync",type:"min"};break;case"ui.realCloseChatWindow":b={fixedType:"chatSync",type:"close"};break;case"ui.changeSendMethod":b={fixedType:"chatSync",type:"send",data:"Ctrl"==b.data.status?"C":"E"}}return b}}}),a("BF",function(){return{type:"presence",fix:function(a){return{uid:a.items[0]+"",status:u[a.items[1]]}}}}),a("C0",function(){return{type:"news",fix:function(a){return a}}}),a("C1",function(){return{type:"user",fix:function(a){var b={};switch(a.type){case"rosterremove":b.act="remove",b.uid=a.uid+"";break;case"rosterupdate":b.act="update",b.user={uid:a.uid+"",nick:a.nick,avatar:a.avatar,status:u[a.status],resource:a.resource,sex:a.sex,group:a.group}}return b}}}),a("C2",function(){return{type:"recent",fix:function(a){var b={};switch(a.type){case"rosterrecentremove":b.act="remove",b.uid=a.uid+""}return b}}}),a("C3",function(){var a=b("A3"),c=b("A5");return{type:"send",fix:function(b){var d=[];return b.ext=b.ext||[],c.forEach(b.items,function(e,f){var g=c.associate(e,e.length<=6?r:s);g.long=!!g.long,g.card=g.card&&!a.isEmptyObject(g.card)?g.card:b.ext[f],d.push(g)}),d}}}),a("C4",function(){return{msg:b("BA"),unreader:b("BB"),chatStates:b("BC"),pauseChat:b("BC"),dmread:b("BD"),synchroniz:b("BE"),presence:b("BF"),broadcast:b("C0"),rosterupdate:b("C1"),rosterremove:b("C1"),rosterrecentremove:b("C2"),msgsync:b("C3")}}),a("C5",function(){return{autoResend:!1,fix:function(a,b,c){var d={cmd:"msg",uid:a,msg:b||""};return c&&2==c.length&&(d.x={att_ids:c,media_type:"1"}),d},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("C6",function(){var a=b("A5");return{autoResend:!1,fix:function(a){return{cmd:"vcard",uid:a}},receive:function(b){return b=a.associate(b.items,y),b.uid+="",b}}}),a("C7",function(){var a=b("A5");return{autoResend:!1,fix:function(){return{cmd:"roster",limit:2e3}},receive:function(b){var c={groups:[],items:[],recents:[]};return a.forEach(b.groups,function(a){c.groups.push(a)}),a.forEach(b.items,function(b){var d=a.associate(b,v);d.uid=d.uid+"",d.status=u[d.status],c.items.push(d)}),a.forEach(b.recents,function(b){var d=a.associate(b,w);d.uid=d.uid+"",d.status=u[d.status],c.recents.push(d)}),c}}}),a("C8",function(){var a=b("A5");return{autoResend:!1,fix:function(){return{cmd:"recents"}},receive:function(b){var c=[];return a.forEach(b.recents,function(b){var d=a.associate(b,w);d.uid=d.uid+"",d.status=u[d.status],c.push(d)}),c}}}),a("C9",function(){return{autoResend:!0,fix:function(){return{cmd:"querypresence"}},receive:function(a){var b=u[a.items[1]];return{status:b}}}}),a("CA",function(){var a=b("A3"),c=b("A5");return{autoResend:!0,fix:function(a,b,c){var d={cmd:"chat_msg_history",uids:a,count:(b||10)+""};return c&&(d.page=parseInt(c)||1),d},receive:function(b){var d=[];return b.ext=b.ext||[],c.forEach(b.items,function(e,f){var g=c.associate(e,e.length<=6?r:s);g.uid+="",g.card=g.card&&!a.isEmptyObject(g.card)?g.card:b.ext[f],d.push(g)}),d}}}),a("CB",function(){var a=b("A5").indexOf;return{autoResend:!0,fix:function(b){var c=a(u,b);return{cmd:"presence",status:c>-1?c:1}},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("CC",function(){return{autoResend:!0,fix:function(a){var b={cmd:"revmsg",uid:a};return b},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("CD",function(){return{autoResend:!0,fix:function(a,b){var c={cmd:"synchroniz",syncData:z.stringify(a),seq:b||""};return c},receive:function(a){return"ret"in a?{success:0===a.ret,errorCode:a.ret}:{success:0===a.rev,errorCode:a.rev}}}}),a("CE",function(){var a={chat:"c",pause:"p"};return{autoResend:!0,fix:function(b,c){var d={cmd:"chatStates",uid:b,states:a[c]||"p"};return d},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("CF",function(){return{autoResend:!0,fix:function(a,b){var c={cmd:"synchroniz",syncData:z.stringify({type:a,data:b||""}),seq:"fixed-chatSync"};return c},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("D0",function(){return{autoResend:!1,fix:function(a){return{cmd:"blockscreate",uid:a}},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("D1",function(){var a=b("A5"),c=["create","delete","query"];return{autoResend:!0,fix:function(b,d){var e=a.indexOf(c,d)>-1?d:"query";return{cmd:"restrict",uid:b,act:e,seq:e}},receive:function(a){var b={};switch(a.seq){case"query":b.restricted=!!a.restricted;break;case"create":case"delete":b.success=0===a.ret,b.errorCode=a.ret}return b}}}),a("D2",function(){var a=b("A5");return{autoResend:!1,fix:function(a,b){var c={cmd:"roster_search",key:a,limit:b||2e3};return c},receive:function(b){var c=[];return a.forEach(b.items,function(b){var d=a.associate(b,x);d.uid+="",d.status=u[d.status],c.push(d)}),c}}}),a("D3",function(){var a={};return{autoResend:!1,fix:function(b){var c=this.subcmd,d={cmd:"usersetting",subcmd:c,seq:c};if("set"==c){b=b||{};for(var e in b)void 0===b[e]?delete a[e]:a[e]=b[e];d.data=z.stringify(a)}return d},receive:function(b){var c={};if("get"==b.seq)try{c=z.parse(b.data),a=c||{}}catch(d){a={}}else"set"==b.seq&&(c={success:"0"==b.result,errorCode:b.result});return c}}}),a("D4",function(){return{autoResend:!1,fix:function(a,b){return{cmd:"statuses_update",content:a,visible:parseInt(b)||0}},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("D5",function(){return{autoResend:!1,fix:function(a,b){return{cmd:"create_comment",id:a,comment:b}},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("D6",function(){return{autoResend:!1,fix:function(a,b,c){return{cmd:"likeupdate",id:a,type:b,act:c}},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("D7",function(){return{autoResend:!1,fix:function(a){return{cmd:"friends_interact",count:parseInt(a)||5}},receive:function(a){for(var b=a.items,c=[],d=0,e=b.length;e>d;d++)c.push({uid:b[d][0],nick:b[d][1]});return c}}}),a("D8",function(){return{autoResend:!1,fix:function(a){return{cmd:"invite_response",inviteid:a,response:1}},receive:function(a){return{success:0===a.ret,errorCode:a.ret}}}}),a("D9",function(){return{autoResend:!0,fix:function(a){return{cmd:"test_notice",data:a}},receive:function(a){return a}}}),a("DA",function(){return{msg:b("C5"),vcard:b("C6"),roster:b("C7"),recents:b("C8"),querypresence:b("C9"),chatMsgHistory:b("CA"),presence:b("CB"),revmsg:b("CC"),synchroniz:b("CD"),chatStates:b("CE"),chatSync:b("CF"),blockscreate:b("D0"),restrict:b("D1"),rosterSearch:b("D2"),usersetting:b("D3"),statusesUpdate:b("D4"),createComment:b("D5"),likeupdate:b("D6"),friendsInteract:b("D7"),inviteResponse:b("D8"),testNotice:b("D9")}}),a("DB",function(){return{SUCCESS:0,NAS_FAIL:1,HANDSHAKE_FAIL:2,CONNECT_FAIL:3,PUBLISH_FAIL:4,PACKET_FAIL:5,SOCKET_FAIL:6,RESPONSE_TIMEOUT:11,HEARTBEAT_TIMEOUT:12}}),a("DC",function(){var a=b("A5").indexOf;return function(){var b=location.href.match(/\/\/(\w*)\./),c=b&&b[1]||"home";return~a(h,c)?"on":"off"}()}),a("DD",function(){var a={im_space:"$WBIM",im_root:"WB_webim",im_class:"WB_webim",im_type:"all",im_gray:"off",im_source:"209678993",im_version:+(new Date),im_cache:!1,im_lang:"",im_test:g,im_test_server:"127.0.0.1",im_test_port:"6789",cometd_level:"info",auto_connect:0,upload_swf_path:"http://service.weibo.com/staticjs/tools/upload.swf",storage_swf_path:"http://js.t.sinajs.cn/t6/webim/swf/sync_storage.swf",audio_swf_path:"http://js.t.sinajs.cn/t6/webim/swf/audio.swf"},c=(b("A3"),b("A7")),e=b("A8"),f=b("AA"),h=c.extend(c.extend(a,d.$IM_CONFIG||{}),e.parseQuery(location.search.substring(1)));return h.uid=function(){var a=unescape(f.get("SUP")),b=a.match(/uid=([0-9]+)&/);return a&&b&&b[1]?b[1]:void 0}(),h.im_gray="on"==h.im_gray?"on":b("DC")||"off",h.im_lang=h.im_lang||d.$CONFIG&&d.$CONFIG.lang||"zh-cn",h.im_test=!!parseInt(h.im_test),d.$IM_CONFIG=h,function(a){return h[a]}}),a("DE",function(){var a=b("A3"),c=b("A9"),e=function(){var b,e;this.registered=function(a,c){b=a,e=c},this.unregistered=function(){b=null,e=null},this._debug=function(){e&&e._debug&&e._debug.apply(e,arguments)},this._mixin=function(){return e._mixin.apply(e,arguments)},this.getConfiguration=function(){return e.getConfiguration()},this.getAdvice=function(){return e.getAdvice()},this.setTimeout=function(a,b){return c(a,b)},this.clearTimeout=function(a){d.clearTimeout(a)},this.convertToMessages=function(b){if(a.isString(b))try{return z.parse(b)}catch(c){throw this._debug("Could not convert to JSON the following string",'"'+b+'"'),c}if(a.isArray(b))return b;if(void 0===b||null===b)return[];if(a.isObject(b))return[b];throw"Conversion Error "+b+", typeof "+typeof b},this.accept=function(){throw"Abstract"},this.getType=function(){return b},this.send=function(){throw"Abstract"},this.reset=function(){this._debug("Transport",b,"reset")},this.abort=function(){this._debug("Transport",b,"aborted")},this.toString=function(){return this.getType()}};return e.derive=function(a){function b(){}return b.prototype=a,new b},e}),a("DF",function(){var a=b("DE"),c=b("A5");return function(){function h(a){if(null!==l)throw"Concurrent metaConnect requests not allowed, request id="+l.id+" not yet completed";var b=++k;this._debug("Transport",this.getType(),"metaConnect send, request",b,"envelope",a);var c={id:b,metaConnect:!0};d.call(this,a,c),l=c}function g(a,d){var f=c.indexOf(m,a);if(f>=0&&m.splice(f,1),n.length>0){var g=n.shift(),h=g[0],i=g[1];if(this._debug("Transport dequeued request",i.id),d)this.getConfiguration().autoBatch&&b.call(this,h),e.call(this,h),this._debug("Transport completed request",a.id,h);else{var j=this;this.setTimeout(function(){j.complete(i,!1,i.metaConnect),h.onFailure(i.xhr,h.messages,"error","Previous request failed")},0)}}}function f(a){var b=a.id;if(this._debug("Transport",this.getType(),"metaConnect complete, request",b),null!==l&&l.id!==b)throw"Longpoll request mismatch, completing request "+b;l=null}function e(a){var b=++k,c={id:b,metaConnect:!1};m.length<this.getConfiguration().maxConnections-1?(m.push(c),d.call(this,a,c)):(this._debug("Transport",this.getType(),"queueing request",b,"envelope",a),n.push([a,c]))}function d(a,b){if(this.transportSend(a,b),b.expired=!1,!a.sync){var c=this.getConfiguration().maxNetworkDelay,d=c;b.metaConnect===!0&&(d+=this.getAdvice().timeout),this._debug("Transport",this.getType(),"waiting at most",d,"ms for the response, maxNetworkDelay",c);var e=this;b.timeout=this.setTimeout(function(){b.expired=!0,b.xhr&&b.xhr.abort();var c="Request "+b.id+" of transport "+e.getType()+" exceeded "+d+" ms max network delay";e._debug(c),e.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,"timeout",c)},d)}}function b(a){for(;n.length>0;){var b=n[0],c=b[0],d=b[1];if(c.url!==a.url||c.sync!==a.sync)break;n.shift(),a.messages=a.messages.concat(c.messages),this._debug("Coalesced",c.messages.length,"messages from request",d.id)}}var i=new a,j=a.derive(i),k=0,l=null,m=[],n=[];return j.complete=function(a,b,c){c?f.call(this,a):g.call(this,a,b)},j.transportSend=function(){throw"Abstract"},j.transportSuccess=function(a,b,c){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!0,b.metaConnect),c&&c.length>0?a.onSuccess(c):a.onFailure(b.xhr,a.messages,"Empty HTTP response"))},j.transportFailure=function(a,b,c,d){b.expired||(this.clearTimeout(b.timeout),this.complete(b,!1,b.metaConnect),a.onFailure(b.xhr,a.messages,c,d))},j.send=function(a,b){b?h.call(this,a):e.call(this,a)},j.abort=function(){i.abort();for(var a=0;a<m.length;++a){var b=m[a];this._debug("Aborting request",b),b.xhr&&b.xhr.abort()}l&&(this._debug("Aborting metaConnect request",l),l.xhr&&l.xhr.abort()),this.reset()},j.reset=function(){i.reset(),l=null,m=[],n=[]},j}}),a("E0",function(){return function(){var a=[],b={};this.getTransportTypes=function(){return a.slice(0)},this.findTransportTypes=function(c,d,e){for(var f=[],g=0;g<a.length;++g){var h=a[g];b[h].accept(c,d,e)===!0&&f.push(h)}return f},this.negotiateTransport=function(c,d,e,f){for(var g=0;g<a.length;++g)for(var h=a[g],i=0;i<c.length;++i)if(h===c[i]){var j=b[h];if(j.accept(d,e,f)===!0)return j}return null},this.add=function(c,d,e){for(var f=!1,g=0;g<a.length;++g)if(a[g]===c){f=!0;break}return f||("number"!=typeof e?a.push(c):a.splice(e,0,c),b[c]=d),!f},this.find=function(c){for(var d=0;d<a.length;++d)if(a[d]===c)return b[c];return null},this.remove=function(c){for(var d=0;d<a.length;++d)if(a[d]===c){a.splice(d,1);var e=b[c];return delete b[c],e}return null},this.clear=function(){a=[],b={}},this.reset=function(){for(var c=0;c<a.length;++c)b[a[c]].reset()}}}),a("E1",function(){var a=b("E0"),c=b("A9"),d=b("A3");return function(b){function bb(a){var b=bo[a[0]];b&&(delete b[a[1]],be._debug("Removed listener",a))}function ba(a,b,c,d){var e=_(b,c);be._debug("Adding listener on",a,"with scope",e.scope,"and callback",e.method);var f={channel:a,scope:e.scope,callback:e.method,listener:d},g=bo[a];g||(g=[],bo[a]=g);var h=g.push(f)-1;return f.id=h,f.handle=[a,h],be._debug("Added listener",f,"for channel",a,"having id =",h),f.handle}function _(a,b){var c={scope:a,method:b};if(f(a))c.scope=void 0,c.method=a;else if(e(b)){if(!a)throw"Invalid scope "+a;if(c.method=a[b],!f(c.method))throw"Invalid callback "+b+" for scope "+a}else if(!f(b))throw"Invalid callback "+b;return c}function $(a){var b=bo[a];if(b)for(var c=0;c<b.length;++c)if(b[c])return!0;return!1}function Z(a){if(a=n(a),void 0!==a&&null!==a){C(a.advice);var b=a.channel;switch(b){case"/meta/handshake":H(a);break;case"/meta/connect":K(a);break;case"/meta/disconnect":N(a);break;case"/meta/subscribe":Q(a);break;case"/meta/unsubscribe":T(a);break;default:X(a)}}}function Y(a,b){W({successful:!1,failure:!0,channel:b.channel,request:b,xhr:a,advice:{reconnect:"none",interval:0}})}function X(a){void 0===a.successful?a.data?q(a.channel,a):be._debug("Unknown message",a):a.successful?(V(a),q("/meta/publish",a)):W(a)}function W(a){V(a),q("/meta/publish",a),q("/meta/unsuccessful",a)}function V(a){var b=bt[a.id];f(b)&&(delete bt[a.id],b.call(be,a))}function U(a,b){S({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:b,xhr:a,advice:{reconnect:"none",interval:0}})}function T(a){a.successful?q("/meta/unsubscribe",a):S(a)}function S(a){q("/meta/unsubscribe",a),q("/meta/unsuccessful",a)}function R(a,b){P({successful:!1,failure:!0,channel:"/meta/subscribe",request:b,xhr:a,advice:{reconnect:"none",interval:0}})}function Q(a){a.successful?q("/meta/subscribe",a):P(a)}function P(a){q("/meta/subscribe",a),q("/meta/unsuccessful",a)}function O(a,b){M({successful:!1,failure:!0,channel:"/meta/disconnect",request:b,xhr:a,advice:{reconnect:"none",interval:0}})}function N(a){a.successful?(D(!1),q("/meta/disconnect",a)):M(a)}function M(a){D(!0),q("/meta/disconnect",a),q("/meta/unsuccessful",a)}function L(a,b){bv=!1,J({successful:!1,failure:!0,channel:"/meta/connect",request:b,xhr:a,advice:{reconnect:"retry",interval:bp}})}function K(a){if(bv=a.successful){q("/meta/connect",a);var b=k()?"none":bs.reconnect;switch(b){case"retry":v(),B();break;case"none":D(!1);break;default:throw"Unrecognized advice action "+b}}else J(a)}function J(a){q("/meta/connect",a),q("/meta/unsuccessful",a);var b=k()?"none":bs.reconnect;switch(b){case"retry":B(),w();break;case"handshake":bh.reset(),v(),F();break;case"none":D(!1);break;default:throw"Unrecognized advice action"+b}}function I(a,b){G({successful:!1,failure:!0,channel:"/meta/handshake",request:b,xhr:a,advice:{reconnect:"retry",interval:bp}})}function H(a){if(a.successful){bk=a.clientId;var b=bh.negotiateTransport(a.supportedConnectionTypes,a.version,bg,bw.url);if(null===b)throw"Could not negotiate transport with server; client "+bh.findTransportTypes(a.version,bg,bw.url)+", server "+a.supportedConnectionTypes;bc!==b&&(be._debug("Transport",bc,"->",b),bc=b),bn=!1,y(),a.reestablish=bu,bu=!0,q("/meta/handshake",a);var c=k()?"none":bs.reconnect;switch(c){case"retry":v(),B();break;case"none":D(!1);break;default:throw"Unrecognized advice action "+c}}else G(a)}function G(a){q("/meta/handshake",a),q("/meta/unsuccessful",a);var b=!k()&&"none"!==bs.reconnect;b?(w(),F()):D(!1)}function F(){j("handshaking"),bn=!0,s(function(){E(bd)})}function E(a){bk=null,i(),k()?(bh.reset(),C(bw.advice)):C(be._mixin(!1,bs,{reconnect:"retry"})),bl=0,bn=!0,bd=a;var b="1.0",c=bh.findTransportTypes(b,bg,bw.url),d={version:b,minimumVersion:"0.9",channel:"/meta/handshake",supportedConnectionTypes:c,advice:{timeout:bs.timeout,interval:bs.interval}},e=be._mixin(!1,{},bd,d);bc=bh.negotiateTransport(c,b,bg,bw.url),be._debug("Initial transport is",bc.getType()),j("handshaking"),be._debug("Handshake sent",e),t(!1,[e],!1,"handshake")}function D(a){r(),a&&bc.abort(),bk=null,j("disconnected"),bl=0,v(),bm.length>0&&(by.call(be,void 0,bm,"error","Disconnected"),bm=[])}function C(a){a&&(bs=be._mixin(!1,{},bw.advice,a),be._debug("New advice",bs))}function B(){j("connecting"),s(function(){A()})}function A(){if(!k()){var a={channel:"/meta/connect",connectionType:bc.getType()};bv||(a.advice={timeout:0}),j("connecting"),be._debug("Connect sent",a),t(!1,[a],!0,"connect"),j("connected")}}function z(){if(--bl,0>bl)throw"Calls to startBatch() and endBatch() are not paired";0!==bl||k()||bn||y()}function y(){var a=bm;bm=[],a.length>0&&t(!1,a,!1)}function x(){++bl}function w(){bp<bw.maxBackoff&&(bp+=bw.backoffIncrement)}function v(){bp=0}function u(a){bl>0||bn===!0?bm.push(a):t(!1,[a],!1)}function t(a,b,c,d){for(var e=0;e<b.length;++e){var g=b[e];g.id=""+l(),bk&&(g.clientId=bk);var h;f(g._callback)&&(h=g._callback,delete g._callback),g=o(g),void 0!==g&&null!==g?(b[e]=g,h&&(bt[g.id]=h)):b.splice(e--,1)}if(0!==b.length){var i=bw.url;bw.appendMessageTypeToURL&&(i.match(/\/$/)||(i+="/"),d&&(i+=d));var j={url:i,sync:a,messages:b,onSuccess:function(a){try{bx.call(be,a)}catch(b){be._debug("Exception during handling of messages",b)}},onFailure:function(a,b,c,d){try{by.call(be,a,b,c,d)}catch(e){be._debug("Exception during handling of failure",e)}}};be._debug("Send",j),bc.send(j,c)}}function s(a){r();var b=bs.interval+bp;be._debug("Function scheduled in",b,"ms, interval =",bs.interval,"backoff =",bp,a),bq=c(a,b)}function r(){null!==bq&&window.clearTimeout(bq),bq=null}function q(a,b){p(a,b);for(var c=a.split("/"),d=c.length-1,e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&p(f,b),f+="*",p(f,b)}}function p(a,b){var c=bo[a];if(c&&c.length>0)for(var d=0;d<c.length;++d){var e=c[d];if(e)try{e.callback.call(e.scope,b)}catch(g){be._debug("Exception during notification",e,b,g);var h=be.onListenerException;if(f(h)){be._debug("Invoking listener exception callback",e,g);try{h.call(be,g,e.handle,e.listener,b)}catch(i){be._info("Exception during execution of listener callback",e,i)}}}}}function o(a){for(var b=0;b<br.length&&void 0!==a&&null!==a;++b){var c=br[b],d=c.extension.outgoing;if(f(d)){var e=m(c.extension,d,c.name,a,!0);a=void 0===e?a:e}}return a}function n(a){for(var b=0;b<br.length&&void 0!==a&&null!==a;++b){var c=bw.reverseIncomingExtensions?br.length-1-b:b,d=br[c],e=d.extension.incoming;if(f(e)){var g=m(d.extension,e,d.name,a,!1);a=void 0===g?a:g}}return a}function m(a,b,c,d,e){try{return b.call(a,d)}catch(g){be._debug("Exception during execution of extension",c,g);var h=be.onExtensionException;if(f(h)){be._debug("Invoking extension exception callback",c,g);try{h.call(be,g,c,e,d)}catch(i){be._info("Exception during execution of exception callback in extension",c,i)}}return d}}function l(){return++bj}function k(){return"disconnecting"===bi||"disconnected"===bi}function j(a){bi!==a&&(be._debug("Status",bi,"->",a),bi=a)}function i(){for(var a in bo)for(var b=bo[a],c=0;c<b.length;++c){var d=b[c];d&&!d.listener&&(delete b[c],be._debug("Removed subscription",d,"for channel",a))}}function h(a){if(be._debug("Configuring cometd object with",a),e(a)&&(a={url:a}),a||(a={}),bw=be._mixin(!1,bw,a),!bw.url)throw"Missing required configuration parameter 'url' specifying the Bayeux server URL";var b=/(^https?:\/\/)?(((\[[^\]]+\])|([^:\/\?#]+))(:(\d+))?)?([^\?#]*)(.*)?/.exec(bw.url),c=b[2],d=b[8],f=b[9];if(bg=be._isCrossDomain(c),bw.appendMessageTypeToURL)if(void 0!==f&&f.length>0)be._info("Appending message type to URI "+d+f+" is not supported, disabling 'appendMessageTypeToURL' configuration"),bw.appendMessageTypeToURL=!1;else{var g=d.split("/"),h=g.length-1;d.match(/\/$/)&&(h-=1),g[h].indexOf(".")>=0&&(be._info("Appending message type to URI "+d+" is not supported, disabling 'appendMessageTypeToURL' configuration"),bw.appendMessageTypeToURL=!1)}}function g(a,b){if(window.console){var c=window.console[a];f(c)&&c.apply(window.console,b)}}function f(a){return void 0===a||null===a?!1:"function"==typeof a}function e(a){return d.isString(a)}var bc,bd,be=this,bf=b||"default",bg=!1,bh=new a,bi="disconnected",bj=0,bk=null,bl=0,bm=[],bn=!1,bo={},bp=0,bq=null,br=[],bs={},bt={},bu=!1,bv=!1,bw={connectTimeout:8e3,maxConnections:2,backoffIncrement:1e3,maxBackoff:18e4,logLevel:"info",reverseIncomingExtensions:!0,maxNetworkDelay:8e3,requestHeaders:{},appendMessageTypeToURL:!0,autoBatch:!1,advice:{timeout:6e4,interval:0,reconnect:"retry"}};this._mixin=function(a,b){for(var c=b||{},d=2;d<arguments.length;++d){var e=arguments[d];if(void 0!==e&&null!==e)for(var f in e){var g=e[f],h=c[f];if(g!==b&&void 0!==g)if(a&&"object"==typeof g&&null!==g)if(g instanceof Array)c[f]=this._mixin(a,h instanceof Array?h:[],g);else{var i="object"!=typeof h||h instanceof Array?{}:h;c[f]=this._mixin(a,i,g)}else c[f]=g}}return c},this._warn=function(){g("warn",arguments)},this._info=function(){"warn"!==bw.logLevel&&g("info",arguments)},this._debug=function(){"debug"===bw.logLevel&&g("debug",arguments)},this._isCrossDomain=function(a){return a&&a!==window.location.host};var bx,by;this.send=u,this.receive=Z,bx=function(a){be._debug("Received",a);for(var b=0;b<a.length;++b){var c=a[b];Z(c)}},by=function(a,b,c,d){be._debug("handleFailure",a,b,c,d);for(var e=0;e<b.length;++e){var f=b[e],g=f.channel;switch(g){case"/meta/handshake":I(a,f);break;case"/meta/connect":L(a,f);break;case"/meta/disconnect":O(a,f);break;case"/meta/subscribe":R(a,f);break;case"/meta/unsubscribe":U(a,f);break;default:Y(a,f)}}},this.registerTransport=function(a,b,c){var d=bh.add(a,b,c);return d&&(this._debug("Registered transport",a),f(b.registered)&&b.registered(a,this)),d},this.getTransportTypes=function(){return bh.getTransportTypes()},this.unregisterTransport=function(a){var b=bh.remove(a);return null!==b&&(this._debug("Unregistered transport",a),f(b.unregistered)&&b.unregistered()),b},this.unregisterTransports=function(){bh.clear()},this.findTransport=function(a){return bh.find(a)},this.configure=function(a){h.call(this,a)},this.init=function(a,b){this.configure(a),this.handshake(b)},this.handshake=function(a){j("disconnected"),bu=!1,E(a)},this.disconnect=function(a,b){if(q("/meta/reconnect",{}),!k()){void 0===b&&"boolean"!=typeof a&&(b=a,a=!1);var c={channel:"/meta/disconnect"},d=this._mixin(!1,{},b,c);j("disconnecting"),t(a===!0,[d],!1,"disconnect")}},this.startBatch=function(){x()},this.endBatch=function(){z()},this.batch=function(a,b){var c=_(a,b);this.startBatch();try{c.method.call(c.scope),this.endBatch()}catch(d){throw this._debug("Exception during execution of batch",d),this.endBatch(),d}},this.addListener=function(a,b,c){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!e(a))throw"Illegal argument type: channel must be a string";return ba(a,b,c,!0)},this.removeListener=function(a){if(!d.isArray(a))throw"Invalid argument: expected subscription, not "+a;bb(a)},this.clearListeners=function(){bo={}},this.subscribe=function(a,b,c,d){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!e(a))throw"Illegal argument type: channel must be a string";if(k())throw"Illegal state: already disconnected";f(b)&&(d=c,c=b,b=void 0);var g=!$(a),h=ba(a,b,c,!1);if(g){var i={channel:"/meta/subscribe",subscription:a},j=this._mixin(!1,{},d,i);u(j)}return h},this.unsubscribe=function(a,b){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(k())throw"Illegal state: already disconnected";this.removeListener(a);var c=a[0];if(!$(c)){var d={channel:"/meta/unsubscribe",subscription:c},e=this._mixin(!1,{},b,d);u(e)}},this.clearSubscriptions=function(){i()},this.publish=function(a,b,c,d){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!e(a))throw"Illegal argument type: channel must be a string";if(k())throw"Illegal state: already disconnected";f(b)?(d=b,b=c={}):f(c)&&(d=c,c={});var g={channel:a,data:b,_callback:d},h=this._mixin(!1,{},c,g);return u(h),h.id},this.getStatus=function(){return bi},this.isDisconnected=k,this.setBackoffIncrement=function(a){bw.backoffIncrement=a},this.getBackoffIncrement=function(){return bw.backoffIncrement},this.getBackoffPeriod=function(){return bp},this.setLogLevel=function(a){bw.logLevel=a},this.registerExtension=function(a,b){if(arguments.length<2)throw"Illegal arguments number: required 2, got "+arguments.length;if(!e(a))throw"Illegal argument type: extension name must be a string";for(var c=!1,d=0;d<br.length;++d){var g=br[d];if(g.name===a){c=!0;break}}return c?(this._info("Could not register extension with name",a,"since another extension with the same name already exists"),!1):(br.push({name:a,extension:b}),this._debug("Registered extension",a),f(b.registered)&&b.registered(a,this),!0)},this.unregisterExtension=function(a){if(!e(a))throw"Illegal argument type: extension name must be a string";for(var b=!1,c=0;c<br.length;++c){var d=br[c];if(d.name===a){br.splice(c,1),b=!0,this._debug("Unregistered extension",a);var g=d.extension;f(g.unregistered)&&g.unregistered();break}}return b},this.getExtension=function(a){for(var b=0;b<br.length;++b){var c=br[b];if(c.name===a)return c.extension}return null},this.getName=function(){return bf},this.getClientId=function(){return bk},this.getURL=function(){return bw.url},this.getTransport=function(){return bc},this.getConfiguration=function(){return this._mixin(!0,{},bw)},this.getAdvice=function(){return this._mixin(!0,{},bs)}}}),a("E2",function(){return function(){function a(a,c){b._debug(a,c)}var b,c=!1,d=-1,e={};return e.registered=function(c,d){b=d,a("AckExtension: executing registration callback")},e.unregistered=function(){a("AckExtension: executing unregistration callback"),b=null},e.incoming=function(b){var e=b.channel;if("/meta/handshake"==e)c=b.ext&&b.ext.ack,a("AckExtension: server supports acks",c);else if(c&&"/meta/connect"==e&&b.successful){var f=b.ext;f&&"number"==typeof f.ack&&(d=f.ack,a("AckExtension: server sent ack id",d))}return b},e.outgoing=function(e){var f=e.channel;return"/meta/handshake"==f?(e.ext||(e.ext={}),e.ext.ack=b&&b.ackEnabled!==!1,d=-1):c&&"/meta/connect"==f&&(e.ext||(e.ext={}),e.ext.ack=d,a("AckExtension: client sending ack id",d)),e},e}}),a("E3",function(){var a=b("AA");return function(b){function e(a){a&&("number"==typeof a.cookieMaxAge&&(k=a.cookieMaxAge),"string"==typeof a.cookieName&&(i=a.cookieName),"string"==typeof a.cookiePath&&(j=a.cookiePath))}function d(a){return h.url==a.url}function c(b){if(h&&null!==h.handshakeResponse){e(b),h.cookiePath=j;var c=z.stringify(h);g("Reload extension saving cookie value",c),a.set(i,c,{"max-age":k,path:j,expires:new Date((new Date).getTime()+1e3*k)})}}var f,g,h=null,i="org.cometd.reload",j="/",k=5,l=!1,m={};return m.configure=e,m.registered=function(a,b){f=b,f.reload=c,g=f._debug},m.unregistered=function(){delete f.reload,f=null},m.outgoing=function(b){var c=b.channel;if("/meta/handshake"==c){h={},h.url=f.getURL();var e=a.get(i);if(g("Reload extension found cookie value",e),e)try{var j=z.parse(e);if(a.set(i,"",{"max-age":-1,path:j.cookiePath,expires:-1}),j.handshakeResponse&&d(j))return g("Reload extension restoring state",j),setTimeout(function(){g("Reload extension replaying handshake response",j.handshakeResponse),h.handshakeResponse=j.handshakeResponse,h.transportType=j.transportType,h.reloading=!0;var a=f._mixin(!0,{},h.handshakeResponse,{ext:{reload:!0}});a.supportedConnectionTypes=[h.transportType],f.receive(a),g("Reload extension replayed handshake response",a)},0),l||(l=!0,f.startBatch()),null;g("Reload extension could not restore state",j)}catch(k){g("Reload extension error while trying to restore cookie",k)}}else"/meta/connect"==c&&(h.transportType||(h.transportType=b.connectionType,g("Reload extension tracked transport type",h.transportType)));return b},m.incoming=function(a){if(a.successful)switch(a.channel){case"/meta/handshake":h.handshakeResponse||(h.handshakeResponse=a,g("Reload extension tracked handshake response",a));break;case"/meta/disconnect":h=null;break;case"/meta/connect":l&&(f.endBatch(),l=!1)}return a},e(b),m}}),a("E4",function(){return function(){var a={};return a.outgoing=function(a){return a.timestamp=(new Date).toUTCString(),a},a}}),a("E5",function(){var a=b("A9");return function(b){function c(a,b){d._debug(a,b)}var d,e=b&&b.maxSamples||10,f=[],g=[],h=0,i=0,j={};return j.registered=function(a,b){d=b,c("TimeSyncExtension: executing registration callback")},j.unregistered=function(){c("TimeSyncExtension: executing unregistration callback"),d=null,f=[],g=[]},j.incoming=function(a){var b=a.channel;if(b&&0===b.indexOf("/meta/")&&a.ext&&a.ext.timesync){var d=a.ext.timesync;c("TimeSyncExtension: server sent timesync",d);var j=(new Date).getTime(),k=(j-d.tc-d.p)/2,l=d.ts-d.tc-k;f.push(k),g.push(l),g.length>e&&(g.shift(),f.shift());for(var m=g.length,n=0,o=0,p=0;m>p;++p)n+=f[p],o+=g[p];h=parseInt((n/m).toFixed()),i=parseInt((o/m).toFixed()),c("TimeSyncExtension: network lag",h,"ms, time offset with server",i,"ms",h,i)}return a},j.outgoing=function(a){var b=a.channel;return b&&0===b.indexOf("/meta/")&&(a.ext||(a.ext={}),a.ext.timesync={tc:(new Date).getTime(),l:h,o:i},c("TimeSyncExtension: client sending timesync",z.stringify(a.ext.timesync))),a},j.getTimeOffset=function(){return i},j.getTimeOffsetSamples=function(){return g},j.getNetworkLag=function(){return h},j.getServerTime=function(){return(new Date).getTime()+i},j.getServerDate=function(){return new Date(this.getServerTime())},j.setTimeout=function(b,c){var d=c instanceof Date?c.getTime():0+c,e=d-i,f=e-(new Date).getTime();return 0>=f&&(f=1),a(b,f)},j}}),a("E6",function(){function a(){function h(a,c){var d,e,h,i,j,k=n++,m=o+k;c||(l=l||f(),d=l.contentWindow.document),d?i=p+q:(d=document,i=q),j=b(a,i+m),h=d.createElement("script"),h.type="text/javascript",h.src=j,h.charset="utf-8",r[m]=g(a.onSuccess,h,m,e),d.getElementsByTagName("head")[0].appendChild(h)}function g(a,b,c,d){return function(e){var f=z.parse(z.stringify(e));a(f),t(b),delete r[c],d&&clearTimeout(d)}}function f(){var a="cometd_imsdk_"+i,b=e.getElementById(a);return!b&&m&&m.connection&&(b=m.connection.getElementById(a)),b}function b(a,b){var c=a.url;return-1==c.indexOf("jsonp=?")?c+="?jsonp="+b:c=c.replace("jsonp=?","jsonp="+b),a.body&&(c+="&message="+encodeURIComponent(a.body)),c+="&"+new Date}function a(){var a="cometd_imsdk_"+ ++i;j&&!k?(m.connection=new ActiveXObject("htmlfile"),m.connection.open(),m.connection.write("<html>"),m.connection.write("</html>"),m.connection.close(),m.iframediv=m.connection.createElement("div"),m.connection.body.appendChild(m.iframediv),m.connection.parentWindow.lc=m,m.connection.parentWindow.webimCB=r,m.iframediv.innerHTML='<iframe id="'+a+'" name="'+a+'"></iframe>'):-1!=navigator.appVersion.indexOf("KHTML")?(m.connection=e.createElement("iframe"),m.connection.setAttribute("id",a),m.connection.style.cssText="position:absolute;left:-100px;top:-100px;height:1px;width:1px;visibility:hidden;",s.appendChild(m.connection)):(m.connection=e.createElement("iframe"),m.connection.setAttribute("id",a),m.connection.style.cssText="position:absolute;left:-100px;top:-100px;height:1px;width:1px;visibility:hidden;display:none;",m.iframediv=e.createElement("iframe"),m.connection.appendChild(m.iframediv),s.appendChild(m.connection))}var l,m={},n=0,o="_callback",p="parent.",q="webimCB.",r=d.webimCB={},s=e.getElementById(c("im_root"))||e.body,t=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)};return a(),{request:h}}{var c=b("DD"),f=b("A4"),g=b("DE"),h=b("DF"),i=0,j=f.IE,k=f.IE9;f.IE6||f.IE7}return function(){var b=new h,c=a(),d=g.derive(b),e=2e3;return d.accept=function(){return!0},d.jsonpSend=function(a,b){c.request(a,b)},d.transportSend=function(a,b){for(var c=this,d=0,f=a.messages.length,g=[],h=function(a,d,e){c.setTimeout(function(){c.transportFailure(a,b,"error",e)},0)};f>0;){var i=z.stringify(a.messages.slice(d,d+f)),j=a.url.length+encodeURI(i).length;if(j>e){if(1===f){var k="Bayeux message too big ("+j+" bytes, max is "+e+") for transport "+c.getType();return void h(a,reques,k)}--f}else g.push(f),d+=f,f=a.messages.length-d}var l=a;if(g.length>1){var m=0,n=g[0];c._debug("Transport",c.getType(),"split",a.messages.length,"messages into",g.join(" + ")),l=c._mixin(!1,{},a),l.messages=a.messages.slice(m,n),l.onSuccess=a.onSuccess,l.onFailure=a.onFailure;for(var o=1;o<g.length;++o){var p=c._mixin(!1,{},a);m=n,n+=g[o],p.messages=a.messages.slice(m,n),p.onSuccess=a.onSuccess,p.onFailure=a.onFailure,c.send(p,b.metaConnect)}}c._debug("Transport",c.getType(),"sending request",b.id,"envelope",l);try{var q=!0;c.jsonpSend({transport:c,url:l.url,sync:l.sync,headers:c.getConfiguration().requestHeaders,body:z.stringify(l.messages),onSuccess:function(a){var d=!1;try{var e=c.convertToMessages(a);0===e.length?c.transportFailure(l,b,"no response"):(d=!0,c.transportSuccess(l,b,e))}catch(f){c._debug(f),d||c.transportFailure(l,b,"bad response",f)}},onError:function(a,d){q?c.setTimeout(function(){c.transportFailure(l,b,a,d)},0):c.transportFailure(l,b,a,d)}}),q=!1}catch(r){c.setTimeout(function(){c.transportFailure(l,b,"error",r)},0)}},d}}),a("E7",function(){var a=b("DE"),c=b("AC"),d=b("A5");return function(b){function g(a,b){try{null===p?e.call(this):q&&f.call(this,a,b)}catch(c){var d=p;this.setTimeout(function(){a.onFailure(d,a.messages,"error",c)},0)}}function f(a,b){var c=z.stringify(a.messages);p.send(c),this._debug("Transport",this.getType(),"sent",a,"metaConnect =",b);var d=this.getConfiguration().maxNetworkDelay,e=d;b&&(e+=this.getAdvice().timeout,r=!0);for(var f=[],g=this.setTimeout(function(){j&&j.close(1e3,"Timeout")},e),h=0;h<a.messages.length;++h){var i=a.messages[h];if(i.id){f.push(i.id);var j=p;o[i.id]=g}}this._debug("Transport",this.getType(),"waiting at most",e,"ms for messages",f,"maxNetworkDelay",d,", timeouts:",o)}function e(){var a=h.getURL().replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);var d=this,e=null,f=h.getConfiguration().connectTimeout;f>0&&(e=this.setTimeout(function(){e=null,q||(d._debug("Transport",d.getType(),"timed out while connecting to URL",a,":",f,"ms"),d.onClose(1002,"Connect Timeout"))},f));var g=null,i=b.getConfig("webSocket_connect_timeout"),j=new c(a),k=function(){return d._debug("WebSocket opened",j),e&&(d.clearTimeout(e),e=null),i>0&&(g=d.setTimeout(function(){g=null,d._debug("Transport",d.getType(),"timed out while getting message","Message Timeout",":",i,"ms"),d.onClose(1002,"Message Timeout")},i)),j!==p?void d._debug("Ignoring open event, WebSocket",p):void d.onOpen()},l=function(a){var b=a?a.code:1e3,c=a?a.reason:void 0;return d._debug("WebSocket closed",b,"/",c,j),e&&(d.clearTimeout(e),e=null),j!==p?void d._debug("Ignoring close event, WebSocket",p):void d.onClose(b,c)},m=function(a){return d._debug("WebSocket message",a,j),g&&(clearTimeout(g),g=null),j!==p?void d._debug("Ignoring message event, WebSocket",p):void d.onMessage(a)};j.onopen=k,j.onclose=l,j.onerror=function(){l({code:1002})},j.onmessage=m,p=j,this._debug("Transport",this.getType(),"configured callbacks on",j)}var h,i,j=new a,k=a.derive(j),l=!0,m=!1,n={},o={},p=null,q=!1,r=!1;return k.onOpen=function(){this._debug("Transport",this.getType(),"opened",p),q=!0,m=!0,this._debug("Sending pending messages",n);for(var a in n){var b=n[a],c=b[0],d=b[1];i=c.onSuccess,f.call(this,c,d)}},k.onMessage=function(a){this._debug("Transport",this.getType(),"received websocket message",a,p);for(var b=!1,c=this.convertToMessages(a.data),e=[],f=0;f<c.length;++f){var g=c[f];if((/^\/meta\//.test(g.channel)||void 0===g.data)&&g.id){e.push(g.id);var h=o[g.id];h&&(this.clearTimeout(h),delete o[g.id],this._debug("Transport",this.getType(),"removed timeout for message",g.id,", timeouts",o))}"/meta/connect"===g.channel&&(r=!1),"/meta/disconnect"!==g.channel||r||(b=!0)}for(var j=!1,k=0;k<e.length;++k){var l=e[k];for(var m in n){var q=m.split(","),s=d.indexOf(l,q);if(s>=0){j=!0,q.splice(s,1);var t=n[m][0],u=n[m][1];delete n[m],q.length>0&&(n[q.join(",")]=[t,u]);break}}}j&&this._debug("Transport",this.getType(),"removed envelope, envelopes",n),i.call(this,c),b&&p.close(1e3,"Disconnect")},k.onClose=function(a,b){this._debug("Transport",this.getType(),"closed",a,b,p),l=m;for(var c in o)this.clearTimeout(o[c]);o={};for(var d in n){var e=n[d][0],f=n[d][1];f&&(r=!1),e.onFailure(p,e.messages,"closed "+a+"/"+b)}n={},null!==p&&q&&p.close(1e3,"Close"),q=!1,p=null},k.registered=function(a,b){j.registered(a,b),h=b},k.accept=function(){return l&&!!c&&b.getConfig("webSocket")},k.send=function(a,b){this._debug("Transport",this.getType(),"sending",a,"metaConnect =",b);for(var c=[],d=0;d<a.messages.length;++d){var e=a.messages[d];e.id&&c.push(e.id)}n[c.join(",")]=[a,b],this._debug("Transport",this.getType(),"stored envelope, envelopes",n),g.call(this,a,b)},k.abort=function(){if(j.abort(),null!==p)try{p.close(1001)}catch(a){this._debug(a)}this.reset()},k.reset=function(){j.reset(),null!==p&&q&&p.close(1e3,"Reset"),l=!0,m=!1,o={},n={},p=null,q=!1,i=null},k}}),a("E8",function(){function a(a){function S(){bc&&clearTimeout(bc),bc=s(function(){H("disconnected",o.HEARTBEAT_TIMEOUT)},T.heart_beat_timeout)}function R(){return $}function Q(a){return U.publish("/im/req",a)}function P(a){t.forEach(bb,function(b){b(a)})}function O(a){t.forEach(ba,function(b){b(a)})}function N(a,b){t.forEach(_,function(c){c(a,b)})}function M(a){r.isFunction(a)&&bb.push(a)}function L(a){r.isFunction(a)&&ba.push(a)}function K(a){r.isFunction(a)&&_.push(a)}function J(){if(bd<=T.reconnect_time){var a=d*Math.random();s(function(){z()},a)}else H("shutdown");bd+=1}function I(){U.clearListeners(),U.clearSubscriptions(),U.disconnect()}function H(a,b){if($!=a)switch(("connecting"!=$||"disconnected"!=a)&&N(a,b),$=a,a){case"connected":break;case"connecting":break;case"disconnected":I(),J();break;case"shutdown":I()}}function G(){return W.timesync.getServerTime()}function F(a){return T[a]}function E(){if(!be){var a=unescape(q.get("SUP")),b=a.match(/uid=([0-9]+)&/);a&&b&&b[1]&&(be=b[1])}return be}function D(a){var b=a.data&&a.data.test||g;a.id&&!b?O(a):P(a)}function C(){V=U.subscribe(Y,function(a){D(a)})}function B(){U.addListener("/meta/handshake",function(a){a.successful?C():a.xhr&&T.webSocket?U.unregisterTransport("websocket"):H("disconnected",o.HANDSHAKE_FAIL)}),U.addListener("/meta/connect",function(a){a.successful?(bd=0,H("connected"),S()):H("disconnected",o.CONNECT_FAIL)}),U.addListener("/meta/publish",function(a){a.failure!==!0&&a.successful!==!1||"connecting"===$||H("disconnected",o.PUBLISH_FAIL)})}function A(a){var b=E();b&&n(c,{uid:b||"",returntype:"json",v:"1.1"},{timeout:3e4}).done(function(b){a(b)}).fail(function(b){a(b,!0)})}function z(){U.init({url:X+"im",logLevel:T.log_level}),B()}function y(){Z=f,A(function(a,b){!b&&a&&a.server&&a.channel?(X=a.server,Y=a.channel,z()):H("disconnected",o.NAS_FAIL)})}function x(){T.webSocket&&U.registerTransport("websocket",i(_self)),U.registerTransport("callback-polling",h(_self))}function p(){u.forEach(W,function(a,b){U.registerExtension(a,b)})}function b(){W.ack=j(),W.reload=k(),W.timestamp=l(),W.timesync=m(),U=new e,p(),x()}var T=u.extend(w,a||{}),U=null,V=null,W={},X=null,Y=null,Z=g,$="unconnect",_=[],ba=[],bb=[],bc=null,bd=0,be="";return _self={},_self={start:function(){Z||v(y)},send:Q,onMessage:L,onNotice:M,onStatusChange:K,setStatus:H,getConfig:F,getUid:E,getServerTime:G,getStatus:R},b(),_self}var c="http://nas.im.api.weibo.com/im/webim.jsp",d=3e4,e=b("E1"),h=b("E6"),i=b("E7"),j=b("E2"),k=b("E3"),l=b("E4"),m=b("E5"),n=b("B7"),o=b("DB"),p=b("DD"),q=b("AA"),r=b("A3"),s=b("A9"),t=b("A5"),u=b("A7"),v=b("AB"),w={webSocket:!0,log_level:p("cometd_level")||"info",heart_beat_timeout:21e4,packet_timeout:8e3,webSocket_connect_timeout:1e3,reconnect_time:5};return a}),a("E9",function(){var a=b("B4"),c=b("A7").forEach,d=b("A5").forEach,e=b("A9"),f=b("DB");return function(){function k(a,b){return j(a,b)}function j(b,c){return(new a).outer(function(a){if(l&&"connected"==l.getStatus()){var d=m[l.send(b)]={param:b,deferred:a,autoResend:c,timeout:e(function(){l.setStatus("disconnected",f.RESPONSE_TIMEOUT)},l.getConfig("packet_timeout"))};p.notify(d)}else c?(n.push({param:b,deferred:a,autoResend:c}),e(function(){a.notify({type:"disconnected"})})):a.inject({error:!0,errCode:"disconnected",message:"Not Connected."})})}function i(a){!l&&a&&(l=a,l.onMessage(g),l.onNotice(b),l.onStatusChange(h))}function h(a){"disconnected"==a?(c(m,function(a,b){clearTimeout(b.timeout),b.autoResend?(n.push(b),b.deferred.notify({type:"disconnected"})):b.deferred.inject({error:!0,errCode:"disconnected",message:"Not Connected."})}),m={}):"connected"==a&&(d(n,function(a){a.timeout=e(function(){l.setStatus("disconnected",f.RESPONSE_TIMEOUT)},l.getConfig("packet_timeout")),m[l.send(a.param)]=a}),n.length=0)}function g(a){var b=m[a.id],c=a.data||{},d=b.param.cmd,e=c.type||a.type;b&&(e==d?(clearTimeout(b.timeout),o.notify(b,c),b.deferred.resolve(c),"msg"!=e&&delete m[a.id]):(b.deferred.notify({type:"receipt",errorCode:c.errCode,success:0===c.ret}),"test_notice"==b.param.cmd&&(clearTimeout(b.timeout),b.deferred.resolve(c))))}function b(a){var b=a.data;"msg"==b.type&&e(function(){var a=m[b.reqid];a&&(a.deferred.notify({success:0===b.ret,ret:b.ret,errCode:b.errCode,type:"send",mid:b.dmid,error:b.errMsg}),delete m[b.reqid])},l.getConfig("packet_timeout"))}var l=null,m={},n=[],o=new a,p=new a;return k.on=function(a){o.progress(a)},k.beforeSend=function(a){p.progress(a)},k.inject=function(a){i(a)},k}()}),a("EA",function(){function a(a){return a.replace(/_\w/g,function(a){return a[1].toUpperCase()})}var c=b("B4"),d=b("C4"),e=b("A5"),f=b("A3"),g=b("A9");return function(){function b(b){var c=b.data,h=a(c.type),j=d[h],k=j.type;if(j)try{var l=j.fix(c);if(l.fixedType&&(k=l.fixedType,delete l.fixedType),"unread"===k&&1===l.dmIsRemind)return;f.isArray(l)?e.forEach(l,function(a){!function(a){g(function(){i.notify(k,a)})}(a)}):g(function(){i.notify(k,l)})}catch(m){}}var h=null,i=new c,j={on:function(a){i.progress(a)},push:function(a,b){i.notify(a,b)},inject:function(a){!h&&a&&(h=a,h.onNotice(b))},unbind:function(a){i.unProgress(a)}};return j}()}),a("EB",function(){var a=b("B4"),c=b("EA"),d=b("A7").forEach,e=(b("A5").forEach,b("A9")),f=b("AE"),g=b("A3");return function(){function i(){return 0===l.dmIsRemind}function h(){var a={total:l.total,dmIsRemind:l.dmIsRemind},b={};return d(l.items,function(a,c){b[a]=parseInt(c)||0}),a.items=b,a}function b(a,b){var c,g=l.items;switch(a){case"message":f(b.mid,m)&&(c=b.uid,l.total+=1,g[c]||(g[c]=0),g[c]+=1,m=b.mid,void 0!==b.dmIsRemind&&(l.dmIsRemind=b.dmIsRemind));break;case"unread":o=!0,l.total=Math.max(0,b.total),d(b.items,function(a,b){parseInt(b)&&(g[a]=b)}),m=b.lastMid;break;case"clear":c=b.uid,0===parseInt(c)?(d(g,function(a){g[a]=0}),l.total=0):g[c]&&(l.total-=parseInt(g[c])||0,l.total=Math.max(0,l.total),delete g[c],g[c]=0);break;default:return}clearTimeout(j),j=e(function(){i()&&k.notify(h())},n)}var j,k=new a,l={total:0,items:{},dmIsRemind:0},m=0,n=500,o=!1;return c.on(b),{on:function(a){g.isFunction(a)&&(o&&i()&&e(function(){a(h())}),k.progress(a))},unbind:function(a){k.unProgress(a)},get:function(){return h()}}}()}),a("EC",function(){var a="http://wbapp.mobile.sina.cn/interface/f/ttt/v3/pc_win.php?posid=pos51dbbc713bb90",c=b("B4"),d=b("EA"),e=b("A9"),f=b("B7"),g=b("A3");return function(){function h(a,b){"news"==a&&(i=b,j.notify(b))}function b(b,c){f(a,{uid:b}).done(function(a){var b,d=c.getItem("last_news_id");a&&d!=a.id&&(b={bigTitle:a.title,title:a.content,url:a.link,adId:a.id,clickUrl:a.click_url,t:a.t,check_time:a.check_time},i=b,j.notify(b))})}var i,j=new c;return d.on(h),{on:function(a){g.isFunction(a)&&(i&&e(function(){a(i)}),j.progress(a))},unbind:function(a){j.unProgress(a)},start:function(a,c){b(a,c)}}}()}),a("ED",function(){var a=b("B4"),c=b("EA"),d=b("AE");return function(){function b(a,b){switch(a){case"message":d(b.mid,f)&&(e.notify("rev",b),f=b.mid);break;case"send":d(b.mid,g)&&(e.notify("send",b),g=b.mid);break;default:return}}var e=new a,f=0,g=0;return c.on(b),{on:function(a){e.progress(a)},unbind:function(a){e.unProgress(a)}}}()}),a("EE",function(){function h(b){var d=new i;return r?a(b).then(function(a){d.resolve(a)},function(){s?c(b).then(function(a){d.resolve(a)},function(){d.resolve(u)}):d.resolve(u)}):s?c(b).then(function(a){d.resolve(a)},function(){d.resolve(u)}):d.resolve(u),{done:d.done}}function c(a){var b=new i,c=a+"-",d=function(){var a={type:"local",getItem:function(a,b){if(void 0==v[a])try{var d=z.parse(localStorage.getItem(c+a))||null;v[a]=d}catch(e){v[a]=null}return void 0==b?v[a]:null===v[a]?b:v[a]},setItem:function(b,d){if(void 0==d)return a.clear(b);v[b]=d;try{return localStorage.setItem(c+b,z.stringify(d))}catch(e){return g}},clear:function(a){v[a]=void 0;try{return localStorage.clear(a),f}catch(b){return g}}};return a};return m(function(){b.resolve(d())}),b}function a(a){var b=new i,c=function(){var a=e.getElementById(o),b={type:"flash",getItem:function(b,c){if(void 0==v[b])try{var d=z.parse(decodeURIComponent(a.getSo(b)))||null;v[b]=d}catch(e){v[b]=null}return void 0==c?v[b]:null===v[b]?c:v[b]},setItem:function(c,d){if(void 0==d)return b.clear(c);v[c]=d;try{return a.setSo(c,z.stringify(d))}catch(e){return g}},clear:function(b){v[b]=void 0;try{return a.clear(b)}catch(c){return g}}};return b},f=m(function(){b.inject("TIMEOUT")},q);d[k]._storageEvent={ready:function(){clearTimeout(f),b.resolve(c())},error:function(a){clearTimeout(f),b.inject(a)}};try{t(o,e.getElementById(j("im_root"))),l.embedSWF(p,o,"1px","1px","0","",{uid:a,ready:k+"._storageEvent.ready",error:k+"._storageEvent.error"},{allowScriptAccess:"always",wmode:"transparent"},{})}catch(h){}return b}var i=b("B4"),j=b("DD"),k=j("im_space"),l=b("AD"),m=b("A9"),n=b("A4").IE,o="webim_swf_box",p=j("storage_swf_path")+"?_version="+j("im_version"),q=1e3,r=function(){var a,b=!1;if(n)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=a&&a.GetVariable("$version")?!0:!1}catch(c){b=!1}else a=navigator.plugins["Shockwave Flash"],b=a&&a.description?!0:!1;return b}(),s=!!d.localStorage,t=function(a,b){b=b||e.body;var c=e.createElement("div");c.id=a,c.style.cssText="position:absolute;position:fixed;bottom:2px;right:2px;z-index:9999;width:1px;height:1px",b.appendChild(c)},u={type:"empty",getItem:function(a,b){return void 0==b?null:b},setItem:function(){return g},clear:function(){return g}},v={};return h}),a("EF",function(){var a,c=b("B4"),d=b("AB");return d(function(){var b=!!document.createElement("video").canPlayType;a=WBAudio(b?"HTML5":"FLASH")}),function(b){return(new c).outer(function(c){a.load(b),a.play(),c.resolve(a)})}}),a("F0",function(){{var a=b("E9"),c=b("EA");b("A7").clone}a.on(function(b){switch(param=b.param,param.cmd){case"msg":b.deferred.progress(function(b){"send"==b.type&&b.success&&a({cmd:"synchroniz",syncData:z.stringify({uid:param.uid,msg:param.msg,"long":!1,mid:b.mid,time:+(new Date),att_ids:param.x&&param.x.att_ids}),seq:"fixed-send"}).done()});break;case"revmsg":c.push("clear",{uid:param.uid}),a({cmd:"synchroniz",syncData:z.stringify({uid:param.uid}),seq:"fixed-clear"}).done()}})}),a("F1",function(){function a(a){return(new c).outer(function(b){var d=new c,e=null;r(a).done(function(a){e=a,b.resolve(function(a){return{setStyle:function(b,c){a&&a.style&&(a.style[b]=c)},setStyles:function(b){if(a&&a.style)for(var c in b)a.style[c]=b[c]},show:function(){a&&a.style&&(a.style.display="")},hide:function(){a&&a.style&&(a.style.display="none")},setUid:function(b){a&&a.resetUploadAPI&&a.resetUploadAPI(m+"&tuid="+b)},setGid:function(b){a&&a.resetUploadAPI&&a.resetUploadAPI(m+"&gid="+b)},upload:function(b){a&&a.screenCapture&&a.screenCapture(b)},onNotice:function(a){d&&d.progress(a)}}}(a))}).fail(function(){b.inject()}).progress(function(a,b){d&&d.notify(a,b)})})}var c=b("B4"),f=b("DD"),g=f("im_space"),h=b("AD"),i=b("A9"),j=(b("A3"),b("A4").IE),k="webim_upload_box",l=f("upload_swf_path")+"?_version="+f("im_version"),m="http://upload.api.weibo.com/2/mss/upload.json?source="+f("im_source"),n=5e3,o=["img","file"],p=function(){var a,b=!1;if(j)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),b=a&&a.GetVariable("$version")?!0:!1}catch(c){b=!1}else a=navigator.plugins["Shockwave Flash"],b=a&&a.description?!0:!1;return b}(),q=function(a,b){b=b||e.body;var c=e.createElement("div");c.id=a,c.style.cssText="position:absolute;position:fixed;bottom:2px;right:2px;z-index:9999;width:1px;height:1px",b.appendChild(c)},r=function(a){{var b=new c,j=function(){return e.getElementById(k)};i(function(){b.inject("TIMEOUT")},n)}d[g]._uploadEvent={init:function(){b.resolve(j())},success:function(a){a.data&&b.notify("success",a)},error:function(a){b.notify("error",a)},start:function(a){b.notify("start",a)},showTip:function(a){b.notify("show",o[a||0])},hideTip:function(a){b.notify("hide",o[a||0])}};try{q(k,a||e.getElementById(f("im_root")));{h.embedSWF(l,k,"44px","16px","0","",{swfid:k,maxSumSize:50,maxFileSize:50,maxFileNum:100,multiSelect:0,uploadAPI:encodeURIComponent(m),initFun:g+"._uploadEvent.init",sucFun:g+"._uploadEvent.success",errFun:g+"._uploadEvent.error",beginFun:g+"._uploadEvent.start",showTipFun:g+"._uploadEvent.showTip",hiddenTipFun:g+"._uploadEvent.hideTip",areaInfo:"0-16|12-16",fExt:"*.jpg;*.gif;*.jpeg;*.png|*",fExtDec:"选择图片|选择文件"},{menu:"false",scale:"noScale",allowFullscreen:"true",allowScriptAccess:"always",bgcolor:"",wmode:"transparent",data:"upload.swf"},{})}}catch(p){}return b};return p?function(b){return a(b)}:null}),a("F2",function(){var a=d.__PubSub__;return function(b){a&&(b.onConnect(function(){a.publish("webim.connected")}),b.onUnreadChange(function(b){a.publish("webim.showMessage",b.total)}),a.subscribe("webim.messageTipClicked",function(a){b.publish("IM:tipClick",a||{})}))}}),a("F3",function(){var a={},c=b("B4"),d=b("E9"),e=(b("EA"),b("A5"));return d.on(function(b){"recents"==b.param.cmd?b.deferred.done(function(b){e.forEach(b.recents,function(b){var c=e.associate(b,w);c.nick&&(c.uid=c.uid+"",c.status=u[c.status],a[c.uid]=c)})}):"roster"==b.param.cmd&&b.deferred.done(function(b){e.forEach(b.items,function(b){var c=e.associate(b,v);c.nick&&(c.uid=c.uid+"",c.status=u[c.status],a[c.uid]=c)})})}),function(b,d){var f=b.getUser;return d&&d.recent&&e.forEach(d.recent,function(b){b.nick&&(a[b.uid]=b)}),b.getUser=function(b){return(new c).outer(function(c){a[b]?c.resolve(a[b]):f(b).done(function(d){a[b]=d,c.resolve(d)}).fail(c.inject)})},b}}),a("F4",function(){var a=b("B4"),c=b("A5"),d=function(){function a(){if(b&&c.length>0){b=g;var d=c.shift(),e=d.deferred,h=d.outer;e.all(function(){b=f,a()}).done(function(a){h.resolve(a)}).fail(h.inject).progress(h.notify)}}var b=f,c=[];return function(b,d){b.all&&c.push({deferred:b,outer:d}),a()}}(),e=["sendMessage","getUser","getRoster","getRecent","getPresence","getHistory","setPresence","clearUnread","sync","setStatus","chatSync","blockUser","restrict","search","getSetting","setSetting","publish","comment","like","interact","inviteResponse","testNotice"];return function(b){var f={};return c.forEach(e,function(c){f[c]=b[c],b[c]=function(){var b=[].slice.call(arguments);return(new a).outer(function(a){var e=f[c].apply({},b);d(e,a)})}}),b}}),a("F5",function(){function a(a,b,f){var h=new d,k={timeout:c},l=f?i.replace("api.",f+".api."):i;return b=b||{},b.source=j,"Number"==g.is(b.timeout)&&(k.timeout=b.timeout,delete k.timeout),h.outer(function(){e(l+a+".json",b,k).done(function(a){var b=a.code?a.data:a;h.resolve(b)}).fail(h.inject)})}var c=5e3,d=b("B4"),e=b("B7"),f=b("B9"),g=b("A3"),h=b("A7"),i="http://api.weibo.com/2/",j=b("DD")("im_source");return a.list=function(b,c,e,i){return(new d).outer(function(d){var j=[],k={};f([a(b,e,i)],null,!0).done(function(){k[c]=j,d.resolve(k)}).progress(function(f,k,l){k[c]&&g.isArray(k[c])?(j=j.concat(k[c]),j.length<k.total_number&&l.push(a(b,h.assign(e||{},{cursor:k.next_cursor}),i))):d.inject()})})},a}),a("F6",function(){var a=(b("B4"),b("E9"));return function(b,c){return c=c||{},a({cmd:"api_proxy",api:b,params:c},!0)}}),a("F7",function(){function a(a,b){function f(){i.top=k()}var h,i=a.style,j=e.compatMode&&"CSS1Compat"===e.compatMode;i.position="absolute";var k=j?function(){var c=e.documentElement;return c.scrollTop+(c.clientHeight-a.clientHeight)-b+"px"}:function(){var c=e.body;return c.scrollTop+(c.clientHeight-a.clientHeight)-b+"px"};f(),g(d,"scroll",function(){h&&clearTimeout(h),i.display="none",h=c(function(){f(),i.display="",h=null},300)}),g(d,"resize",f)}var c=b("A9"),f=b("DD"),g=b("AF"),h=b("A4").IE6,i=null;return{create:function(){return i||(i=e.createElement("div"),i.id=f("im_root"),i.className="en"==f("im_lang")?"WB_webim webim_L_en":"WB_webim",i.style.cssText="position:fixed;bottom:0px;right:0px;",h&&a(i,0),e.body.appendChild(i)),i},show:function(){i&&(i.style.display="")},hide:function(){i&&(i.style.display="none")}}}),a("F8",function(){var a=b("DD"),c=b("B6"),e=b("B9"),f=b("B8"),h=b("F5"),i=g,j=i||"on"==a("im_gray"),m=j?l:k,p=d&&d.$CONFIG||{},r=a("im_lang"),s=a("im_test"),t="http://js.t.sinajs.cn/open/analytics/js/suda.js?version=";return{load:function(){var b=a("im_cache")?a("im_version"):window.$IM_CONFIG&&window.$IM_CONFIG.im_version?window.$IM_CONFIG.im_version:+(new Date);if(f([void 0===p.$webim?h("account/get_privacy"):{webim:p.$webim}],["config"]).done(function(a){var d=!!a.config.webim;if(d){var g=[];g.push(c("css",m.css+"?v="+b)),window.SUDA?SUDA.uaTrack||(SUDA.uaTrack=function(){}):g.push(c("js",t+b)),"en"==r&&g.push(c("css",n)),o[r]&&g.push(c("js",o[r])),e([f(g),c("js",m.js+"?v="+b)]).done()}}),s){var g="http://"+a("im_test_server")+":"+a("im_test_port");d.TRIAL_CONFIG={server:a("im_test_server"),port:a("im_test_port")},e([c("js",g+q.io),c("js",g+q.jquery),c("js",g+q.index)]).done()}}}}),a("F9",function(){function a(a,b){var c=new d,e=j.isString(a)?{cmd:a}:a,f=h[e.cmd];if(f){var g=f.fix.apply(e,b);i(g,f.autoResend).done(function(a){try{c.resolve(f.receive(a))}catch(b){}}).fail(c.inject).progress(c.notify)}return c}var c={sendMessage:"msg",getUser:"vcard",getRoster:"roster",getRecent:"recents",getPresence:"querypresence",getHistory:"chatMsgHistory",setPresence:"presence",clearUnread:"revmsg",sync:"synchroniz",setStatus:"chatStates",chatSync:"chatSync",blockUser:"blockscreate",restrict:"restrict",search:"rosterSearch",getSetting:{cmd:"usersetting",subcmd:"get"},setSetting:{cmd:"usersetting",subcmd:"set"},publish:"statusesUpdate",comment:"createComment",like:"likeupdate",interact:"friendsInteract",inviteResponse:"inviteResponse",testNotice:"testNotice"},d=b("B4"),e=b("B9"),g=b("F5"),h=b("DA"),i=b("E9"),j=b("A3"),k=b("A7").forEach,l=function(a){return[].slice.call(a)},m={};k(c,function(b,c){m[b]=function(){return a(c,l(arguments))}}),m.getUser=function(a){return(new d).outer(function(b){g("users/show",{uid:a}).done(function(a){b.resolve({uid:a.idstr,nick:a.remark||a.remark_name||a.screen_name,sex:"m"==a.gender?1:0,status:a.online_status?"online":"offline",avatar:a.profile_image_url&&a.profile_image_url.split("/")[5],member:a.verified_type})}).fail(b.inject)})};var n=m.getHistory;return m.getHistory=function(){var a=[].slice.call(arguments);return(new d).outer(function(b){e([n.apply(null,a)],["once","twice"],f).done(function(a){b.resolve(a.twice?a.twice:a.once)}).progress(function(b,c,d){"once"==b&&!c.length&&c.length<1&&d.push(n.apply(null,a))})})},m}),a("FA",function(){return function(a){var b=a||{},c={};return b.C=function(a){var b;return a=a.toUpperCase(),b="TEXT"==a?e.createTextNode(""):"BUFFER"==a?e.createDocumentFragment():e.createElement(a)},b.E=function(a){return"string"==typeof a?document.getElementById(a):a},{register:function(a,d){for(var e=a.split("."),h=b,i=e.shift();i;){if(e.length)void 0===h[i]&&(h[i]={}),h=h[i];else if(void 0===h[i])return h[i]=d(b),c[a]&&(b[c[a]]=h[i]),f;i=e.shift()}return g},shortOption:function(a){for(var b in a)c[a[b]]=b}}}}),a("FB",function(){function a(a){var b=new j,p=a.getItem(c),q=a.getItem(d),r={status:a.getItem(h)||"max",active:a.getItem(f)||"",list:a.getItem(e)||[],send:a.getItem(i)||"E"},s=[],t=function(a){var b=-1;return k.forEach(s,function(c,d){c.uid==a&&(b=d)}),b>-1?s.splice(b,1)[0]:g},u=function(){a.setItem(d,s),b.notify({type:"recent",data:s})},v=function(){a.setItem(h,r.status),a.setItem(e,r.list),a.setItem(f,r.active||""),a.setItem(i,r.send),b.notify({type:"chat",data:r})};return m.beforeSend(function(a){var b=a.param;switch(b.cmd){case"setting":"set"==b.subcmd&&(m({cmd:"synchroniz",syncData:z.stringify({act:"refresh",data:z.parse(b.data)}),seq:"fixed-setting"}).done(),n.push("setting",{act:"refresh",data:z.parse(b.data)}));break;case"msg":n.push("recent",{act:"add",uid:b.uid+""});break;case"synchroniz":var c;if("fixed-chatSync"==b.seq){var d=z.parse(b.syncData);switch(d.type){case"add":c=d.data,r.active=c+"",~k.indexOf(r.list,c)||r.list.push(c);break;case"remove":c=d.data,k.remove(r.list,c),r.active==c&&(r.active=r.list[0]||null);break;case"min":r.status="min";break;case"close":r.list=[],r.active=null;break;case"max":r.status="max";break;case"send":r.send=d.data||"E"}v()}}}),n.on(function(d,e){switch(d){case"send":case"message":n.push("recent",{act:"add",uid:e.uid+""});break;case"setting":"refresh"==e.act&&(a.setItem(c,e.data),b.notify({type:"setting",data:e.data}));break;case"recent":switch(e.act){case"add":l([t(e.uid)||o.getUser(e.uid)],["user"]).done(function(a){a.user&&(s.unshift(a.user),u())});break;case"remove":t(e.uid),u();break;case"refresh":s=e.list,u()}break;case"chatSync":switch(e.type){case"add":uid=e.data,uid&&(r.active=uid+"",~k.indexOf(r.list,uid)||r.list.push(uid));break;case"remove":uid=e.data,k.remove(r.list,uid),r.active==uid&&(r.active=r.list[0]||null);break;case"min":r.status="min";break;case"max":r.status="max";break;case"close":r.list=[],r.active=null;break;case"send":r.send=e.data||"E"}v()}}),b.outer(function(){p&&q?(curRcent=q,b.resolve({setting:p,recent:q,chat:r})):b.resolve({setting:{},recent:[],chat:r})})}var c="remote-setting",d="remote-recent",e="local-chat",f="local-active",h="local-cStatus",i="local-send",j=b("B4"),k=b("A5"),l=b("B8"),m=b("E9"),n=b("EA"),o=b("F9");return a}),a("FC",function(){var a=b("B4"),c=b("A3"),d=(b("A5"),b("A7"));return function(){var b=new a,e={};return{watch:function(a,d){c.isFunction(d)&&(a in e&&d(e[a]),b.progress(function(b,c,e){b==a&&d(c,e)}))},publish:function(a,c,d){e[a]=c,b.notify(a,c,d)},setAll:function(a){d.forEach(a,function(a,b){e[a]=b})}}}()}),a("FD",function(){function b(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function a(a){return a=a||{},a.annotations&&a.annotations[0]&&("36"==a.type||"39"==a.type&&a.annotations[0].object||"34"==a.type||"16"==a.type||"7"==a.type)}var c="im-card-",d=300,e=window.localStorage||{getItem:function(){return null},setItem:function(){},removeItem:function(){}},f=[];try{f=z.parse(e.getItem(c+"list")||"[]")}catch(h){}return{get:function(d){for(var h=0,i=d.length;i>h;h++){var j=d[h];if(-1==b(f,j))return g;var k={};try{k=z.parse(e.getItem(c+j)||"{}")}catch(l){}if(a(k))return k}return g},set:function(a,b){if(f.length>d){var g=f.shift();e.removeItem(c+g)}f.push(a),e.setItem(c+"list",z.stringify(f)),e.setItem(c+a,z.stringify(b))}}}),a("FE",function(){function h(b,c){var d,h,j=new i,l=b[0]||{},n=[],o={},p={};if(!c&&l.url_short&&z.set(l.url_short,l),l.annotations&&l.annotations[0])if("36"!=l.type&&"39"!=l.type||!l.annotations[0].object)if("34"==l.type||"16"==l.type)h=l.annotations&&l.annotations[0],h?(o={type:"news",style:"34"==l.type?"simple":"vote",name:h.title,url:l.url_short,pic:h.img_prev||M},j.resolve({card:h,rule:null,extra:null,"short":l.url_short,"long":l.url_long,type:"news",show:f,domain_id:"",biz_id:"",display:o,name:o.name,html:a(y(o).toString())})):j.resolve({});else if("7"==l.type)if(h=l.annotations&&l.annotations[0]){var q=[];C(h.news,function(a){q.push({name:a.t,url:a.url})}),o={type:"news",style:"collection",name:h.ptitle,url:l.url_short,pic:h.sp||M,purl:h.purl,items:q},j.resolve({card:h,rule:null,extra:null,"short":l.url_short,"long":l.url_long,type:"news",show:f,domain_id:"",biz_id:"",display:o,name:o.name,html:a(y(o).toString())})}else j.resolve({});else j.resolve({});else{h=l.annotations[0];var r=e(h);switch(d=h.object_domain_id.substring(0,7),o=r.content,o.url=l.url_long,o.enUrl=encodeURIComponent(o.url),o.id=h.object_id,o.short=l.url_short,o.enShort=encodeURIComponent(o.short),o.style=h.object_type,h.object_type){case"audio":l.extra=m(J,{object_id:h.object_id});break;case"article":l.extra=k("entity/show",{object_id:h.object_id,with_object:1});break;case"collection":if(h.object&&h.object.items){var s=[];C(h.object.items,function(a,b){s.push(k("entity/show",{object_id:a.id,with_object:1})),b>0?n.push({id:a.id,name:a.display_name,pic:a.pic,url:a.url,enUrl:encodeURIComponent(a.url)}):o.id=a.id}),l.extra=s}break;case"priMessage":var t=h.object;if(t){var u=(t.content_data,t.content_template.replace(/{{(\w+).(\w+)}}/g,function(a,b){return'<span style="color :${display.data.'+b+'.color}"> ${display.data.'+b+".value} </span>"}).replace(/\n/g,"<br />"));u="  <#et tname display> "+u+"</#et>",o={type:"priMessage",headimgurl:t.headimgurl,data:t.content_data,content_template:t.content_template,create_at:B(t.create_at),display_name:t.display_name,target_url:t.target_url,note:t.note};var v=w(u)(o);o.content=v}}if("1032"==h.object_domain_id&&"collection"==h.object_type&&(o.type="collection",o.pic=h.object.full_image&&h.object.full_image.url,o.items=n),("2002449"==d||"2002174"==d)&&(o.style="2002449"==d?"taobao":"tmall",o.category=h.object.custom_data&&h.object.custom_data.category_name||""),o.pic=o.pic||function(){var a;switch(o.style){case"article":a=M;break;case"vote":a=N;break;case"topic":a=O;break;default:a=L}return a}(),o.liked=g,o.like_count=0,p={card:h,rule:r.rule,extra:l.extra||null,"short":l.url_short,"long":l.url_long,type:h.object_type,show:"1"==h.show_status.charAt(0),domain_id:h.object_domain_id,biz_id:(h.containerid||"").substring(0,6),display:o,name:o.name||o.display_name,html:a(y(o).toString())},j.resolve(p),Q(h.object_id),c){var x=r.rule.desc1,A=r.rule.desc2;(x&&x.indexOf("dynamic")>-1||A&&A.indexOf("dynamic")>-1||h.actions&&h.actions[0])&&R(l.url_short)}}else j.resolve({});return j}function e(a){var b={type:"common"},e=(a.containerid||"").substring(0,6),f=a.object_domain_id,g=a.object_type,h=d(e,f,g),i=c(h.desc1||"",a).replace(/\|/g,""),j=c(h.desc2||"",a).replace(/\|/g,""),k=!!i&&!!j;return b.pic=a.object.img_url||a.object.image&&a.object.image.url,b.name=a.object.display_name,b.button=h.button||"",b.multi=k,k?(b.desc1=i,b.desc2=j):b.desc=i||j,b.action=h.actionType,a.actions&&a.actions[0]&&(b.button=a.actions[0].name),{content:b,rule:h}}function d(a,b,c){if(p.biz[a])return r.associate(p.biz[a],H);if(p.domain[b]&&p.domain[b][c])return r.associate(p.domain[b][c],G);var d="";return b&&"1"==b.charAt(0)?d=b.substring(0,4):b&&"2"==b.charAt(0)&&(d=b.substring(0,7)),p.domain[d]&&p.domain[d][c]?r.associate(p.domain[d][c],G):{}}function c(a,b){return a.replace(E,function(a){return(new I("try{ return this."+a.replace(/\.(\d+)/g,function(a,b){return"["+b+"]"})+' || "";}catch(e){return "";}')).apply(b)})}function a(a){return a.replace(/<!--[^(-->)]*-->/g,"")}var i=b("B4"),j=b("DD"),k=b("F5"),l=b("F9"),m=b("B7"),n=b("B9"),o=b("B8"),p=b("A1"),q=b("A7"),r=b("A5"),s=b("A8"),t=b("B2"),u=b("A3"),v=b("B1"),w=b("B0"),x=b("A2"),y=w(x),z=b("FD"),A=b("A9"),B=b("B3"),C=r.forEach,D=/http:\/\/t\.cn\/([\w\d]*)/g,E=/(\w+(\.[\w|\d]+)*)/g,F=/#(\S+)#/g,G=["domain_id","name","object_type","desc1","desc2","button","actionType"],H=["biz_id","name","object_type","desc1","desc2","button","actionType"],I=Function,J="http://ting.weibo.com/page/appclient/getsonginfojsonp",K="http://api.t.sina.com.cn/short_url/batch_info.json?is_encoded=1&source="+j("im_source"),L="http://img.t.sinajs.cn/t4/appstyle/V5_webim/images/card_default.gif",M="http://img.t.sinajs.cn/t5/style/images/face/face_card_longwb.png",N="http://img.t.sinajs.cn/t5/style/images/face/bg_face_card.png",O="http://img.t.sinajs.cn/t5/style/images/topic_PCD/topicavatar.jpg",P="http://img.t.sinajs.cn/t4/appstyle/V5_webim/images/card_atten.jpg",Q=function(){function c(a){q.forEach(a,function(a,c){var d=t(f+" a[data-im=card.like][data-id="+a+"]");C(d,function(a){var d=a.getElementsByTagName("em")[0],e=a.getElementsByTagName("em")[1],f=s.parseQuery(a.getAttribute("data-im-param")||"");b(d,c.liked?f.class1:f.class2),e.innerHTML=c.count||0,e.style.display=0===c.count?"none":"",f.liked=c.liked?"true":"false",a.setAttribute("data-im-param",q.toQuery(f))})})}function b(a,b){a.className=b.replace(/\|/g," ")}function a(){var a=g.join(",");g.length=0,o([k("likes/exists",{uid:j("uid"),object_ids:a}),k("likes/counts",{object_ids:a})],["exists","counts"]).done(function(a){var b=a.exists,d=a.counts;if(b.result&&b.result.length&&d.objects&&d.objects.length){var e={};C(b.result,function(a){e[a.object_id]={liked:a.liked,count:0}}),C(d.objects,function(a){e[a.object_id]&&(e[a.object_id].count=a.like_counts)}),c(e)}})}var d=20,e=500,f="."+j("im_class")+" ",g=[],h=null;return function(b){g.push(b),h&&clearTimeout(h),g.length<d?h=A(a,e):a()}}(),R=function(){function b(){var b=g.join(",");g.length=0,m(K,{url_short:b}).done(function(b){C(b,a)})}function a(a){var b=a.annotations&&a.annotations[0];if(b&&b.object){var c=b.object_id,d=e(b).content;if(d.multi){var g=t(f+" [data-im-card-id="+c+"] [data-im-type=card_desc1]"),h=t(f+" [data-im-card-id="+c+"] [data-im-type=card_desc2]");C(g,function(a){a.innerHTML=d.desc1}),C(h,function(a){a.innerHTML=d.desc2})}else{var i=t(f+" [data-im-card-id="+c+"] [data-im-type=card_desc]");C(i,function(a){a.innerHTML=d.desc})}var j=t(f+" [data-im-card-id="+c+"] [data-im-type=card_btn]");C(j,function(a){a.innerHTML=d.button}),z.set(a.url_short,a)}}var c=20,d=500,f="."+j("im_class")+" ",g=[],h=null;return function(a){g.push(a),h&&clearTimeout(h),g.length<c?h=A(b,d):b()}}(),S={parseShortUrl:function(a){var b=new i,c=(a||"").match(D);return b.outer(function(){function a(){m(K,{url_short:c.join(",")}).done(function(a){if(u.isArray(a)){var c=[{}];C(a,function(a){c.push(function(a){return a&&a.annotations&&a.annotations[0]&&a.annotations[0].object&&a.annotations[0].object.display_name&&(a.annotations[0].object.display_name=a.annotations[0].object.display_name.replace(/</g,encodeURIComponent("<")).replace(/>/g,encodeURIComponent(">"))),function(b){return u.isEmptyObject(b)?h([a]):b}}(a))}),n(c).done(function(a){b.resolve(u.isArray(a)?a[a.length-1]:{})}).fail(function(){b.resolve({})})}else b.resolve({})}).fail(function(){b.resolve({})})}if(c&&c.length){var d=z.get(c);d?(d&&d.annotations&&d.annotations[0]&&d.annotations[0].object&&d.annotations[0].object.display_name&&(d.annotations[0].object.display_name=d.annotations[0].object.display_name.replace(/</g,encodeURIComponent("<")).replace(/>/g,encodeURIComponent(">"))),h([d],!0).done(function(c){u.isEmptyObject(c)?a():b.resolve(c)})):a()}else b.resolve({})})},parseExt:function(b,c,d){var e=new i;return b?"invite"==b.card_type?"attention"==b.invite_type?e.outer(function(e){l.getUser(c).done(function(c){if(c.uid){var g={},h={type:"im_invite",style:"attention",uid:c.uid,nick:c.nick,status:b.invite_state,pic:b.app_logo||P,mid:d};g.type="im_invite",g.display=h,g.show=f,g.html=a(y(h).toString()),e.resolve(g)}else e.resolve({})}).fail(function(){e.resolve({})})}):"game"==b.invite_type?e.outer(function(d){l.getUser(c).done(function(c){if(c.uid){var e={},g={type:"im_invite",style:"game",uid:c.uid,nick:c.nick,app_name:b.app_name,invite_url:b.invite_url};e.type="im_invite",e.display=g,e.show=f,e.html=a(y(g).toString()),d.resolve(e)}else d.resolve({})}).fail(function(){d.resolve({})})}):{}:"weibo"==b.card_type?{}:{}:{}},parseTopic:function(a){var b=(a||"").match(F);return(new i).outer(function(a){if(b&&b.length){var c,d=b[0];d=d.substring(1,d.length-1),c="1022:100808"+v(d),k("object/show",{object_id:c}).done(function(b){var c="http://huati.weibo.com/k/"+encodeURIComponent(d);h([{annotations:[b],description:"",last_modified:"",title:"",type:"36",url_long:c,url_short:c}]).done(a.resolve)}).fail(function(){a.resolve({})})}else a.resolve({})})}};return S}),a("FF",function(){var a=b("B4"),c=b("DD"),d=(b("E9"),b("F6")),e=b("F5"),g=b("B7"),h=b("B9"),i=b("B8"),j=b("EF"),k=b("A5"),l=b("A3"),m=b("FE"),n=k.forEach,o=b("A6"),p=/\\?(\[([^\[\]]+)\])/g,q="http://ting.weibo.com/page/appclient/getsonginfojsonp",r=/^http:\/\/weibo\.com\/p\/100000([0-9A-Za-z\.,_\+\-]{1,})/,s=/^http:\/\/weibo\.com\/(\d+)\/([a-zA-Z0-9]+)/,t=/^http:\/\/weibo\.com\/(?:u\/)?([a-zA-Z0-9]+)/,u=/^http:\/\/weibo\.com\/([a-zA-Z0-9]+)\/profile/,v=function(){return(new a).outer(function(a){var b=window.localStorage;if(b&&b.getItem("wbim_phiz")&&"2.1.1"===z.parse(b.getItem("wbim_phiz")).version){var c=z.parse(b.getItem("wbim_phiz"));a.resolve(c.maps,c.view)}else e("emotions").done(function(c){var d={},e=[],f={};n(c,function(a){var b=a.category||(a.hot?"hot":"default");d[a.phrase]=a.url,void 0==f[b]&&(f[b]=e.length,e[f[b]]={category:b,items:[]}),e[f[b]].items.push(a)});var g={maps:d,view:e,version:"2.1.1"};b.setItem("wbim_phiz",z.stringify(g)),a.resolve(d,e)}).fail(function(){a.resolve({},{})})})}(),w=function(){function b(b){return(new a).outer(function(a){e.list("friendships/groups/members","users",{list_id:b}).done(function(b){var d=[],f=[],g=[],i=[];for(b.users&&n(b.users,function(a){f.push(a.idstr),d.push({uid:a.idstr,nick:a.remark||a.remark_name||a.screen_name,sex:"m"==a.gender?1:0,status:a.online_status?"online":"offline",avatar:a.profile_image_url&&a.profile_image_url.split("/")[5],member:-1})});f.length>c;)g.push(f.splice(0,c).join(","));g.push(f.join(",")),n(g,function(a){i.push(e("friendships/friends/remark_batch",{uids:a}))}),h(i).done(function(b){var c={};n(b,function(a){n(a,function(a){a.remark&&a.id&&(c[a.id]=a.remark)})}),n(d,function(a){c[a.uid]&&(a.nick=c[a.uid])}),a.resolve(d)}).fail(a.inject)}).fail(a.inject)})}var c=40;return function(a){var c=[];return a.lists&&n(a.lists,function(a){c.push({id:a.idstr,name:a.name,count:a.member_count||0,users:b(a.idstr)})}),c.push({id:"0",name:"未分组",count:-1,users:b("0")}),c}}(),x={loadAudio:function(b){return(new a).outer(function(a){g(q,{object_id:b}).done(function(b){b&&0===b.result&&b.result_data&&b.result_data.mp3_url&&j(b.result_data.mp3_url).done(a.resolve)})})},getFile:function(b){return(new a).outer(function(a){e("mss/meta_query",{fid:b},"upload").done(function(c){c&&(c.id=b),a.resolve(c)}).fail(a.inject)})},getMenu:function(b){var c=new a;return c.outer(function(){e("messages/menu/show",{uid:b},"m").done(c.resolve).fail(c.inject)})},getFullText:function(b){var c=new a;return c.outer(function(){e("direct_messages/show_batch",{is_encoded:1,is_complete:1,dmids:b}).done(c.resolve).fail(c.inject)})},getFace:function(){return(new a).outer(function(a){v.done(function(b,c){a.resolve(c)})})},parseFace:function(b){return(new a).outer(function(a){var c=(b||"").match(p);c&&c.length>0?v.done(function(c){var d={};b=b.replace(p,function(a,b){return c[b]&&(d[b]=c[b]),a}),a.resolve(d)}):a.resolve({})})},parseProfile:function(b){return(new a).outer(function(a){var c=(b||"").match(t);if(c||(c=(b||"").match(u)),c&&c.length){var d=c[1];isNaN(d)?e("users/domain_show",{domain:d}).done(function(b){if(b){var d=b,e={type:"profile",avatar:d.avatar_large||d.avatar_hd,display_name:d.name||d.screen_name||"",summary:d.verified_reason||d.description||"",short_url:c[0]};a.resolve(e)}else a.resolve({})}).fail(function(){a.resolve({})}):e("users/show_batch",{uids:d,is_encoded:1}).done(function(b){if(b.users&&b.users[0]){var d=b.users[0],e={type:"profile",avatar:d.avatar_large||d.avatar_hd,display_name:d.name||d.screen_name||"",summary:d.verified_reason||d.description||"",short_url:c[0]};a.resolve(e)}else a.resolve({})}).fail(function(){a.resolve({})})}else a.resolve({})})},parseWeibo:function(b){return(new a).outer(function(a){var c=(b||"").match(r);if(c||(c=(b||"").match(s)),c&&c.length){var d=c[2],f={ids:o.decode(d),is_encoded:1};e("statuses/show_batch",f).done(function(b){if(b.statuses&&b.statuses[0]){var d=b.statuses[0],e=d.user&&(d.user.name||d.user.screen_name)||"",f={type:"weibo",img_url:d.bmiddle_pic||d.original_pic||d.user&&d.user.avatar_large,display_name:"转发&nbsp;"+e+"&nbsp;的微博",user_name:e,summary:d.text||"",short_url:c[0],object_type:"status",object_id:d.idstr};a.resolve(f.display_name||f.summary?f:{})}else a.resolve({})}).fail(function(){a.resolve({})})}else a.resolve({})})},analysisMessage:function(b){return(new a).outer(function(a){l.isString(b)&&(b={msg:b}),i([h([m.parseShortUrl(b.msg)],["url","ext","topic"],f).progress(function(a,c,d){"url"==a&&l.isEmptyObject(c)?d.push(m.parseExt(b.card,b.uid,b.mid)):"ext"==a&&l.isEmptyObject(c)&&d.push(m.parseTopic(b.msg))}),x.parseProfile(b.msg),x.parseWeibo(b.msg),x.parseFace(b.msg)],["card","profile","weibo","face"]).done(function(b){b.card=l.isEmptyObject(b.card.url)?l.isEmptyObject(b.card.ext)?b.card.topic:b.card.ext:b.card.url,a.resolve(b)}).fail(a.inject)})},pushEvent:function(a,b,e){return d("messages_event_create",{receiver_id:e,sender_id:c("uid"),type:a,key:b})},getGroups:function(){return(new a).outer(function(a){e("friendships/groups").done(function(b){a.resolve(w(b))}).fail(a.inject)})}};return x}),a("100",function(){var a=b("B4"),c=b("F7"),d=b("F8"),e=b("DD"),h=b("F9"),i=b("FB"),j=b("FC"),k=b("FA"),l=b("E8"),m=b("E9"),n=b("EA"),o=b("EB"),p=b("EC"),q=b("ED"),r=b("EE"),s=b("F3"),t=b("F4"),u=b("F1"),v=b("F2"),w=b("A7"),x=b("A9"),y=b("AB"),z=function(){var v=null,z=new a,A=new a,B=new a,C=g,D=g,E=h,F={},G={},H={isReady:g,status:"disConnected",register:function(){},shortOption:function(){}},I={};if(t&&(E=t(E)),H.onStatusChange=function(a){B.progress(a)},H.onStatusChange.unbind=function(a){B.unProgress(a)},H.onConnect=function(a,b){A.done(function(){a()}),b&&H.startConnect()},H.onNotice=function(a){n.on(a)},H.onNotice.unbind=function(a){n.unbind(a)},H.onNews=function(a){p.on(a)},H.onNews.unbind=function(a){p.unbind(a)},H.onMessage=function(a){q.on(a)},H.onMessage.unbind=function(a){q.unbind(a)},H.startConnect=function(){!C&&v?v.start():C=f},H.onUnreadChange=function(a){o.on(a)},H.onUnreadChange.unbind=function(a){o.unbind(a)},F.Deferred=b("B4"),F.queue=b("B9"),F.parallel=b("B8"),F.jsonp=b("B7"),F.delay=b("B5"),F.loader=b("B6"),H.tool=F,E&&(H.anyWhere=function(a){A.done(a)},E.public=b("F5"),E.process=G=b("FF"),E.getUnread=o.get,H.api=E,H.public=E.public,H.process=E.process,H.getUnread=o.get),j&&(H.watch=function(a,b){return j.watch(a,function(){var a=[].slice.call(arguments);if(b&&b.apply)try{b.apply(null,a)}catch(c){}})},H.publish=j.publish),H.onReady=function(a){z.done(a)},H.getTime=function(){return(new Date).getTime()},k){I=w.assign({},H);var J=k(I);H.register=J.register,H.shortOption=J.shortOption}return y(function(){H.isReady=f,I.root=H.root=c.create(),v=new l,m.inject(v),n.inject(v),v.onStatusChange(function(b,c){D||"connected"!=b||(D=f,I.getTime=H.getTime=function(){return v.getServerTime()},z.done(function(a,b){b||A.resolve(E,F,G)})),"disconnected"==b&&(D=g,"injected"==A.state()&&(A=new a)),I.status=H.status=b,B.notify(b,c)}),v.getUid()?(r(v.getUid()).done(function(a){I.storage=F.storage=a,p.start(v.getUid(),a),i?i(a).done(function(a){s&&(E=s(E,a)),I.initData=H.initData=a,z.resolve(H,!1),A.done(function(){h.getSetting().done(function(a){n.push("setting",{act:"refresh",data:a})}),h.getRecent().done(function(a){n.push("recent",{act:"refresh",list:a})})}),d.load()}).progress(function(a){H.initData&&("recent"==a.type?I.initData.recent=H.initData.recent=a.data:"setting"==a.type?I.initData.setting=H.initData.setting=a.data:"chat"==a.type&&(H.initData.chat=H.initData.chat=a.data))}):z.resolve(H,!1),C?v.start():e("auto_connect")!==g&&x(H.startConnect,parseInt(e("auto_connect"))||0)}),u&&(F.upload=u)):z.resolve({message:"Domain Error OR No Login!"},!0)}),H._onSend=m.on,H}();return v&&v(z),z});var A=b("DD")("im_space"),B=b("100"),C=b("FC");d[A]&&d[A]._inject&&(d[A]._inject(B),C&&C.setAll(d[A]._cache)),d[A]=B,d.$WBIM=d.$WBIM||{},d.$WBIM.register||(d.$WBIM.register=B.register),function(){{var a=d.__PubSub__,c=b("FC");b("EB")}b("AB")(function(){b("AF")(e.body,"click",function(a){var d=a.target||a.srcElement||e;if(d&&d.getAttribute){3==d.nodeType&&(d=d.parentNode);for(var f,g,h=d,i=d.getAttribute&&d.getAttribute("action-type"),j=d.getAttribute&&d.getAttribute("data-im");!(!d||j||i&&/webim\./.test(i)||"A"==d.tagName.toUpperCase()&&!/javascript/.test(d.href)||d==e.body);)d=d.parentNode,d&&d.getAttribute&&(i=d.getAttribute("action-type"),j=d.getAttribute("data-im"));(j||i&&"webim.conversation"!==i&&/webim\./.test(i))&&(f=j||i.split(".")[1],f&&(g=d.getAttribute("data-im-param")||d.getAttribute("action-data")||"",g=g?b("A8").parseQuery(g):{},c.publish("IM:"+f,g,{target:d,item:h}),a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.returnValue=!1,a.cancelBubble=!0))}})}),c.watch("IM:class",function(a){var c=b("F7").create();c.className+=" "+a}),c.watch("IM:connect",function(){b("100").startConnect()});var h=g,i=f;c.watch("IM:display",function(b){i="hide"!=b,h&&a.publish("webim.display",{show:i})}),c.watch("IM:uiReady",function(b){h=!!b,a.publish("webim.display",{show:i})}),c.watch("IM:tipClick",function(a){h&&i?c.publish("IM:conversation",a):location.href=p.box}),window.STK=window.STK||{},STK.webim=STK.webim||{},STK.webim.ui=STK.webim.ui||{},STK.webim.ui.uiEvent=STK.webim.ui.uiEvent||{},a.subscribe("webim.display",function(a){STK.webim.ui.uiEvent.fire=a&&a.show?function(a,b){"ui.user.click"==a&&c.publish("IM:conversation",b||{})}:null})}(),a("101",function(){function a(a,b){a.className=b.replace(/\|/g," ")}var c=b("100"),e=b("FC"),f=b("FF"),g=b("A7"),h=0,i={};e.watch("IM:card.audio.btn",function(b,c){if(c&&c.target){var d=c.target,e=d.getAttribute("data-im-audio-id");e&&i[e]?(i[e].pause(),a(d,b.class1),delete i[e]):(d.setAttribute("data-im-audio-id",++h),f.loadAudio(b.id).done(function(c){i[h]=c,a(d,b.class2)}))}}),e.watch("IM:card.like",function(b,d){if(d&&d.target){var e=d.target,f="true"==b.liked?"destory":"create",h=b.id,i=b.type;c.api.like(h,i,f).done(function(c){if(c.success){var d=e.getElementsByTagName("em")[0],f=e.getElementsByTagName("em")[1],h=parseInt(f.innerHTML);"true"==b.liked?(h--,a(d,b.class2)):(h++,a(d,b.class1)),f.innerHTML=h,f.style.display=0===h?"none":"",b.liked="true"==b.liked?"false":"true",e.setAttribute("data-im-param",g.toQuery(b))}})}}),e.watch("IM:card.video.show",function(a){window.open(decodeURIComponent(a.url),"_blank")}),e.watch("IM:card.article.show",function(a){window.open(decodeURIComponent(a.url),"_blank")}),e.watch("IM:card.show",function(a,b){b&&d.open(decodeURIComponent(a.url),"_blank")}),e.watch("IM:card.pri.click",function(a){d.open(decodeURIComponent(a.url),"_blank")}),e.watch("IM:invite.response",function(a,b){b&&c.api.inviteResponse(a.id).done(function(){for(var c=b.target.parentNode.childNodes,d=0,e=c.length;e>d;d++)c[d].className==a.class1?c[d].style.display="none":c[d].className==a.class2&&(c[d].style.display="")})})})}();
;
