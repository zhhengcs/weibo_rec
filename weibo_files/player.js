function playVideo(a){var b=window.$SINAPLAYEROBJ=window.$SINAPlayer.playerInit(a);return b.player}if(window.$SINAPlayer==undefined){window.$SINAPlayer={};window.$SINAPlayer.util={};window.$SINAPlayer.time={};window.$SINAPlayer.time.firstOpenTime=(new Date).getTime();window.$SINAPlayer.player={init:!1,type:1,load:!1};window.$SINAPLAYEROBJ=null;window.$SINAFLASHURL="//p.you.video.sina.com.cn/swf/opPlayer20170831_V5_1_1_54.swf"};
window.$SINAPlayer.cacheFuns=function(){var a=[],b={};b.add=function(b,c){a.push({name:b,args:c||[]})};b.forExec=function(b){for(i in a){var c=a[i];b(c.name,c.args)}};b.clear=function(){a=[]};return b}();
window.$SINAPlayer.playersControl=function(){var a={};return{add:function(b,c){a[b]={dom:document.getElementById(b),obj:c}},getplayer:function(b){return a[b]?a[b]:null}}}();
window.$SINAPlayer.getPlayer=function(){var a=window.$SINAPlayer.playersControl;return{getPlayer:function(b){return a.getplayer(b)}}}();
window.$SINAPlayer.playerCallJs=function(){var a={},b=window.$SINAPlayer.cacheFuns,c=window.$SINAPlayer.getPlayer,d=!1,e=function(){if(arguments.length==0)throw new Error("播放器回调js方法必须传入播放器id");var a=Array.prototype.slice.call(arguments,0);a.push((new Date).getTime());return a},f=function(a){$PlayerCallJs[a]=function(){var f=e.apply(null,arguments);b.add(a,f);if(a=="flashInitCompleted"){window.$SINAPlayer.player.load=!0;var g=setInterval(function(){if(!!$SCOPE&&typeof $SCOPE=="object"&&typeof $SCOPE.video=="object"){var a=c.getPlayer(f[f.length-2]),b=a.obj;if(!d){d=!0;b.callback.fire("flashInitCompleted",a.obj.playerid)}var e=setInterval(function(){if(b.playVideo){clearInterval(e);b.playVideo($SCOPE.video)}},20);clearInterval(g)}},20)}if(a=="playComplete"){var h=c.getPlayer(f[f.length-2]);h&&h.obj.callback.fire("playCompleted",h.obj.playerid)}if(a=="h5RecordeValue"){var i=f[f.length-3],h=c.getPlayer(f[f.length-2]);h.obj.callback.fire("h5RecordeValue",i,h.obj.playerid)}}},g=function(a,b){$PlayerCallJs[a]=function(){var a=e.apply(null,arguments);b.apply(null,a)}};if(typeof window.$PlayerCallJs=="undefined"){window.$PlayerCallJs={};window.$PlayerCallNameArr=["flashInitCompleted","playComplete","playOutside","playStart","videoError","toWide","toNarrow","setLight","recordValue","h5RecordeValue","adComplete"]}for(var h=0,i=$PlayerCallNameArr.length;h<i;h++){var j=$PlayerCallNameArr[h];f(j)}a.addDelay=function(a){if(a!=""){window.$PlayerCallNameArr.push(a);f(a)}};a.addNow=function(a,b){a!=""&&typeof b=="function"&&g(a,b)};return a};
window.$SINAPlayer.util.mobileos=function(){function a(a){var b={},c={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),o=a.match(/PlayBook/),p=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),q=a.match(/Firefox\/([\d.]+)/);if(c.webkit=!!d)c.version=d[1];e&&(b.android=!0,b.version=e[2]);g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,"."));f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,"."));h&&(b.webos=!0,b.version=h[2]);i&&(b.touchpad=!0);l&&(b.blackberry=!0,b.version=l[2]);m&&(b.bb10=!0,b.version=m[2]);n&&(b.rimtabletos=!0,b.version=n[2]);o&&(c.playbook=!0);j&&(b.kindle=!0,b.version=j[1]);k&&(c.silk=!0,c.version=k[1]);!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0);p&&(c.chrome=!0,c.version=p[1]);q&&(c.firefox=!0,c.version=q[1]);b.tablet=!!(f||o||e&&!a.match(/Mobile/)||q&&a.match(/Tablet/));b.phone=!b.tablet&&!!(e||g||h||l||m||p&&a.match(/Android/)||p&&a.match(/CriOS\/([\d.]+)/)||q&&a.match(/Mobile/));return{os:b,browser:c}}return a(navigator.userAgent)}();
window.$SINAPlayer.util.extend=function(a,b){var c=function(a){return typeof a=="undefined"||a==null?!1:a.constructor==Object?!0:!1};for(i in b)c(b[i])&&c(a[i])?window.$SINAPlayer.util.extend(a[i],b[i]):a[i]=b[i];return a};
window.$SINAPlayer.util.platform=function(){var a=navigator.userAgent.toLowerCase(),b=window.$SINAPlayer.util.mobileos,c=window.$SINAPlayer.util.extend,d={os:{win:/windows/i.test(a),mac:/mac/i.test(a)},browser:{uc:/ucweb/i.test(a)||/ucbrowser/i.test(a)}};c(d.os,b.os);c(d.browser,b.browser);d.ismobile=function(){var a=d.os;return"createTouch"in document||"onorientationchange"in window?!0:a.phone||a.tablet?!0:!1}();return d}();
window.$SINAPlayer.util.buildH5=function(a){var b={autoplay:!1,controls:!0,loop:!1,poster:"",preload:"auto"};window.$SINAPlayer.util.extend(b,a.h5attr||{});return['<video id="'+a.id+'" name="'+a.id+'" src="" ',typeof a.width!="undefined"?'width="'+a.width+'" ':"",typeof a.height!="undefined"?'height="'+a.height+'" ':"",b.autoplay?"autoplay ":"",b.controls?"controls ":"",b.loop?"loop ":"",'preload="'+b.preload+'" ','poster="'+b.poster+'">',"</video>"].join("")};
window.$SINAPlayer.util.jsonp=function(a,b){var c=(new Date).getTime(),d=document.getElementsByTagName("head")[0]||document.documentElement,e=document.createElement("script"),f="HTML5_"+c;e.src=a+"&callback="+f;e.charset="utf-8";window[f]=function(a){if(b||typeof b=="function"){b(a);delete window[b];d.removeChild(e)}};d.appendChild(e)};
window.$SINAPlayer.util.callback=function(){var a={};this.add=function(b,c){a[b]||(a[b]=[]);a[b].push(c)};this.fire=function(b,c){var d=Array.prototype.slice.call(arguments,0);d.shift();var e=a[b];if(e){var f=e.length;for(var g=0;g<f;g++)try{e[g].apply(null,d)}catch(h){}}}};
window.$SINAPlayer.player=function(){function a(a,b){if(!a||!a.container)throw new Error("未传入播放器容器id");if(typeof b!="function")throw new Error("未传入构建播放器dom的方法");var c=document.getElementById(a.container);if(!c)throw new Error("播放器容器无效");this.container=c;this.playerid=a.id;this.callback=new window.$SINAPlayer.util.callback;this.buildDom=function(){this.container.innerHTML=b(a);this.player=document.getElementById(a.id);a.classname&&(this.player.className=a.classname)}}a.prototype.init=function(a){window.$SCOPE=window.$SCOPE||{};$SCOPE.video=$SCOPE.video||a};a.prototype.setSize=function(a){if(!a)return;a.width&&this.player.setAttribute("width",a.width);a.height&&this.player.setAttribute("height",a.height)};a.prototype.playVideo=function(){};a.prototype.pause=function(){};a.prototype.play=function(){};return a}();
window.$SINAPlayer.util.extendClass=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.superclass=b.prototype;b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)};
window.$SINAPlayer.sinaH5Player=function(){function b(a){a.h5attr=a.h5attr||{};b.superclass.constructor.call(this,a,window.$SINAPlayer.util.buildH5);var c=this.buildDom;this.buildDom=function(a){c.call(this);this.callback.fire("playerInitCompleted",this.playerid);typeof a!="boolean"&&(a=!0);a&&this.bindEvt()}}var a=window.$SINAPlayer.util.jsonp;window.$SINAPlayer.util.extendClass(b,window.$SINAPlayer.player);b.prototype.playVideo=function(b){if(b==undefined||b==null||b==-1)return;var c=this;this.callback.fire("playStart",this.playerid);if(typeof b=="string"&&b!=""){this.player.src=b;return}var d=function(a){typeof a=="object"&&a.streamAddress&&(c.player.src=a.streamAddress)};if(typeof b=="object"&&b.videoid&&b.inter&&b.inter.url){b.inter.idkeyname=b.inter.idkeyname||"videoid";a(b.inter.url+"?"+b.inter.idkeyname+"="+b.videoid,function(a){a&&a.code=="A0001"?typeof b.inter.callback=="function"?b.inter.callback(c.player,a):d(a.data):this.callback.fire("videoError",this.playerid)})}else this.callback.fire("videoError",this.playerid)};b.prototype.bindEvt=function(){var a=this,b={ended:function(){a.callback.fire("playComplete",a.playerid)}};a.player.addEventListener("ended",b.ended)};b.prototype.pause=function(){this.player.pause()};b.prototype.play=function(){this.player.play()};b.prototype.on=function(a,b){this.callback.add(a,b)};return b}();
window.$SINAPlayer.util.buildFlash=function(a,b){var c={},d="undefined",e=a.navagator,d="undefined",f="object",g="Shockwave Flash",h="ShockwaveFlash.ShockwaveFlash",j="application/x-shockwave-flash",k="SWFObjectExprInst",l="onreadystatechange",e=navigator,m=!1,n=function(){var c=typeof b.getElementById!=d&&typeof b.getElementsByTagName!=d&&typeof b.createElement!=d,i=e.userAgent.toLowerCase(),k=e.platform.toLowerCase(),l=k?/win/.test(k):/win/.test(i),n=k?/mac/.test(k):/mac/.test(i),o=/webkit/.test(i)?parseFloat(i.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof e.plugins!=d&&typeof e.plugins[g]==f){r=e.plugins[g].description;if(r&&(typeof e.mimeTypes==d||!e.mimeTypes[j]||!!e.mimeTypes[j].enabledPlugin)){m=!0;p=!1;r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1");q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10);q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10);q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else if(typeof a.ActiveXObject!=d)try{var s=new ActiveXObject(h);if(s){r=s.GetVariable("$version");if(r){p=!0;r=r.split(" ")[1].split(",");q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]}}}catch(t){}return{w3:c,pv:q,wk:o,ie:p,win:l,mac:n}}(),o=function(a,b){if(n.ie&&n.win){var c="",b=b||{};for(var d in a)a[d]!=Object.prototype[d]&&(d.toLowerCase()=="data"?b.movie=a[d]:d.toLowerCase()=="styleclass"?c+=' class="'+a[d]+'"':d.toLowerCase()!="classid"&&(c+=" "+d+'="'+a[d]+'"'));var e="";for(var f in b)b[f]!=Object.prototype[f]&&(e+='<param name="'+f+'" value="'+b[f]+'" />');return'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+e+"</object>"}var g='<embed pluginspage="//www.macromedia.com/go/getflashplayer" type="'+j+'" ';for(var d in a)a[d]!=Object.prototype[d]&&(d.toLowerCase()=="data"?g+='src="'+a[d]+'" ':d.toLowerCase()=="styleclass"?g+=' class="'+a[d]+'" ':d.toLowerCase()!="classid"&&(g+=" "+d+'="'+a[d]+'" '));for(var h in b)g+=h+'="'+b[h]+'" ';g+="/>";return g},p=function(a,b){for(i in b)typeof b[i]=="object"&&typeof a[i]=="object"?window.$SINAPlayer.util.extend(a[i],b[i]):a[i]=b[i];return a};c.getFlashHTML=function(a){var b={url:"",id:"vPlayer",flashvars:{},params:{allowNetworking:"all",allowScriptAccess:"always",wmode:"transparent",allowFullScreen:"true",quality:"high",bgcolor:"#000000"},attributes:{}};p(b,a);var c={},d={};c.data=b.url;typeof b.width!="undefined"&&(c.width=b.width+"");typeof b.height!="undefined"&&(c.height=b.height+"");c.id=b.id;c.name=b.id;for(var e in b.attributes)c[e]=b.attributes[e];for(var e in b.params)d[e]=b.params[e];d.flashvars="";for(var e in b.flashvars)d.flashvars?d.flashvars+="&"+e+"="+b.flashvars[e]:d.flashvars=e+"="+b.flashvars[e];return o(c,d)};c.isSupport=function(){};c.isSupportVersion=function(a){};return c}(window,document);
window.$SINAPlayer.util.cookie={get:function(a){a=a.replace(/([\.\[\]\$])/g,"\\$1");var b=new RegExp(a+"=([^;]*)?;","i"),c=document.cookie+";",d=c.match(b);return d?d[1]||"":""},set:function(a,b,c){var d=[],e,f,g=window.$LivePlayer.util.extend({expire:null,path:"/",domain:null,secure:null,encode:!0},c);g.encode==1&&(b=escape(b));d.push(a+"="+b);g.path!=null&&d.push("path="+g.path);g.domain!=null&&d.push("domain="+g.domain);g.secure!=null&&d.push(g.secure);if(g.expire!=null){e=new Date;f=e.getTime()+g.expire*36e5;e.setTime(f);d.push("expires="+e.toGMTString())}document.cookie=d.join(";")}};
window.$SINAPlayer.util.queryToJson=function(b,c){var d=b.replace(/^\s+|\s+$/,"").split("&"),e={},f=function(a){return c?decodeURIComponent(a):a};for(var g=0,h=d.length;g<h;g++)if(d[g]){var i=d[g].split("="),j=i[0],k=i[1];if(i.length<2){k=j;j="$nullName"}if(!e[j])e[j]=f(k);else{a.isArray(e[j])!=1&&(e[j]=[e[j]]);e[j].push(f(k))}}return e};
window.$SINAPlayer.getUser=function(){var a=window.$SINAPlayer.util.cookie.get("SUP"),b=!1;a&&(b=window.$SINAPlayer.util.queryToJson(unescape(a),!0));return b};
window.$SINAPlayer.sinaFlashPlayer=function(){function a(b){a.superclass.constructor.call(this,b,window.$SINAPlayer.util.buildFlash.getFlashHTML)}window.$SINAPlayer.util.extendClass(a,window.$SINAPlayer.player);a.prototype.playVideo=function(a){if(a==-1)this.player.playVideo(-1);else if(typeof a=="object"&&a.video_id){var b={pid:a.pid,channel_id:a.channel_id,videoTitle:a.title,videoURL:a.url||location.href,tokenURL:a.swfOutsideUrl||""},c=window.$SINAPlayer.getUser();c&&c.uid&&(b.uid=c.uid);var d=this,e=setInterval(function(){if(d.player&&d.player.playVideo){d.player.playVideo(a.video_id,b);clearInterval(e)}},50)}};a.prototype.pause=function(){try{this.player.jsPause()}catch(a){}};a.prototype.play=function(){try{this.player.jsPlay()}catch(a){}};a.prototype.on=function(a,b){this.callback.add(a,b)};return a}();
window.$SINAPlayer.util.checkFlashPlugins=function(){function b(a){var b={max:-1,min:-1};a=a.replace(/,/g,".");var c=a.match(/\d+.\d+/);if(c){c=c[0];var d=c.split(".");b.max=parseInt(d[0]||0);b.min=parseInt(d[1]||0)}return b}function c(){try{if(navigator.plugins&&navigator.plugins["Shockwave Flash"]){a.flash=!0;var c=navigator.plugins["Shockwave Flash"],d=b(c.description);a.maxversion=d.max;a.minversion=d.min}else if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){a.flash=!0;var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d=b(e.GetVariable("$version"));a.maxversion=d.max;a.minversion=d.min}}catch(f){}}var a={};a.maxversion=0;a.minversion=0;a.flash=!1;c();a.support=function(b,c){if(!a.flash)return!1;if(a.maxversion>b)return!0;if(a.maxversion!=b)return!1;if(c!=undefined)return a.minversion>=c?!0:!1};return a}();
window.$SINAPlayer.checkFlash=function(a){var b=window.$SINAPlayer.util.checkFlashPlugins,c=function(b,c){a.innerHTML='<div style="text-align: center;">请<a href="'+b+'" target="_blank">点击'+"</a>"+c+"</div>"};if(!b.support(11,0)){c("//www.adobe.com/go/getflashplayer","升级您的Flash Player版本，最低版本要求：11.0");return!1}return!0};
window.$SINAPlayer.playerInit=function(a){function j(){var b=a.flashvars;for(var d in b)b[d]=encodeURIComponent(b[d]);c(g,a||{});g.url||(g.url=window.$SINAFLASHURL);g.flashvars.playerId=g.id;g.flashvars.jsNamespace="window.$PlayerCallJs";i=document.getElementById(g.container)}function k(){e.add(h.player.playerid,h.player)}function l(){if(window.$SINAPlayer.checkFlash(i)){h.player=new window.$SINAPlayer.sinaFlashPlayer(g);window.$SINAPlayer.player.type=1;window.$SINAPlayer.player.init=!0;h.player.buildDom();k()}}function m(){window.$SINAPlayer.sinaH5Player.prototype.playVideo=function(a){if(!a||a==-1)return;var b=this;a.poster&&(this.player.poster=a.poster);this.callback.fire("playStart",this.playerid);var c=function(c){for(var d in c){var e=c[d],g=e.file_id,h=e.file_api+"?vid="+g+"&tags=h5_jsplay";b.player.src=h;break}f("//hpi.video.sina.com.cn/public/counter?appname=sinaplayer&applt=web&appver=1.1&type=video&vpid="+a.video_id+"&r="+window.location.href);$PlayerCallJs.h5RecordeValue(e,b.playerid)},d=["mp4","m3u8"];a?f("//s.video.sina.com.cn/video/h5play?video_id="+a.video_id,function(a){if(a&&a.code=="1"){var e=a.data.videos,f=!1;for(var g=0,h=d.length;g<h;g++){var i=d[g];if(e[i]){f=!0;c(e[i]);break}}if(!f){var j=!1,k="";for(var i in e){k==""&&(k=i);if(b.player.canPlayType("video/"+i)){j=!0;c(e[i]);break}}!j&&k!=""&&c(e[k])}}else b.callback.fire("videoError",this.playerid)}):this.callback.fire("videoError",this.playerid)};h.player=new window.$SINAPlayer.sinaH5Player(g);window.$SINAPlayer.player.type=2;window.$SINAPlayer.player.init=!0;var a=[{playerInitCompleted:"flashInitCompleted"},{playStart:"playStart"},{videoError:"videoError"},{playComplete:"playComplete"}];for(var b=0,c=a.length;b<c;b++)(function(){var c=a[b];for(var d in c)h.player.callback.add(d,function(){try{$PlayerCallJs[c[d]].apply(null,arguments)}catch(a){}})})();h.player.buildDom(!0);k()}function n(){window.$SINAPlayer.time.initPlayerStart=(new Date).getTime();window.$SINAPlayer.player.init=!1;/phone|pad|android/i.test(navigator.userAgent)?m():l()}function o(){j();b();n()}var b=window.$SINAPlayer.playerCallJs,c=window.$SINAPlayer.util.extend,d=window.$SINAPlayer.util.platform,e=window.$SINAPlayer.playersControl,f=window.$SINAPlayer.util.jsonp,g={url:window.$SINAFLASHURL,id:"sinaPlayer",container:"sinaPlayerContainer",classname:"",params:{allowNetworking:"all",allowScriptAccess:"always",wmode:"opaque",allowFullScreen:"true",quality:"high"},attributes:{},flashvars:{brg:"0",brgon:"0",brginput:"0",tj:1},h5attr:{autoPlay:!1,controls:!0,loop:!1,poster:"",preload:"auto"}},h={},i=null;o();return h};

